var qD=Object.create;var yc=Object.defineProperty;var xD=Object.getOwnPropertyDescriptor;var AD=Object.getOwnPropertyNames;var TD=Object.getPrototypeOf,CD=Object.prototype.hasOwnProperty;var Ht=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Kt=(t,e)=>()=>(t&&(e=t(t=0)),e);var d=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),RD=(t,e)=>{for(var r in e)yc(t,r,{get:e[r],enumerable:!0})},av=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of AD(e))!CD.call(t,n)&&n!==r&&yc(t,n,{get:()=>e[n],enumerable:!(i=xD(e,n))||i.enumerable});return t};var PD=(t,e,r)=>(r=t!=null?qD(TD(t)):{},av(e||!t||!t.__esModule?yc(r,"default",{value:t,enumerable:!0}):r,t)),jD=t=>av(yc({},"__esModule",{value:!0}),t);function DD(t){throw new Error(`[unenv] ${t} is not implemented yet!`)}function Xo(t){return Object.assign(()=>{throw DD(t)},{__unenv__:!0})}var uv=Kt(()=>{o();s()});function WD(t){let e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");let r=t.indexOf("=");r===-1&&(r=e);let i=r===e?0:4-r%4;return[r,i]}function LD(t,e,r){return(e+r)*3/4-r}function cv(t){let e,r=WD(t),i=r[0],n=r[1],a=new MD(LD(t,i,n)),u=0,l=n>0?i-4:i,h;for(h=0;h<l;h+=4)e=Yt[t.charCodeAt(h)]<<18|Yt[t.charCodeAt(h+1)]<<12|Yt[t.charCodeAt(h+2)]<<6|Yt[t.charCodeAt(h+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=e&255;return n===2&&(e=Yt[t.charCodeAt(h)]<<2|Yt[t.charCodeAt(h+1)]>>4,a[u++]=e&255),n===1&&(e=Yt[t.charCodeAt(h)]<<10|Yt[t.charCodeAt(h+1)]<<4|Yt[t.charCodeAt(h+2)]>>2,a[u++]=e>>8&255,a[u++]=e&255),a}function BD(t){return Sr[t>>18&63]+Sr[t>>12&63]+Sr[t>>6&63]+Sr[t&63]}function kD(t,e,r){let i,n=[];for(let a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),n.push(BD(i));return n.join("")}function EN(t){let e,r=t.length,i=r%3,n=[],a=16383;for(let u=0,l=r-i;u<l;u+=a)n.push(kD(t,u,u+a>l?l:u+a));return i===1?(e=t[r-1],n.push(Sr[e>>2]+Sr[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],n.push(Sr[e>>10]+Sr[e>>4&63]+Sr[e<<2&63]+"=")),n.join("")}var Sr,Yt,MD,ON,lv=Kt(()=>{o();s();Sr=[],Yt=[],MD=typeof Uint8Array>"u"?Array:Uint8Array,ON="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let t=0,e=ON.length;t<e;++t)Sr[t]=ON[t],Yt[ON.charCodeAt(t)]=t;Yt[45]=62;Yt[95]=63});function Zo(t,e,r,i,n){let a,u,l=n*8-i-1,h=(1<<l)-1,y=h>>1,_=-7,b=r?n-1:0,w=r?-1:1,E=t[e+b];for(b+=w,a=E&(1<<-_)-1,E>>=-_,_+=l;_>0;)a=a*256+t[e+b],b+=w,_-=8;for(u=a&(1<<-_)-1,a>>=-_,_+=i;_>0;)u=u*256+t[e+b],b+=w,_-=8;if(a===0)a=1-y;else{if(a===h)return u?Number.NaN:(E?-1:1)*Number.POSITIVE_INFINITY;u=u+Math.pow(2,i),a=a-y}return(E?-1:1)*u*Math.pow(2,a-i)}function SN(t,e,r,i,n,a){let u,l,h,y=a*8-n-1,_=(1<<y)-1,b=_>>1,w=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=i?0:a-1,v=i?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),Number.isNaN(e)||e===Number.POSITIVE_INFINITY?(l=Number.isNaN(e)?1:0,u=_):(u=Math.floor(Math.log2(e)),e*(h=Math.pow(2,-u))<1&&(u--,h*=2),e+=u+b>=1?w/h:w*Math.pow(2,1-b),e*h>=2&&(u++,h/=2),u+b>=_?(l=0,u=_):u+b>=1?(l=(e*h-1)*Math.pow(2,n),u=u+b):(l=e*Math.pow(2,b-1)*Math.pow(2,n),u=0));n>=8;)t[r+E]=l&255,E+=v,l/=256,n-=8;for(u=u<<n|l,y+=n;y>0;)t[r+E]=u&255,E+=v,u/=256,y-=8;t[r+E-v]|=A*128}var dv=Kt(()=>{o();s();});function zD(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}function Zr(t){if(t>vN)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,S.prototype),e}function S(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return AN(t)}return Nv(t,e,r)}function Nv(t,e,r){if(typeof t=="string")return $D(t,e);if(ArrayBuffer.isView(t))return VD(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(vr(t,ArrayBuffer)||t&&vr(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(vr(t,SharedArrayBuffer)||t&&vr(t.buffer,SharedArrayBuffer)))return qN(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(i!=null&&i!==t)return S.from(i,e,r);let n=GD(t);if(n)return n;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return S.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function _v(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function QD(t,e,r){return _v(t),t<=0?Zr(t):e!==void 0?typeof r=="string"?Zr(t).fill(e,r):Zr(t).fill(e):Zr(t)}function AN(t){return _v(t),Zr(t<0?0:TN(t)|0)}function $D(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!S.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=wv(t,e)|0,i=Zr(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}function IN(t){let e=t.length<0?0:TN(t.length)|0,r=Zr(e);for(let i=0;i<e;i+=1)r[i]=t[i]&255;return r}function VD(t){if(vr(t,Uint8Array)){let e=new Uint8Array(t);return qN(e.buffer,e.byteOffset,e.byteLength)}return IN(t)}function qN(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return e===void 0&&r===void 0?i=new Uint8Array(t):r===void 0?i=new Uint8Array(t,e):i=new Uint8Array(t,e,r),Object.setPrototypeOf(i,S.prototype),i}function GD(t){if(S.isBuffer(t)){let e=TN(t.length)|0,r=Zr(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||RN(t.length)?Zr(0):IN(t);if(t.type==="Buffer"&&Array.isArray(t.data))return IN(t.data)}function TN(t){if(t>=vN)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+vN.toString(16)+" bytes");return t|0}function wv(t,e){if(S.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||vr(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return xN(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return xv(t).length;default:if(n)return i?-1:xN(t).length;e=(""+e).toLowerCase(),n=!0}}function JD(t,e,r){let i=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return nM(this,e,r);case"utf8":case"utf-8":return bv(this,e,r);case"ascii":return rM(this,e,r);case"latin1":case"binary":return iM(this,e,r);case"base64":return eM(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return sM(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function mn(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}function gv(t,e,r,i,n){if(t.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,RN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0)if(n)r=0;else return-1;if(typeof e=="string"&&(e=S.from(e,i)),S.isBuffer(e))return e.length===0?-1:hv(t,e,r,i,n);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):hv(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function hv(t,e,r,i,n){let a=1,u=t.length,l=e.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(t.length<2||e.length<2)return-1;a=2,u/=2,l/=2,r/=2}function h(_,b){return a===1?_[b]:_.readUInt16BE(b*a)}let y;if(n){let _=-1;for(y=r;y<u;y++)if(h(t,y)===h(e,_===-1?0:y-_)){if(_===-1&&(_=y),y-_+1===l)return _*a}else _!==-1&&(y-=y-_),_=-1}else for(r+l>u&&(r=u-l),y=r;y>=0;y--){let _=!0;for(let b=0;b<l;b++)if(h(t,y+b)!==h(e,b)){_=!1;break}if(_)return y}return-1}function HD(t,e,r,i){r=Number(r)||0;let n=t.length-r;i?(i=Number(i),i>n&&(i=n)):i=n;let a=e.length;i>a/2&&(i=a/2);let u;for(u=0;u<i;++u){let l=Number.parseInt(e.slice(u*2,u*2+2),16);if(RN(l))return u;t[r+u]=l}return u}function KD(t,e,r,i){return Nc(xN(e,t.length-r),t,r,i)}function YD(t,e,r,i){return Nc(cM(e),t,r,i)}function XD(t,e,r,i){return Nc(xv(e),t,r,i)}function ZD(t,e,r,i){return Nc(lM(e,t.length-r),t,r,i)}function eM(t,e,r){return e===0&&r===t.length?EN(t):EN(t.slice(e,r))}function bv(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let a=t[n],u=null,l=a>239?4:a>223?3:a>191?2:1;if(n+l<=r){let h,y,_,b;switch(l){case 1:a<128&&(u=a);break;case 2:h=t[n+1],(h&192)===128&&(b=(a&31)<<6|h&63,b>127&&(u=b));break;case 3:h=t[n+1],y=t[n+2],(h&192)===128&&(y&192)===128&&(b=(a&15)<<12|(h&63)<<6|y&63,b>2047&&(b<55296||b>57343)&&(u=b));break;case 4:h=t[n+1],y=t[n+2],_=t[n+3],(h&192)===128&&(y&192)===128&&(_&192)===128&&(b=(a&15)<<18|(h&63)<<12|(y&63)<<6|_&63,b>65535&&b<1114112&&(u=b))}}u===null?(u=65533,l=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|u&1023),i.push(u),n+=l}return tM(i)}function tM(t){let e=t.length;if(e<=fv)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=fv));return r}function rM(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]&127);return i}function iM(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function nM(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let a=e;a<r;++a)n+=dM[t[a]];return n}function sM(t,e,r){let i=t.slice(e,r),n="";for(let a=0;a<i.length-1;a+=2)n+=String.fromCharCode(i[a]+i[a+1]*256);return n}function Xe(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function xt(t,e,r,i,n,a){if(!S.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<a)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function Ov(t,e,r,i,n){qv(e,i,n,t,r,7);let a=Number(e&BigInt(4294967295));t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a,a=a>>8,t[r++]=a;let u=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=u,u=u>>8,t[r++]=u,u=u>>8,t[r++]=u,u=u>>8,t[r++]=u,r}function Ev(t,e,r,i,n){qv(e,i,n,t,r,7);let a=Number(e&BigInt(4294967295));t[r+7]=a,a=a>>8,t[r+6]=a,a=a>>8,t[r+5]=a,a=a>>8,t[r+4]=a;let u=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=u,u=u>>8,t[r+2]=u,u=u>>8,t[r+1]=u,u=u>>8,t[r]=u,r+8}function Sv(t,e,r,i,n,a){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function vv(t,e,r,i,n){return e=+e,r=r>>>0,n||Sv(t,e,r,4,34028234663852886e22,-34028234663852886e22),SN(t,e,r,i,23,4),r+4}function Iv(t,e,r,i,n){return e=+e,r=r>>>0,n||Sv(t,e,r,8,17976931348623157e292,-17976931348623157e292),SN(t,e,r,i,52,8),r+8}function CN(t,e,r){ms[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:Reflect.apply(e,this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(n){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:n,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function mv(t){let e="",r=t.length,i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function oM(t,e,r){ys(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&ea(e,t.length-(r+1))}function qv(t,e,r,i,n,a){if(t>r||t<e){let u=typeof e=="bigint"?"n":"",l;throw a>3?l=e===0||e===BigInt(0)?`>= 0${u} and < 2${u} ** ${(a+1)*8}${u}`:`>= -(2${u} ** ${(a+1)*8-1}${u}) and < 2 ** ${(a+1)*8-1}${u}`:l=`>= ${e}${u} and <= ${r}${u}`,new ms.ERR_OUT_OF_RANGE("value",l,t)}oM(i,n,a)}function ys(t,e){if(typeof t!="number")throw new ms.ERR_INVALID_ARG_TYPE(e,"number",t)}function ea(t,e,r){throw Math.floor(t)!==t?(ys(t,r),new ms.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new ms.ERR_BUFFER_OUT_OF_BOUNDS:new ms.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}function uM(t){if(t=t.split("=")[0],t=t.trim().replace(aM,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function xN(t,e){e=e||Number.POSITIVE_INFINITY;let r,i=t.length,n=null,a=[];for(let u=0;u<i;++u){if(r=t.charCodeAt(u),r>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}else if(u+1===i){(e-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function cM(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function lM(t,e){let r,i,n,a=[];for(let u=0;u<t.length&&!((e-=2)<0);++u)r=t.charCodeAt(u),i=r>>8,n=r%256,a.push(n,i);return a}function xv(t){return cv(uM(t))}function Nc(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}function vr(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function RN(t){return t!==t}function Ii(t){return typeof BigInt>"u"?pM:t}function pM(){throw new Error("BigInt not supported")}var pv,yv,vN,fv,ms,aM,dM,Av=Kt(()=>{o();s();lv();dv();pv=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null,yv=50,vN=2147483647;S.TYPED_ARRAY_SUPPORT=zD();!S.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This environment lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.buffer}});Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.byteOffset}});S.poolSize=8192;S.from=function(t,e,r){return Nv(t,e,r)};Object.setPrototypeOf(S.prototype,Uint8Array.prototype);Object.setPrototypeOf(S,Uint8Array);S.alloc=function(t,e,r){return QD(t,e,r)};S.allocUnsafe=function(t){return AN(t)};S.allocUnsafeSlow=function(t){return AN(t)};S.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==S.prototype};S.compare=function(e,r){if(vr(e,Uint8Array)&&(e=S.from(e,e.offset,e.byteLength)),vr(r,Uint8Array)&&(r=S.from(r,r.offset,r.byteLength)),!S.isBuffer(e)||!S.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let i=e.length,n=r.length;for(let a=0,u=Math.min(i,n);a<u;++a)if(e[a]!==r[a]){i=e[a],n=r[a];break}return i<n?-1:n<i?1:0};S.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};S.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return S.alloc(0);let i;if(r===void 0)for(r=0,i=0;i<e.length;++i)r+=e[i].length;let n=S.allocUnsafe(r),a=0;for(i=0;i<e.length;++i){let u=e[i];if(vr(u,Uint8Array))a+u.length>n.length?(S.isBuffer(u)||(u=S.from(u.buffer,u.byteOffset,u.byteLength)),u.copy(n,a)):Uint8Array.prototype.set.call(n,u,a);else if(S.isBuffer(u))u.copy(n,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=u.length}return n};S.byteLength=wv;S.prototype._isBuffer=!0;S.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)mn(this,r,r+1);return this};S.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)mn(this,r,r+3),mn(this,r+1,r+2);return this};S.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)mn(this,r,r+7),mn(this,r+1,r+6),mn(this,r+2,r+5),mn(this,r+3,r+4);return this};S.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?bv(this,0,e):Reflect.apply(JD,this,arguments)};S.prototype.toLocaleString=S.prototype.toString;S.prototype.equals=function(e){if(!S.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:S.compare(this,e)===0};S.prototype.inspect=function(){let e="",r=yv;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};pv&&(S.prototype[pv]=S.prototype.inspect);S.prototype.compare=function(e,r,i,n,a){if(vr(e,Uint8Array)&&(e=S.from(e,e.offset,e.byteLength)),!S.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),i===void 0&&(i=e?e.length:0),n===void 0&&(n=0),a===void 0&&(a=this.length),r<0||i>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&r>=i)return 0;if(n>=a)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,n>>>=0,a>>>=0,this===e)return 0;let u=a-n,l=i-r,h=Math.min(u,l),y=this.slice(n,a),_=e.slice(r,i);for(let b=0;b<h;++b)if(y[b]!==_[b]){u=y[b],l=_[b];break}return u<l?-1:l<u?1:0};S.prototype.includes=function(e,r,i){return this.indexOf(e,r,i)!==-1};S.prototype.indexOf=function(e,r,i){return gv(this,e,r,i,!0)};S.prototype.lastIndexOf=function(e,r,i){return gv(this,e,r,i,!1)};S.prototype.write=function(e,r,i,n){if(r===void 0)n="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")n=r,i=this.length,r=0;else if(Number.isFinite(r))r=r>>>0,Number.isFinite(i)?(i=i>>>0,n===void 0&&(n="utf8")):(n=i,i=void 0);else throw new TypeError("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-r;if((i===void 0||i>a)&&(i=a),e.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let u=!1;for(;;)switch(n){case"hex":return HD(this,e,r,i);case"utf8":case"utf-8":return KD(this,e,r,i);case"ascii":case"latin1":case"binary":return YD(this,e,r,i);case"base64":return XD(this,e,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ZD(this,e,r,i);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}};S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};fv=4096;S.prototype.slice=function(e,r){let i=this.length;e=Math.trunc(e),r=r===void 0?i:Math.trunc(r),e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<e&&(r=e);let n=this.subarray(e,r);return Object.setPrototypeOf(n,S.prototype),n};S.prototype.readUintLE=S.prototype.readUIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Xe(e,r,this.length);let n=this[e],a=1,u=0;for(;++u<r&&(a*=256);)n+=this[e+u]*a;return n};S.prototype.readUintBE=S.prototype.readUIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Xe(e,r,this.length);let n=this[e+--r],a=1;for(;r>0&&(a*=256);)n+=this[e+--r]*a;return n};S.prototype.readUint8=S.prototype.readUInt8=function(e,r){return e=e>>>0,r||Xe(e,1,this.length),this[e]};S.prototype.readUint16LE=S.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Xe(e,2,this.length),this[e]|this[e+1]<<8};S.prototype.readUint16BE=S.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Xe(e,2,this.length),this[e]<<8|this[e+1]};S.prototype.readUint32LE=S.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Xe(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};S.prototype.readUint32BE=S.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Xe(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};S.prototype.readBigUInt64LE=Ii(function(e){e=e>>>0,ys(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&ea(e,this.length-8);let n=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,a=this[++e]+this[++e]*2**8+this[++e]*2**16+i*2**24;return BigInt(n)+(BigInt(a)<<BigInt(32))});S.prototype.readBigUInt64BE=Ii(function(e){e=e>>>0,ys(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&ea(e,this.length-8);let n=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],a=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i;return(BigInt(n)<<BigInt(32))+BigInt(a)});S.prototype.readIntLE=function(e,r,i){e=e>>>0,r=r>>>0,i||Xe(e,r,this.length);let n=this[e],a=1,u=0;for(;++u<r&&(a*=256);)n+=this[e+u]*a;return a*=128,n>=a&&(n-=Math.pow(2,8*r)),n};S.prototype.readIntBE=function(e,r,i){e=e>>>0,r=r>>>0,i||Xe(e,r,this.length);let n=r,a=1,u=this[e+--n];for(;n>0&&(a*=256);)u+=this[e+--n]*a;return a*=128,u>=a&&(u-=Math.pow(2,8*r)),u};S.prototype.readInt8=function(e,r){return e=e>>>0,r||Xe(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};S.prototype.readInt16LE=function(e,r){e=e>>>0,r||Xe(e,2,this.length);let i=this[e]|this[e+1]<<8;return i&32768?i|4294901760:i};S.prototype.readInt16BE=function(e,r){e=e>>>0,r||Xe(e,2,this.length);let i=this[e+1]|this[e]<<8;return i&32768?i|4294901760:i};S.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Xe(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};S.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Xe(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};S.prototype.readBigInt64LE=Ii(function(e){e=e>>>0,ys(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&ea(e,this.length-8);let n=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});S.prototype.readBigInt64BE=Ii(function(e){e=e>>>0,ys(e,"offset");let r=this[e],i=this[e+7];(r===void 0||i===void 0)&&ea(e,this.length-8);let n=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+i)});S.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Xe(e,4,this.length),Zo(this,e,!0,23,4)};S.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Xe(e,4,this.length),Zo(this,e,!1,23,4)};S.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Xe(e,8,this.length),Zo(this,e,!0,52,8)};S.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Xe(e,8,this.length),Zo(this,e,!1,52,8)};S.prototype.writeUintLE=S.prototype.writeUIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let l=Math.pow(2,8*i)-1;xt(this,e,r,i,l,0)}let a=1,u=0;for(this[r]=e&255;++u<i&&(a*=256);)this[r+u]=e/a&255;return r+i};S.prototype.writeUintBE=S.prototype.writeUIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,i=i>>>0,!n){let l=Math.pow(2,8*i)-1;xt(this,e,r,i,l,0)}let a=i-1,u=1;for(this[r+a]=e&255;--a>=0&&(u*=256);)this[r+a]=e/u&255;return r+i};S.prototype.writeUint8=S.prototype.writeUInt8=function(e,r,i){return e=+e,r=r>>>0,i||xt(this,e,r,1,255,0),this[r]=e&255,r+1};S.prototype.writeUint16LE=S.prototype.writeUInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||xt(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};S.prototype.writeUint16BE=S.prototype.writeUInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||xt(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};S.prototype.writeUint32LE=S.prototype.writeUInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||xt(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};S.prototype.writeUint32BE=S.prototype.writeUInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||xt(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};S.prototype.writeBigUInt64LE=Ii(function(e,r=0){return Ov(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});S.prototype.writeBigUInt64BE=Ii(function(e,r=0){return Ev(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});S.prototype.writeIntLE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let h=Math.pow(2,8*i-1);xt(this,e,r,i,h-1,-h)}let a=0,u=1,l=0;for(this[r]=e&255;++a<i&&(u*=256);)e<0&&l===0&&this[r+a-1]!==0&&(l=1),this[r+a]=Math.trunc(e/u)-l&255;return r+i};S.prototype.writeIntBE=function(e,r,i,n){if(e=+e,r=r>>>0,!n){let h=Math.pow(2,8*i-1);xt(this,e,r,i,h-1,-h)}let a=i-1,u=1,l=0;for(this[r+a]=e&255;--a>=0&&(u*=256);)e<0&&l===0&&this[r+a+1]!==0&&(l=1),this[r+a]=Math.trunc(e/u)-l&255;return r+i};S.prototype.writeInt8=function(e,r,i){return e=+e,r=r>>>0,i||xt(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};S.prototype.writeInt16LE=function(e,r,i){return e=+e,r=r>>>0,i||xt(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};S.prototype.writeInt16BE=function(e,r,i){return e=+e,r=r>>>0,i||xt(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};S.prototype.writeInt32LE=function(e,r,i){return e=+e,r=r>>>0,i||xt(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};S.prototype.writeInt32BE=function(e,r,i){return e=+e,r=r>>>0,i||xt(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};S.prototype.writeBigInt64LE=Ii(function(e,r=0){return Ov(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});S.prototype.writeBigInt64BE=Ii(function(e,r=0){return Ev(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});S.prototype.writeFloatLE=function(e,r,i){return vv(this,e,r,!0,i)};S.prototype.writeFloatBE=function(e,r,i){return vv(this,e,r,!1,i)};S.prototype.writeDoubleLE=function(e,r,i){return Iv(this,e,r,!0,i)};S.prototype.writeDoubleBE=function(e,r,i){return Iv(this,e,r,!1,i)};S.prototype.copy=function(e,r,i,n){if(!S.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),!n&&n!==0&&(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<i&&(n=i),n===i||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-i&&(n=e.length-r+i);let a=n-i;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,n):Uint8Array.prototype.set.call(e,this.subarray(i,n),r),a};S.prototype.fill=function(e,r,i,n){if(typeof e=="string"){if(typeof r=="string"?(n=r,r=0,i=this.length):typeof i=="string"&&(n=i,i=this.length),n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!S.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(e.length===1){let u=e.charCodeAt(0);(n==="utf8"&&u<128||n==="latin1")&&(e=u)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,e||(e=0);let a;if(typeof e=="number")for(a=r;a<i;++a)this[a]=e;else{let u=S.isBuffer(e)?e:S.from(e,n),l=u.length;if(l===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<i-r;++a)this[a+r]=u[a%l]}return this};ms={};CN("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);CN("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);CN("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=mv(String(r)):typeof r=="bigint"&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=mv(n)),n+="n"),i+=` It must be ${e}. Received ${n}`,i},RangeError);aM=/[^\w+/-]/g;dM=function(){let t="0123456789abcdef",e=Array.from({length:256});for(let r=0;r<16;++r){let i=r*16;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}()});var Tv,U8,F8,z8,Q8,$8,V8,G8,Cv=Kt(()=>{o();s();uv();Av();Tv=globalThis.Buffer||S,U8=globalThis.Blob,F8=Xo("buffer.resolveObjectURL"),z8=Xo("buffer.transcode"),Q8=Xo("buffer.isUtf8"),$8=Xo("buffer.isAscii"),V8=globalThis.btoa,G8=globalThis.atob});var s=Kt(()=>{Cv();globalThis.Buffer=Tv});function PN(){throw new Error("setTimeout has not been defined")}function jN(){throw new Error("clearTimeout has not been defined")}function Rv(t){if(ei===setTimeout)return setTimeout(t,0);if((ei===PN||!ei)&&setTimeout)return ei=setTimeout,setTimeout(t,0);try{return ei(t,0)}catch{try{return ei.call(null,t,0)}catch{return ei.call(this,t,0)}}}function hM(t){if(ti===clearTimeout)return clearTimeout(t);if((ti===jN||!ti)&&clearTimeout)return ti=clearTimeout,clearTimeout(t);try{return ti(t)}catch{try{return ti.call(null,t)}catch{return ti.call(this,t)}}}function fM(){!Ns||!yn||(Ns=!1,yn.length>0?ri=[...yn,...ri]:_c=-1,ri.length>0&&Pv())}function Pv(){if(Ns)return;let t=Rv(fM);Ns=!0;let e=ri.length;for(;e;){for(yn=ri,ri=[];++_c<e;)yn&&yn[_c].run();_c=-1,e=ri.length}yn=null,Ns=!1,hM(t)}function jv(t,e){this.fun=t,this.array=e}function ii(){return De}var De,ei,ti,ri,Ns,yn,_c,wc,mM,ta,Dv,Mv=Kt(()=>{o();s();De={};(function(){try{ei=typeof setTimeout=="function"?setTimeout:PN}catch{ei=PN}try{ti=typeof clearTimeout=="function"?clearTimeout:jN}catch{ti=jN}})();ri=[],Ns=!1,_c=-1;De.nextTick=function(t){let e=Array.from({length:arguments.length-1});if(arguments.length>1)for(let r=1;r<arguments.length;r++)e[r-1]=arguments[r];ri.push(new jv(t,e)),ri.length===1&&!Ns&&Rv(Pv)};jv.prototype.run=function(){this.fun.apply(null,this.array)};De.title="unenv";wc=Object.create(null),mM=globalThis.process?.env,ta=t=>mM||globalThis.__env__||(t?wc:globalThis);De.env=new Proxy(wc,{get(t,e){return ta()[e]??wc[e]},has(t,e){let r=ta();return e in r||e in wc},set(t,e,r){let i=ta(!0);return i[e]=r,!0},deleteProperty(t,e){let r=ta(!0);delete r[e]},ownKeys(){let t=ta();return Object.keys(t)}});De.argv=[];De.version="";De.versions={};De.on=ii;De.addListener=ii;De.once=ii;De.off=ii;De.removeListener=ii;De.removeAllListeners=ii;De.emit=ii;De.prependListener=ii;De.prependOnceListener=ii;De.listeners=function(t){return[]};De.binding=function(t){throw new Error("[unenv] process.binding is not supported")};Dv="/";De.cwd=function(){return Dv};De.chdir=function(t){Dv=t};De.umask=function(){return 0}});var Wv,Lv=Kt(()=>{o();s();Mv();Wv=De});function yM(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}var gc,Bv=Kt(()=>{o();s();gc=yM()});var kv,Uv=Kt(()=>{o();s();Lv();Bv();gc.process=gc.process||Wv;kv=gc.process});var o=Kt(()=>{Uv();globalThis.process=kv});var FI=d((__e,UI)=>{"use strict";o();s();function KM(t,e){var r=t;e.slice(0,-1).forEach(function(n){r=r[n]||{}});var i=e[e.length-1];return i in r}function BI(t){return typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}function kI(t,e){return e==="constructor"&&typeof t[e]=="function"||e==="__proto__"}UI.exports=function(t,e){e||(e={});var r={bools:{},strings:{},unknownFn:null};typeof e.unknown=="function"&&(r.unknownFn=e.unknown),typeof e.boolean=="boolean"&&e.boolean?r.allBools=!0:[].concat(e.boolean).filter(Boolean).forEach(function(U){r.bools[U]=!0});var i={};function n(U){return i[U].some(function(X){return r.bools[X]})}Object.keys(e.alias||{}).forEach(function(U){i[U]=[].concat(e.alias[U]),i[U].forEach(function(X){i[X]=[U].concat(i[U].filter(function(Ve){return X!==Ve}))})}),[].concat(e.string).filter(Boolean).forEach(function(U){r.strings[U]=!0,i[U]&&[].concat(i[U]).forEach(function(X){r.strings[X]=!0})});var a=e.default||{},u={_:[]};function l(U,X){return r.allBools&&/^--[^=]+$/.test(X)||r.strings[U]||r.bools[U]||i[U]}function h(U,X,Ve){for(var J=U,F=0;F<X.length-1;F++){var Y=X[F];if(kI(J,Y))return;J[Y]===void 0&&(J[Y]={}),(J[Y]===Object.prototype||J[Y]===Number.prototype||J[Y]===String.prototype)&&(J[Y]={}),J[Y]===Array.prototype&&(J[Y]=[]),J=J[Y]}var oe=X[X.length-1];kI(J,oe)||((J===Object.prototype||J===Number.prototype||J===String.prototype)&&(J={}),J===Array.prototype&&(J=[]),J[oe]===void 0||r.bools[oe]||typeof J[oe]=="boolean"?J[oe]=Ve:Array.isArray(J[oe])?J[oe].push(Ve):J[oe]=[J[oe],Ve])}function y(U,X,Ve){if(!(Ve&&r.unknownFn&&!l(U,Ve)&&r.unknownFn(Ve)===!1)){var J=!r.strings[U]&&BI(X)?Number(X):X;h(u,U.split("."),J),(i[U]||[]).forEach(function(F){h(u,F.split("."),J)})}}Object.keys(r.bools).forEach(function(U){y(U,a[U]===void 0?!1:a[U])});var _=[];t.indexOf("--")!==-1&&(_=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var b=0;b<t.length;b++){var w=t[b],E,v;if(/^--.+=/.test(w)){var A=w.match(/^--([^=]+)=([\s\S]*)$/);E=A[1];var V=A[2];r.bools[E]&&(V=V!=="false"),y(E,V,w)}else if(/^--no-.+/.test(w))E=w.match(/^--no-(.+)/)[1],y(E,!1,w);else if(/^--.+/.test(w))E=w.match(/^--(.+)/)[1],v=t[b+1],v!==void 0&&!/^(-|--)[^-]/.test(v)&&!r.bools[E]&&!r.allBools&&(!i[E]||!n(E))?(y(E,v,w),b+=1):/^(true|false)$/.test(v)?(y(E,v==="true",w),b+=1):y(E,r.strings[E]?"":!0,w);else if(/^-[^-]+/.test(w)){for(var z=w.slice(1,-1).split(""),he=!1,Z=0;Z<z.length;Z++){if(v=w.slice(Z+2),v==="-"){y(z[Z],v,w);continue}if(/[A-Za-z]/.test(z[Z])&&v[0]==="="){y(z[Z],v.slice(1),w),he=!0;break}if(/[A-Za-z]/.test(z[Z])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(v)){y(z[Z],v,w),he=!0;break}if(z[Z+1]&&z[Z+1].match(/\W/)){y(z[Z],w.slice(Z+2),w),he=!0;break}else y(z[Z],r.strings[z[Z]]?"":!0,w)}E=w.slice(-1)[0],!he&&E!=="-"&&(t[b+1]&&!/^(-|--)[^-]/.test(t[b+1])&&!r.bools[E]&&(!i[E]||!n(E))?(y(E,t[b+1],w),b+=1):t[b+1]&&/^(true|false)$/.test(t[b+1])?(y(E,t[b+1]==="true",w),b+=1):y(E,r.strings[E]?"":!0,w))}else if((!r.unknownFn||r.unknownFn(w)!==!1)&&u._.push(r.strings._||!BI(w)?w:Number(w)),e.stopEarly){u._.push.apply(u._,t.slice(b+1));break}}return Object.keys(a).forEach(function(U){KM(u,U.split("."))||(h(u,U.split("."),a[U]),(i[U]||[]).forEach(function(X){h(u,X.split("."),a[U])}))}),e["--"]?u["--"]=_.slice():_.forEach(function(U){u._.push(U)}),u}});var __=d((QI,$I)=>{"use strict";o();s();Object.defineProperty(QI,"__esModule",{value:!0});var zI=function(){};function Da(t,e={}){zI.prototype.name=t;let r={};return new Proxy(zI,{get(i,n){return n==="caller"?null:n==="__createMock__"?Da:n==="__unenv__"?!0:n in e?e[n]:r[n]=r[n]||Da(`${t}.${n.toString()}`)},apply(i,n,a){return Da(`${t}()`)},construct(i,n,a){return Da(`[${t}]`)},enumerate(){return[]}})}$I.exports=Da("mock")});var VI=d(rt=>{"use strict";o();s();Object.defineProperty(rt,"__esModule",{value:!0});rt.WriteStream=rt.StatsFs=rt.Stats=rt.ReadStream=rt.FileWriteStream=rt.FileReadStream=rt.Dirent=rt.Dir=void 0;var Li=YM(__());function YM(t){return t&&t.__esModule?t:{default:t}}var E_e=rt.Dir=Li.default.__createMock__("fs.Dir"),S_e=rt.Dirent=Li.default.__createMock__("fs.Dirent"),v_e=rt.Stats=Li.default.__createMock__("fs.Stats"),I_e=rt.ReadStream=Li.default.__createMock__("fs.ReadStream"),q_e=rt.WriteStream=Li.default.__createMock__("fs.WriteStream"),x_e=rt.FileReadStream=Li.default.__createMock__("fs.FileReadStream"),A_e=rt.FileWriteStream=Li.default.__createMock__("fs.FileWriteStream"),T_e=rt.StatsFs=Li.default.__createMock__("fs.StatsFs")});var w_=d(tr=>{"use strict";o();s();Object.defineProperty(tr,"__esModule",{value:!0});tr.constants=tr.X_OK=tr.W_OK=tr.R_OK=tr.F_OK=void 0;var j_e=tr.F_OK=0,D_e=tr.R_OK=4,M_e=tr.W_OK=2,W_e=tr.X_OK=1,L_e=tr.constants=Object.create({UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,UV_FS_O_FILEMAP:0,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DSYNC:4096,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4})});var In=d(vn=>{"use strict";o();s();Object.defineProperty(vn,"__esModule",{value:!0});vn.createNotImplementedError=GI;vn.mergeFns=ZM;vn.notImplemented=eW;vn.notImplementedClass=tW;vn.rawHeaders=XM;function XM(t){let e=[];for(let r in t)if(Array.isArray(t[r]))for(let i of t[r])e.push(r,i);else e.push(r,t[r]);return e}function ZM(...t){return function(...e){for(let r of t)r(...e)}}function GI(t){throw new Error(`[unenv] ${t} is not implemented yet!`)}function eW(t){return Object.assign(()=>{throw GI(t)},{__unenv__:!0})}function tW(t){return class{__unenv__=!0;constructor(){throw new Error(`[unenv] ${t} is not implemented yet!`)}}}});var g_=d((W,JI)=>{"use strict";o();s();Object.defineProperty(W,"__esModule",{value:!0});W.chown=W.chmod=W.appendFile=W.access=void 0;Object.defineProperty(W,"constants",{enumerable:!0,get:function(){return rW.constants}});W.writeFile=W.watch=W.utimes=W.unlink=W.truncate=W.symlink=W.statfs=W.stat=W.rmdir=W.rm=W.rename=W.realpath=W.readlink=W.readdir=W.readFile=W.opendir=W.open=W.mkdtemp=W.mkdir=W.lutimes=W.lstat=W.link=W.lchown=W.lchmod=W.default=W.cp=W.copyFile=void 0;var me=In(),rW=w_(),V_e=W.access=(0,me.notImplemented)("fs.access"),G_e=W.copyFile=(0,me.notImplemented)("fs.copyFile"),J_e=W.cp=(0,me.notImplemented)("fs.cp"),H_e=W.open=(0,me.notImplemented)("fs.open"),K_e=W.opendir=(0,me.notImplemented)("fs.opendir"),Y_e=W.rename=(0,me.notImplemented)("fs.rename"),X_e=W.truncate=(0,me.notImplemented)("fs.truncate"),Z_e=W.rm=(0,me.notImplemented)("fs.rm"),ewe=W.rmdir=(0,me.notImplemented)("fs.rmdir"),twe=W.mkdir=(0,me.notImplemented)("fs.mkdir"),rwe=W.readdir=(0,me.notImplemented)("fs.readdir"),iwe=W.readlink=(0,me.notImplemented)("fs.readlink"),nwe=W.symlink=(0,me.notImplemented)("fs.symlink"),swe=W.lstat=(0,me.notImplemented)("fs.lstat"),owe=W.stat=(0,me.notImplemented)("fs.stat"),awe=W.link=(0,me.notImplemented)("fs.link"),uwe=W.unlink=(0,me.notImplemented)("fs.unlink"),cwe=W.chmod=(0,me.notImplemented)("fs.chmod"),lwe=W.lchmod=(0,me.notImplemented)("fs.lchmod"),dwe=W.lchown=(0,me.notImplemented)("fs.lchown"),pwe=W.chown=(0,me.notImplemented)("fs.chown"),hwe=W.utimes=(0,me.notImplemented)("fs.utimes"),fwe=W.lutimes=(0,me.notImplemented)("fs.lutimes"),mwe=W.realpath=(0,me.notImplemented)("fs.realpath"),ywe=W.mkdtemp=(0,me.notImplemented)("fs.mkdtemp"),Nwe=W.writeFile=(0,me.notImplemented)("fs.writeFile"),_we=W.appendFile=(0,me.notImplemented)("fs.appendFile"),wwe=W.readFile=(0,me.notImplemented)("fs.readFile"),gwe=W.watch=(0,me.notImplemented)("fs.watch"),bwe=W.statfs=(0,me.notImplemented)("fs.statfs");JI.exports={}});var KI=d(N=>{"use strict";o();s();Object.defineProperty(N,"__esModule",{value:!0});N.writevSync=N.writev=N.writeSync=N.writeFileSync=N.writeFile=N.write=N.watchFile=N.watch=N.utimesSync=N.utimes=N.unwatchFile=N.unlinkSync=N.unlink=N.truncateSync=N.truncate=N.symlinkSync=N.symlink=N.statfsSync=N.statfs=N.statSync=N.stat=N.rmdirSync=N.rmdir=N.rmSync=N.rm=N.renameSync=N.rename=N.realpathSync=N.realpath=N.readvSync=N.readv=N.readlinkSync=N.readlink=N.readdirSync=N.readdir=N.readSync=N.readFileSync=N.readFile=N.read=N.opendirSync=N.opendir=N.openSync=N.openAsBlob=N.open=N.mkdtempSync=N.mkdtemp=N.mkdirSync=N.mkdir=N.lutimesSync=N.lutimes=N.lstatSync=N.lstat=N.linkSync=N.link=N.lchownSync=N.lchown=N.lchmodSync=N.lchmod=N.futimesSync=N.futimes=N.ftruncateSync=N.ftruncate=N.fsyncSync=N.fsync=N.fstatSync=N.fstat=N.fdatasyncSync=N.fdatasync=N.fchownSync=N.fchown=N.fchmodSync=N.fchmod=N.existsSync=N.exists=N.createWriteStream=N.createReadStream=N.cpSync=N.cp=N.copyFileSync=N.copyFile=N.closeSync=N.close=N.chownSync=N.chown=N.chmodSync=N.chmod=N.appendFileSync=N.appendFile=N.accessSync=N.access=N._toUnixTimestamp=void 0;var ee=In(),_e=iW(g_());function HI(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(HI=function(i){return i?r:e})(t)}function iW(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=HI(e);if(r&&r.has(t))return r.get(t);var i={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&{}.hasOwnProperty.call(t,a)){var u=n?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=t[a]}return i.default=t,r&&r.set(t,i),i}function We(t){let e=(0,ee.notImplemented)(t);return e.__promisify__=()=>(0,ee.notImplemented)(t+".__promisify__"),e.native=e,e}function we(t){let e=function(...r){let i=r.pop();t().catch(n=>i(n)).then(n=>i(void 0,n))};return e.__promisify__=t,e.native=e,e}var Swe=N.access=we(_e.access),vwe=N.appendFile=we(_e.appendFile),Iwe=N.chown=we(_e.chown),qwe=N.chmod=we(_e.chmod),xwe=N.copyFile=we(_e.copyFile),Awe=N.cp=we(_e.cp),Twe=N.lchown=we(_e.lchown),Cwe=N.lchmod=we(_e.lchmod),Rwe=N.link=we(_e.link),Pwe=N.lstat=we(_e.lstat),jwe=N.lutimes=we(_e.lutimes),Dwe=N.mkdir=we(_e.mkdir),Mwe=N.mkdtemp=we(_e.mkdtemp),Wwe=N.realpath=we(_e.realpath),Lwe=N.open=we(_e.open),Bwe=N.opendir=we(_e.opendir),kwe=N.readdir=we(_e.readdir),Uwe=N.readFile=we(_e.readFile),Fwe=N.readlink=we(_e.readlink),zwe=N.rename=we(_e.rename),Qwe=N.rm=we(_e.rm),$we=N.rmdir=we(_e.rmdir),Vwe=N.stat=we(_e.stat),Gwe=N.symlink=we(_e.symlink),Jwe=N.truncate=we(_e.truncate),Hwe=N.unlink=we(_e.unlink),Kwe=N.utimes=we(_e.utimes),Ywe=N.writeFile=we(_e.writeFile),Xwe=N.statfs=we(_e.statfs),Zwe=N.close=We("fs.close"),ege=N.createReadStream=We("fs.createReadStream"),tge=N.createWriteStream=We("fs.createWriteStream"),rge=N.exists=We("fs.exists"),ige=N.fchown=We("fs.fchown"),nge=N.fchmod=We("fs.fchmod"),sge=N.fdatasync=We("fs.fdatasync"),oge=N.fstat=We("fs.fstat"),age=N.fsync=We("fs.fsync"),uge=N.ftruncate=We("fs.ftruncate"),cge=N.futimes=We("fs.futimes"),lge=N.lstatSync=We("fs.lstatSync"),dge=N.read=We("fs.read"),pge=N.readv=We("fs.readv"),hge=N.realpathSync=We("fs.realpathSync"),fge=N.statSync=We("fs.statSync"),mge=N.unwatchFile=We("fs.unwatchFile"),yge=N.watch=We("fs.watch"),Nge=N.watchFile=We("fs.watchFile"),_ge=N.write=We("fs.write"),wge=N.writev=We("fs.writev"),gge=N._toUnixTimestamp=We("fs._toUnixTimestamp"),bge=N.openAsBlob=We("fs.openAsBlob"),Oge=N.appendFileSync=(0,ee.notImplemented)("fs.appendFileSync"),Ege=N.accessSync=(0,ee.notImplemented)("fs.accessSync"),Sge=N.chownSync=(0,ee.notImplemented)("fs.chownSync"),vge=N.chmodSync=(0,ee.notImplemented)("fs.chmodSync"),Ige=N.closeSync=(0,ee.notImplemented)("fs.closeSync"),qge=N.copyFileSync=(0,ee.notImplemented)("fs.copyFileSync"),xge=N.cpSync=(0,ee.notImplemented)("fs.cpSync"),nW=()=>!1;N.existsSync=nW;var Age=N.fchownSync=(0,ee.notImplemented)("fs.fchownSync"),Tge=N.fchmodSync=(0,ee.notImplemented)("fs.fchmodSync"),Cge=N.fdatasyncSync=(0,ee.notImplemented)("fs.fdatasyncSync"),Rge=N.fstatSync=(0,ee.notImplemented)("fs.fstatSync"),Pge=N.fsyncSync=(0,ee.notImplemented)("fs.fsyncSync"),jge=N.ftruncateSync=(0,ee.notImplemented)("fs.ftruncateSync"),Dge=N.futimesSync=(0,ee.notImplemented)("fs.futimesSync"),Mge=N.lchownSync=(0,ee.notImplemented)("fs.lchownSync"),Wge=N.lchmodSync=(0,ee.notImplemented)("fs.lchmodSync"),Lge=N.linkSync=(0,ee.notImplemented)("fs.linkSync"),Bge=N.lutimesSync=(0,ee.notImplemented)("fs.lutimesSync"),kge=N.mkdirSync=(0,ee.notImplemented)("fs.mkdirSync"),Uge=N.mkdtempSync=(0,ee.notImplemented)("fs.mkdtempSync"),Fge=N.openSync=(0,ee.notImplemented)("fs.openSync"),zge=N.opendirSync=(0,ee.notImplemented)("fs.opendirSync"),Qge=N.readdirSync=(0,ee.notImplemented)("fs.readdirSync"),$ge=N.readSync=(0,ee.notImplemented)("fs.readSync"),Vge=N.readvSync=(0,ee.notImplemented)("fs.readvSync"),Gge=N.readFileSync=(0,ee.notImplemented)("fs.readFileSync"),Jge=N.readlinkSync=(0,ee.notImplemented)("fs.readlinkSync"),Hge=N.renameSync=(0,ee.notImplemented)("fs.renameSync"),Kge=N.rmSync=(0,ee.notImplemented)("fs.rmSync"),Yge=N.rmdirSync=(0,ee.notImplemented)("fs.rmdirSync"),Xge=N.symlinkSync=(0,ee.notImplemented)("fs.symlinkSync"),Zge=N.truncateSync=(0,ee.notImplemented)("fs.truncateSync"),ebe=N.unlinkSync=(0,ee.notImplemented)("fs.unlinkSync"),tbe=N.utimesSync=(0,ee.notImplemented)("fs.utimesSync"),rbe=N.writeFileSync=(0,ee.notImplemented)("fs.writeFileSync"),ibe=N.writeSync=(0,ee.notImplemented)("fs.writeSync"),nbe=N.writevSync=(0,ee.notImplemented)("fs.writevSync"),sbe=N.statfsSync=(0,ee.notImplemented)("fs.statfsSync")});var O_=d((Rt,XI)=>{"use strict";o();s();Object.defineProperty(Rt,"__esModule",{value:!0});var b_={promises:!0};Rt.promises=Rt.default=void 0;var ml=_l(VI());Object.keys(ml).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(b_,t)||t in Rt&&Rt[t]===ml[t]||Object.defineProperty(Rt,t,{enumerable:!0,get:function(){return ml[t]}})});var yl=_l(w_());Object.keys(yl).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(b_,t)||t in Rt&&Rt[t]===yl[t]||Object.defineProperty(Rt,t,{enumerable:!0,get:function(){return yl[t]}})});var Nl=_l(KI());Object.keys(Nl).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(b_,t)||t in Rt&&Rt[t]===Nl[t]||Object.defineProperty(Rt,t,{enumerable:!0,get:function(){return Nl[t]}})});var sW=_l(g_());function YI(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(YI=function(i){return i?r:e})(t)}function _l(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=YI(e);if(r&&r.has(t))return r.get(t);var i={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&{}.hasOwnProperty.call(t,a)){var u=n?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=t[a]}return i.default=t,r&&r.set(t,i),i}var oW=Rt.promises=sW;XI.exports={...ml,...yl,...Nl,promises:oW}});var uq=d(ct=>{"use strict";o();s();var aW=/^[A-Za-z]:\//;function ci(t=""){return t&&t.replace(/\\/g,"/").replace(aW,e=>e.toUpperCase())}var uW=/^[/\\]{2}/,cW=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,eq=/^[A-Za-z]:$/,ZI=/^\/([A-Za-z]:)?$/,tq="/",rq=":",E_=function(t){if(t.length===0)return".";t=ci(t);let e=t.match(uW),r=qn(t),i=t[t.length-1]==="/";return t=wl(t,!r),t.length===0?r?"/":i?"./":".":(i&&(t+="/"),eq.test(t)&&(t+="/"),e?r?`//${t}`:`//./${t}`:r&&!qn(t)?`/${t}`:t)},iq=function(...t){if(t.length===0)return".";let e;for(let r of t)r&&r.length>0&&(e===void 0?e=r:e+=`/${r}`);return e===void 0?".":E_(e.replace(/\/\/+/g,"/"))};function lW(){return typeof process<"u"&&typeof process.cwd=="function"?process.cwd().replace(/\\/g,"/"):"/"}var Ma=function(...t){t=t.map(i=>ci(i));let e="",r=!1;for(let i=t.length-1;i>=-1&&!r;i--){let n=i>=0?t[i]:lW();!n||n.length===0||(e=`${n}/${e}`,r=qn(n))}return e=wl(e,!r),r&&!qn(e)?`/${e}`:e.length>0?e:"."};function wl(t,e){let r="",i=0,n=-1,a=0,u=null;for(let l=0;l<=t.length;++l){if(l<t.length)u=t[l];else{if(u==="/")break;u="/"}if(u==="/"){if(!(n===l-1||a===1))if(a===2){if(r.length<2||i!==2||r[r.length-1]!=="."||r[r.length-2]!=="."){if(r.length>2){let h=r.lastIndexOf("/");h===-1?(r="",i=0):(r=r.slice(0,h),i=r.length-1-r.lastIndexOf("/")),n=l,a=0;continue}else if(r.length>0){r="",i=0,n=l,a=0;continue}}e&&(r+=r.length>0?"/..":"..",i=2)}else r.length>0?r+=`/${t.slice(n+1,l)}`:r=t.slice(n+1,l),i=l-n-1;n=l,a=0}else u==="."&&a!==-1?++a:a=-1}return r}var qn=function(t){return cW.test(t)},nq=function(t){return ci(t)},dW=/.(\.[^./]+)$/,S_=function(t){let e=dW.exec(ci(t));return e&&e[1]||""},sq=function(t,e){let r=Ma(t).replace(ZI,"$1").split("/"),i=Ma(e).replace(ZI,"$1").split("/");if(i[0][1]===":"&&r[0][1]===":"&&r[0]!==i[0])return i.join("/");let n=[...r];for(let a of n){if(i[0]!==a)break;r.shift(),i.shift()}return[...r.map(()=>".."),...i].join("/")},v_=function(t){let e=ci(t).replace(/\/$/,"").split("/").slice(0,-1);return e.length===1&&eq.test(e[0])&&(e[0]+="/"),e.join("/")||(qn(t)?"/":".")},oq=function(t){let e=[t.root,t.dir,t.base??t.name+t.ext].filter(Boolean);return ci(t.root?Ma(...e):e.join("/"))},I_=function(t,e){let r=ci(t).split("/").pop();return e&&r.endsWith(e)?r.slice(0,-e.length):r},aq=function(t){let e=ci(t).split("/").shift()||"/",r=I_(t),i=S_(r);return{root:e,dir:v_(t),base:r,ext:i,name:r.slice(0,r.length-i.length)}},pW={__proto__:null,basename:I_,delimiter:rq,dirname:v_,extname:S_,format:oq,isAbsolute:qn,join:iq,normalize:E_,normalizeString:wl,parse:aq,relative:sq,resolve:Ma,sep:tq,toNamespacedPath:nq};ct.basename=I_;ct.delimiter=rq;ct.dirname=v_;ct.extname=S_;ct.format=oq;ct.isAbsolute=qn;ct.join=iq;ct.normalize=E_;ct.normalizeString=wl;ct.normalizeWindowsPath=ci;ct.parse=aq;ct.path=pW;ct.relative=sq;ct.resolve=Ma;ct.sep=tq;ct.toNamespacedPath=nq});var cq=d(lt=>{"use strict";o();s();Object.defineProperty(lt,"__esModule",{value:!0});var Et=uq();lt.basename=Et.basename;lt.default=Et.path;lt.delimiter=Et.delimiter;lt.dirname=Et.dirname;lt.extname=Et.extname;lt.format=Et.format;lt.isAbsolute=Et.isAbsolute;lt.join=Et.join;lt.normalize=Et.normalize;lt.normalizeString=Et.normalizeString;lt.parse=Et.parse;lt.relative=Et.relative;lt.resolve=Et.resolve;lt.sep=Et.sep;lt.toNamespacedPath=Et.toNamespacedPath});var An=d((rr,dq)=>{"use strict";o();s();Object.defineProperty(rr,"__esModule",{value:!0});var hW={posix:!0,win32:!0,platform:!0};rr.win32=rr.posix=rr.platform=rr.default=void 0;var gl=fW(cq());Object.keys(gl).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(hW,t)||t in rr&&rr[t]===gl[t]||Object.defineProperty(rr,t,{enumerable:!0,get:function(){return gl[t]}})});function lq(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(lq=function(i){return i?r:e})(t)}function fW(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=lq(e);if(r&&r.has(t))return r.get(t);var i={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&{}.hasOwnProperty.call(t,a)){var u=n?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=t[a]}return i.default=t,r&&r.set(t,i),i}var xn={...gl,platform:"posix",posix:void 0,win32:void 0};xn.posix=xn;xn.win32=xn;var Nbe=rr.posix=xn,_be=rr.win32=xn,wbe=rr.platform="posix";dq.exports=xn});var pq=d((p,q_)=>{"use strict";o();s();Object.defineProperty(p,"__esModule",{value:!0});p.SIGINFO=p.SIGILL=p.SIGHUP=p.SIGFPE=p.SIGCONT=p.SIGCHLD=p.SIGBUS=p.SIGBREAK=p.SIGALRM=p.SIGABRT=p.RTLD_NOW=p.RTLD_LOCAL=p.RTLD_LAZY=p.RTLD_GLOBAL=p.RTLD_DEEPBIND=p.PRIORITY_NORMAL=p.PRIORITY_LOW=p.PRIORITY_HIGHEST=p.PRIORITY_HIGH=p.PRIORITY_BELOW_NORMAL=p.PRIORITY_ABOVE_NORMAL=p.EXDEV=p.EWOULDBLOCK=p.ETXTBSY=p.ETIMEDOUT=p.ETIME=p.ESTALE=p.ESRCH=p.ESPIPE=p.EROFS=p.ERANGE=p.EPROTOTYPE=p.EPROTONOSUPPORT=p.EPROTO=p.EPIPE=p.EPERM=p.EOVERFLOW=p.EOPNOTSUPP=p.ENXIO=p.ENOTTY=p.ENOTSUP=p.ENOTSOCK=p.ENOTEMPTY=p.ENOTDIR=p.ENOTCONN=p.ENOSYS=p.ENOSTR=p.ENOSR=p.ENOSPC=p.ENOPROTOOPT=p.ENOMSG=p.ENOMEM=p.ENOLINK=p.ENOLCK=p.ENOEXEC=p.ENOENT=p.ENODEV=p.ENODATA=p.ENOBUFS=p.ENFILE=p.ENETUNREACH=p.ENETRESET=p.ENETDOWN=p.ENAMETOOLONG=p.EMULTIHOP=p.EMSGSIZE=p.EMLINK=p.EMFILE=p.ELOOP=p.EISDIR=p.EISCONN=p.EIO=p.EINVAL=p.EINTR=p.EINPROGRESS=p.EILSEQ=p.EIDRM=p.EHOSTUNREACH=p.EFBIG=p.EFAULT=p.EEXIST=p.EDQUOT=p.EDOM=p.EDESTADDRREQ=p.EDEADLK=p.ECONNRESET=p.ECONNREFUSED=p.ECONNABORTED=p.ECHILD=p.ECANCELED=p.EBUSY=p.EBADMSG=p.EBADF=p.EALREADY=p.EAGAIN=p.EAFNOSUPPORT=p.EADDRNOTAVAIL=p.EADDRINUSE=p.EACCES=p.E2BIG=void 0;q_.exports=p.WSA_E_NO_MORE=p.WSA_E_CANCELLED=p.WSAVERNOTSUPPORTED=p.WSATYPE_NOT_FOUND=p.WSASYSNOTREADY=p.WSASYSCALLFAILURE=p.WSASERVICE_NOT_FOUND=p.WSANOTINITIALISED=p.WSAEWOULDBLOCK=p.WSAEUSERS=p.WSAETOOMANYREFS=p.WSAETIMEDOUT=p.WSAESTALE=p.WSAESOCKTNOSUPPORT=p.WSAESHUTDOWN=p.WSAEREMOTE=p.WSAEREFUSED=p.WSAEPROVIDERFAILEDINIT=p.WSAEPROTOTYPE=p.WSAEPROTONOSUPPORT=p.WSAEPROCLIM=p.WSAEPFNOSUPPORT=p.WSAEOPNOTSUPP=p.WSAENOTSOCK=p.WSAENOTEMPTY=p.WSAENOTCONN=p.WSAENOPROTOOPT=p.WSAENOMORE=p.WSAENOBUFS=p.WSAENETUNREACH=p.WSAENETRESET=p.WSAENETDOWN=p.WSAENAMETOOLONG=p.WSAEMSGSIZE=p.WSAEMFILE=p.WSAELOOP=p.WSAEISCONN=p.WSAEINVALIDPROVIDER=p.WSAEINVALIDPROCTABLE=p.WSAEINVAL=p.WSAEINTR=p.WSAEINPROGRESS=p.WSAEHOSTUNREACH=p.WSAEHOSTDOWN=p.WSAEFAULT=p.WSAEDQUOT=p.WSAEDISCON=p.WSAEDESTADDRREQ=p.WSAECONNRESET=p.WSAECONNREFUSED=p.WSAECONNABORTED=p.WSAECANCELLED=p.WSAEBADF=p.WSAEALREADY=p.WSAEAFNOSUPPORT=p.WSAEADDRNOTAVAIL=p.WSAEADDRINUSE=p.WSAEACCES=p.UV_UDP_REUSEADDR=p.SIGXFSZ=p.SIGXCPU=p.SIGWINCH=p.SIGVTALRM=p.SIGUSR2=p.SIGUSR1=p.SIGURG=p.SIGUNUSED=p.SIGTTOU=p.SIGTTIN=p.SIGTSTP=p.SIGTRAP=p.SIGTERM=p.SIGSYS=p.SIGSTOP=p.SIGSTKFLT=p.SIGSEGV=p.SIGQUIT=p.SIGPWR=p.SIGPROF=p.SIGPOLL=p.SIGPIPE=p.SIGLOST=p.SIGKILL=p.SIGIOT=p.SIGIO=p.SIGINT=void 0;var mW=p.UV_UDP_REUSEADDR=4,yW=p.RTLD_LAZY=1,NW=p.RTLD_NOW=2,_W=p.RTLD_GLOBAL=8,wW=p.RTLD_LOCAL=4,gW=p.RTLD_DEEPBIND=16,bW=p.E2BIG=7,OW=p.EACCES=13,EW=p.EADDRINUSE=48,SW=p.EADDRNOTAVAIL=49,vW=p.EAFNOSUPPORT=47,IW=p.EAGAIN=35,qW=p.EALREADY=37,xW=p.EBADF=9,AW=p.EBADMSG=94,TW=p.EBUSY=16,CW=p.ECANCELED=89,RW=p.ECHILD=10,PW=p.ECONNABORTED=53,jW=p.ECONNREFUSED=61,DW=p.ECONNRESET=54,MW=p.EDEADLK=11,WW=p.EDESTADDRREQ=39,LW=p.EDOM=33,BW=p.EDQUOT=69,kW=p.EEXIST=17,UW=p.EFAULT=14,FW=p.EFBIG=27,zW=p.EHOSTUNREACH=65,QW=p.EIDRM=90,$W=p.EILSEQ=92,VW=p.EINPROGRESS=36,GW=p.EINTR=4,JW=p.EINVAL=22,HW=p.EIO=5,KW=p.EISCONN=56,YW=p.EISDIR=21,XW=p.ELOOP=62,ZW=p.EMFILE=24,eL=p.EMLINK=31,tL=p.EMSGSIZE=40,rL=p.EMULTIHOP=95,iL=p.ENAMETOOLONG=63,nL=p.ENETDOWN=50,sL=p.ENETRESET=52,oL=p.ENETUNREACH=51,aL=p.ENFILE=23,uL=p.ENOBUFS=55,cL=p.ENODATA=96,lL=p.ENODEV=19,dL=p.ENOENT=2,pL=p.ENOEXEC=8,hL=p.ENOLCK=77,fL=p.ENOLINK=97,mL=p.ENOMEM=12,yL=p.ENOMSG=91,NL=p.ENOPROTOOPT=42,_L=p.ENOSPC=28,wL=p.ENOSR=98,gL=p.ENOSTR=99,bL=p.ENOSYS=78,OL=p.ENOTCONN=57,EL=p.ENOTDIR=20,SL=p.ENOTEMPTY=66,vL=p.ENOTSOCK=38,IL=p.ENOTSUP=45,qL=p.ENOTTY=25,xL=p.ENXIO=6,AL=p.EOPNOTSUPP=102,TL=p.EOVERFLOW=84,CL=p.EPERM=1,RL=p.EPIPE=32,PL=p.EPROTO=100,jL=p.EPROTONOSUPPORT=43,DL=p.EPROTOTYPE=41,ML=p.ERANGE=34,WL=p.EROFS=30,LL=p.ESPIPE=29,BL=p.ESRCH=3,kL=p.ESTALE=70,UL=p.ETIME=101,FL=p.ETIMEDOUT=60,zL=p.ETXTBSY=26,QL=p.EWOULDBLOCK=35,$L=p.EXDEV=18,VL=p.WSAEINTR=10004,GL=p.WSAEBADF=10009,JL=p.WSAEACCES=10013,HL=p.WSAEFAULT=10014,KL=p.WSAEINVAL=10022,YL=p.WSAEMFILE=10024,XL=p.WSAEWOULDBLOCK=10035,ZL=p.WSAEINPROGRESS=10036,eB=p.WSAEALREADY=10037,tB=p.WSAENOTSOCK=10038,rB=p.WSAEDESTADDRREQ=10039,iB=p.WSAEMSGSIZE=10040,nB=p.WSAEPROTOTYPE=10041,sB=p.WSAENOPROTOOPT=10042,oB=p.WSAEPROTONOSUPPORT=10043,aB=p.WSAESOCKTNOSUPPORT=10044,uB=p.WSAEOPNOTSUPP=10045,cB=p.WSAEPFNOSUPPORT=10046,lB=p.WSAEAFNOSUPPORT=10047,dB=p.WSAEADDRINUSE=10048,pB=p.WSAEADDRNOTAVAIL=10049,hB=p.WSAENETDOWN=10050,fB=p.WSAENETUNREACH=10051,mB=p.WSAENETRESET=10052,yB=p.WSAECONNABORTED=10053,NB=p.WSAECONNRESET=10054,_B=p.WSAENOBUFS=10055,wB=p.WSAEISCONN=10056,gB=p.WSAENOTCONN=10057,bB=p.WSAESHUTDOWN=10058,OB=p.WSAETOOMANYREFS=10059,EB=p.WSAETIMEDOUT=10060,SB=p.WSAECONNREFUSED=10061,vB=p.WSAELOOP=10062,IB=p.WSAENAMETOOLONG=10063,qB=p.WSAEHOSTDOWN=10064,xB=p.WSAEHOSTUNREACH=10065,AB=p.WSAENOTEMPTY=10066,TB=p.WSAEPROCLIM=10067,CB=p.WSAEUSERS=10068,RB=p.WSAEDQUOT=10069,PB=p.WSAESTALE=10070,jB=p.WSAEREMOTE=10071,DB=p.WSASYSNOTREADY=10091,MB=p.WSAVERNOTSUPPORTED=10092,WB=p.WSANOTINITIALISED=10093,LB=p.WSAEDISCON=10101,BB=p.WSAENOMORE=10102,kB=p.WSAECANCELLED=10103,UB=p.WSAEINVALIDPROCTABLE=10104,FB=p.WSAEINVALIDPROVIDER=10105,zB=p.WSAEPROVIDERFAILEDINIT=10106,QB=p.WSASYSCALLFAILURE=10107,$B=p.WSASERVICE_NOT_FOUND=10108,VB=p.WSATYPE_NOT_FOUND=100109,GB=p.WSA_E_NO_MORE=10110,JB=p.WSA_E_CANCELLED=10111,HB=p.WSAEREFUSED=10112,KB=p.SIGHUP=1,YB=p.SIGINT=2,XB=p.SIGQUIT=3,ZB=p.SIGILL=4,ek=p.SIGTRAP=5,tk=p.SIGABRT=6,rk=p.SIGIOT=6,ik=p.SIGBUS=10,nk=p.SIGFPE=8,sk=p.SIGKILL=9,ok=p.SIGUSR1=30,ak=p.SIGSEGV=11,uk=p.SIGUSR2=31,ck=p.SIGPIPE=13,lk=p.SIGALRM=14,dk=p.SIGTERM=15,pk=p.SIGCHLD=20,hk=p.SIGCONT=19,fk=p.SIGSTOP=17,mk=p.SIGTSTP=18,yk=p.SIGTTIN=21,Nk=p.SIGTTOU=22,_k=p.SIGURG=16,wk=p.SIGXCPU=24,gk=p.SIGXFSZ=25,bk=p.SIGVTALRM=26,Ok=p.SIGPROF=27,Ek=p.SIGWINCH=28,Sk=p.SIGIO=23,vk=p.SIGINFO=29,Ik=p.SIGSYS=12,qk=p.SIGPOLL=34,xk=p.SIGPWR=29,Ak=p.SIGBREAK=21,Tk=p.SIGSTKFLT=16,Ck=p.SIGUNUSED=31,Rk=p.SIGLOST=29,Pk=p.PRIORITY_LOW=19,jk=p.PRIORITY_BELOW_NORMAL=10,Dk=p.PRIORITY_NORMAL=0,Mk=p.PRIORITY_ABOVE_NORMAL=-7,Wk=p.PRIORITY_HIGH=-14,Lk=p.PRIORITY_HIGHEST=-20;q_.exports={UV_UDP_REUSEADDR:mW,dlopen:{RTLD_LAZY:yW,RTLD_NOW:NW,RTLD_GLOBAL:_W,RTLD_LOCAL:wW,RTLD_DEEPBIND:gW},errno:{E2BIG:bW,EACCES:OW,EADDRINUSE:EW,EADDRNOTAVAIL:SW,EAFNOSUPPORT:vW,EAGAIN:IW,EALREADY:qW,EBADF:xW,EBADMSG:AW,EBUSY:TW,ECANCELED:CW,ECHILD:RW,ECONNABORTED:PW,ECONNREFUSED:jW,ECONNRESET:DW,EDEADLK:MW,EDESTADDRREQ:WW,EDOM:LW,EDQUOT:BW,EEXIST:kW,EFAULT:UW,EFBIG:FW,EHOSTUNREACH:zW,EIDRM:QW,EILSEQ:$W,EINPROGRESS:VW,EINTR:GW,EINVAL:JW,EIO:HW,EISCONN:KW,EISDIR:YW,ELOOP:XW,EMFILE:ZW,EMLINK:eL,EMSGSIZE:tL,EMULTIHOP:rL,ENAMETOOLONG:iL,ENETDOWN:nL,ENETRESET:sL,ENETUNREACH:oL,ENFILE:aL,ENOBUFS:uL,ENODATA:cL,ENODEV:lL,ENOENT:dL,ENOEXEC:pL,ENOLCK:hL,ENOLINK:fL,ENOMEM:mL,ENOMSG:yL,ENOPROTOOPT:NL,ENOSPC:_L,ENOSR:wL,ENOSTR:gL,ENOSYS:bL,ENOTCONN:OL,ENOTDIR:EL,ENOTEMPTY:SL,ENOTSOCK:vL,ENOTSUP:IL,ENOTTY:qL,ENXIO:xL,EOPNOTSUPP:AL,EOVERFLOW:TL,EPERM:CL,EPIPE:RL,EPROTO:PL,EPROTONOSUPPORT:jL,EPROTOTYPE:DL,ERANGE:ML,EROFS:WL,ESPIPE:LL,ESRCH:BL,ESTALE:kL,ETIME:UL,ETIMEDOUT:FL,ETXTBSY:zL,EWOULDBLOCK:QL,EXDEV:$L,WSAEINTR:VL,WSAEBADF:GL,WSAEACCES:JL,WSAEFAULT:HL,WSAEINVAL:KL,WSAEMFILE:YL,WSAEWOULDBLOCK:XL,WSAEINPROGRESS:ZL,WSAEALREADY:eB,WSAENOTSOCK:tB,WSAEDESTADDRREQ:rB,WSAEMSGSIZE:iB,WSAEPROTOTYPE:nB,WSAENOPROTOOPT:sB,WSAEPROTONOSUPPORT:oB,WSAESOCKTNOSUPPORT:aB,WSAEOPNOTSUPP:uB,WSAEPFNOSUPPORT:cB,WSAEAFNOSUPPORT:lB,WSAEADDRINUSE:dB,WSAEADDRNOTAVAIL:pB,WSAENETDOWN:hB,WSAENETUNREACH:fB,WSAENETRESET:mB,WSAECONNABORTED:yB,WSAECONNRESET:NB,WSAENOBUFS:_B,WSAEISCONN:wB,WSAENOTCONN:gB,WSAESHUTDOWN:bB,WSAETOOMANYREFS:OB,WSAETIMEDOUT:EB,WSAECONNREFUSED:SB,WSAELOOP:vB,WSAENAMETOOLONG:IB,WSAEHOSTDOWN:qB,WSAEHOSTUNREACH:xB,WSAENOTEMPTY:AB,WSAEPROCLIM:TB,WSAEUSERS:CB,WSAEDQUOT:RB,WSAESTALE:PB,WSAEREMOTE:jB,WSASYSNOTREADY:DB,WSAVERNOTSUPPORTED:MB,WSANOTINITIALISED:WB,WSAEDISCON:LB,WSAENOMORE:BB,WSAECANCELLED:kB,WSAEINVALIDPROCTABLE:UB,WSAEINVALIDPROVIDER:FB,WSAEPROVIDERFAILEDINIT:zB,WSASYSCALLFAILURE:QB,WSASERVICE_NOT_FOUND:$B,WSATYPE_NOT_FOUND:VB,WSA_E_NO_MORE:GB,WSA_E_CANCELLED:JB,WSAEREFUSED:HB},signals:{SIGHUP:KB,SIGINT:YB,SIGQUIT:XB,SIGILL:ZB,SIGTRAP:ek,SIGABRT:tk,SIGIOT:rk,SIGBUS:ik,SIGFPE:nk,SIGKILL:sk,SIGUSR1:ok,SIGSEGV:ak,SIGUSR2:uk,SIGPIPE:ck,SIGALRM:lk,SIGTERM:dk,SIGCHLD:pk,SIGCONT:hk,SIGSTOP:fk,SIGTSTP:mk,SIGTTIN:yk,SIGTTOU:Nk,SIGURG:_k,SIGXCPU:wk,SIGXFSZ:gk,SIGVTALRM:bk,SIGPROF:Ok,SIGWINCH:Ek,SIGIO:Sk,SIGINFO:vk,SIGSYS:Ik,SIGBREAK:Ak,SIGLOST:Rk,SIGPWR:xk,SIGPOLL:qk,SIGSTKFLT:Tk,SIGUNUSED:Ck},priority:{PRIORITY_LOW:Pk,PRIORITY_BELOW_NORMAL:jk,PRIORITY_NORMAL:Dk,PRIORITY_ABOVE_NORMAL:Mk,PRIORITY_HIGH:Wk,PRIORITY_HIGHEST:Lk}}});var Dq=d((G,jq)=>{"use strict";o();s();Object.defineProperty(G,"__esModule",{value:!0});G.availableParallelism=G.arch=G.EOL=void 0;Object.defineProperty(G,"constants",{enumerable:!0,get:function(){return hq.default}});G.version=G.userInfo=G.uptime=G.type=G.totalmem=G.tmpdir=G.setPriority=G.release=G.platform=G.networkInterfaces=G.machine=G.loadavg=G.hostname=G.homedir=G.getPriority=G.freemem=G.endianness=G.devNull=G.default=G.cpus=void 0;var Bk=In(),hq=kk(pq());function kk(t){return t&&t.__esModule?t:{default:t}}var fq=8,mq=()=>fq;G.availableParallelism=mq;var yq=()=>"";G.arch=yq;var Nq=()=>"";G.machine=Nq;var _q=()=>"LE";G.endianness=_q;var wq=()=>{let t={model:"",speed:0,times:{user:0,nice:0,sys:0,idle:0,irq:0}};return Array.from({length:fq},()=>t)};G.cpus=wq;var gq=()=>0;G.getPriority=gq;var Uk=G.setPriority=(0,Bk.notImplemented)("os.setPriority"),bq=()=>"/";G.homedir=bq;var Oq=()=>"/tmp";G.tmpdir=Oq;var Fk=G.devNull="/dev/null",Eq=()=>0;G.freemem=Eq;var Sq=()=>0;G.totalmem=Sq;var vq=()=>[0,0,0];G.loadavg=vq;var Iq=()=>0;G.uptime=Iq;var qq=()=>"";G.hostname=qq;var xq=()=>({lo0:[{address:"127.0.0.1",netmask:"255.0.0.0",family:"IPv4",mac:"00:00:00:00:00:00",internal:!0,cidr:"127.0.0.1/8"},{address:"::1",netmask:"ffff:ffff:ffff:ffff:ffff:ffff:ffff:ffff",family:"IPv6",mac:"00:00:00:00:00:00",internal:!0,cidr:"::1/128",scopeid:0},{address:"fe80::1",netmask:"ffff:ffff:ffff:ffff::",family:"IPv6",mac:"00:00:00:00:00:00",internal:!0,cidr:"fe80::1/64",scopeid:1}]});G.networkInterfaces=xq;var Aq=()=>"linux";G.platform=Aq;var Tq=()=>"Linux";G.type=Tq;var Cq=()=>"";G.release=Cq;var Rq=()=>"";G.version=Rq;var Pq=t=>{let e=r=>{if(t?.encoding){let i=Buffer.from(r);return t.encoding==="buffer"?i:i.toString(t.encoding)}return r};return{gid:1e3,uid:1e3,homedir:e("/"),shell:e("/bin/sh"),username:e("root")}};G.userInfo=Pq;var zk=G.EOL=`
`;jq.exports={arch:yq,availableParallelism:mq,constants:hq.default,cpus:wq,EOL:zk,endianness:_q,devNull:Fk,freemem:Eq,getPriority:gq,homedir:bq,hostname:qq,loadavg:vq,machine:Nq,networkInterfaces:xq,platform:Aq,release:Cq,setPriority:Uk,tmpdir:Oq,totalmem:Sq,type:Tq,uptime:Iq,userInfo:Pq,version:Rq}});var x_=d(Bi=>{"use strict";o();s();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.subtle=Bi.randomUUID=Bi.getRandomValues=void 0;var Ibe=Bi.subtle=globalThis.crypto?.subtle,Qk=()=>globalThis.crypto?.randomUUID();Bi.randomUUID=Qk;var $k=t=>globalThis.crypto?.getRandomValues(t);Bi.getRandomValues=$k});var Wq=d(O=>{"use strict";o();s();Object.defineProperty(O,"__esModule",{value:!0});O.webcrypto=O.verify=O.timingSafeEqual=O.sign=O.setFips=O.setEngine=O.secureHeapUsed=O.scryptSync=O.scrypt=O.randomInt=O.randomFillSync=O.randomFill=O.randomBytes=O.publicEncrypt=O.publicDecrypt=O.pseudoRandomBytes=O.privateEncrypt=O.privateDecrypt=O.pbkdf2Sync=O.pbkdf2=O.hkdfSync=O.hkdf=O.getHashes=O.getFips=O.getDiffieHellman=O.getCurves=O.getCiphers=O.getCipherInfo=O.generatePrimeSync=O.generatePrime=O.generateKeySync=O.generateKeyPairSync=O.generateKeyPair=O.generateKey=O.fips=O.diffieHellman=O.createVerify=O.createSign=O.createSecretKey=O.createPublicKey=O.createPrivateKey=O.createHmac=O.createHash=O.createECDH=O.createDiffieHellmanGroup=O.createDiffieHellman=O.createDecipheriv=O.createDecipher=O.createCipheriv=O.createCipher=O.constants=O.checkPrimeSync=O.checkPrime=O.X509Certificate=O.Verify=O.Sign=O.KeyObject=O.Hmac=O.Hash=O.ECDH=O.DiffieHellmanGroup=O.DiffieHellman=O.Decipheriv=O.Decipher=O.Cipheriv=O.Cipher=O.Certificate=void 0;var L=In(),Vk=x_(),Mq=65536,Tbe=O.webcrypto=new Proxy(globalThis.crypto,{get(t,e){return e==="CryptoKey"?globalThis.CryptoKey:typeof globalThis.crypto[e]=="function"?globalThis.crypto[e].bind(globalThis.crypto):globalThis.crypto[e]}}),Gk=(t,e)=>{let r=Buffer.alloc(t,0,void 0);for(let i=0;i<t;i+=Mq)(0,Vk.getRandomValues)(Uint8Array.prototype.slice.call(r,i,i+Mq));if(typeof e=="function"){e(null,r);return}return r};O.randomBytes=Gk;var Cbe=O.fips=!1,Rbe=O.constants={},Pbe=O.checkPrime=(0,L.notImplemented)("crypto.checkPrime"),jbe=O.checkPrimeSync=(0,L.notImplemented)("crypto.checkPrimeSync"),Dbe=O.createCipher=(0,L.notImplemented)("crypto.createCipher"),Mbe=O.createDecipher=(0,L.notImplemented)("crypto.createDecipher"),Wbe=O.pseudoRandomBytes=(0,L.notImplemented)("crypto.pseudoRandomBytes"),Lbe=O.createCipheriv=(0,L.notImplemented)("crypto.createCipheriv"),Bbe=O.createDecipheriv=(0,L.notImplemented)("crypto.createDecipheriv"),kbe=O.createDiffieHellman=(0,L.notImplemented)("crypto.createDiffieHellman"),Ube=O.createDiffieHellmanGroup=(0,L.notImplemented)("crypto.createDiffieHellmanGroup"),Fbe=O.createECDH=(0,L.notImplemented)("crypto.createECDH"),zbe=O.createHash=(0,L.notImplemented)("crypto.createHash"),Qbe=O.createHmac=(0,L.notImplemented)("crypto.createHmac"),$be=O.createPrivateKey=(0,L.notImplemented)("crypto.createPrivateKey"),Vbe=O.createPublicKey=(0,L.notImplemented)("crypto.createPublicKey"),Gbe=O.createSecretKey=(0,L.notImplemented)("crypto.createSecretKey"),Jbe=O.createSign=(0,L.notImplemented)("crypto.createSign"),Hbe=O.createVerify=(0,L.notImplemented)("crypto.createVerify"),Kbe=O.diffieHellman=(0,L.notImplemented)("crypto.diffieHellman"),Ybe=O.generatePrime=(0,L.notImplemented)("crypto.generatePrime"),Xbe=O.generatePrimeSync=(0,L.notImplemented)("crypto.generatePrimeSync"),Zbe=O.getCiphers=(0,L.notImplemented)("crypto.getCiphers"),eOe=O.getCipherInfo=(0,L.notImplemented)("crypto.getCipherInfo"),tOe=O.getCurves=(0,L.notImplemented)("crypto.getCurves"),rOe=O.getDiffieHellman=(0,L.notImplemented)("crypto.getDiffieHellman"),iOe=O.getHashes=(0,L.notImplemented)("crypto.getHashes"),nOe=O.hkdf=(0,L.notImplemented)("crypto.hkdf"),sOe=O.hkdfSync=(0,L.notImplemented)("crypto.hkdfSync"),oOe=O.pbkdf2=(0,L.notImplemented)("crypto.pbkdf2"),aOe=O.pbkdf2Sync=(0,L.notImplemented)("crypto.pbkdf2Sync"),uOe=O.generateKeyPair=(0,L.notImplemented)("crypto.generateKeyPair"),cOe=O.generateKeyPairSync=(0,L.notImplemented)("crypto.generateKeyPairSync"),lOe=O.generateKey=(0,L.notImplemented)("crypto.generateKey"),dOe=O.generateKeySync=(0,L.notImplemented)("crypto.generateKeySync"),pOe=O.privateDecrypt=(0,L.notImplemented)("crypto.privateDecrypt"),hOe=O.privateEncrypt=(0,L.notImplemented)("crypto.privateEncrypt"),fOe=O.publicDecrypt=(0,L.notImplemented)("crypto.publicDecrypt"),mOe=O.publicEncrypt=(0,L.notImplemented)("crypto.publicEncrypt"),yOe=O.randomFill=(0,L.notImplemented)("crypto.randomFill"),NOe=O.randomFillSync=(0,L.notImplemented)("crypto.randomFillSync"),_Oe=O.randomInt=(0,L.notImplemented)("crypto.randomInt"),wOe=O.scrypt=(0,L.notImplemented)("crypto.scrypt"),gOe=O.scryptSync=(0,L.notImplemented)("crypto.scryptSync"),bOe=O.sign=(0,L.notImplemented)("crypto.sign"),OOe=O.setEngine=(0,L.notImplemented)("crypto.setEngine"),EOe=O.timingSafeEqual=(0,L.notImplemented)("crypto.timingSafeEqual"),SOe=O.getFips=(0,L.notImplemented)("crypto.getFips"),vOe=O.setFips=(0,L.notImplemented)("crypto.setFips"),IOe=O.verify=(0,L.notImplemented)("crypto.verify"),qOe=O.secureHeapUsed=(0,L.notImplemented)("crypto.secureHeapUsed"),xOe=O.Certificate=(0,L.notImplementedClass)("crypto.Certificate"),AOe=O.Cipher=(0,L.notImplementedClass)("crypto.Cipher"),TOe=O.Cipheriv=(0,L.notImplementedClass)("crypto.Cipheriv"),COe=O.Decipher=(0,L.notImplementedClass)("crypto.Decipher"),ROe=O.Decipheriv=(0,L.notImplementedClass)("crypto.Decipheriv"),POe=O.DiffieHellman=(0,L.notImplementedClass)("crypto.DiffieHellman"),jOe=O.DiffieHellmanGroup=(0,L.notImplementedClass)("crypto.DiffieHellmanGroup"),DOe=O.ECDH=(0,L.notImplementedClass)("crypto.ECDH"),MOe=O.Hash=(0,L.notImplementedClass)("crypto.Hash"),WOe=O.Hmac=(0,L.notImplementedClass)("crypto.Hmac"),LOe=O.KeyObject=(0,L.notImplementedClass)("crypto.KeyObject"),BOe=O.Sign=(0,L.notImplementedClass)("crypto.Sign"),kOe=O.Verify=(0,L.notImplementedClass)("crypto.Verify"),UOe=O.X509Certificate=(0,L.notImplementedClass)("crypto.X509Certificate")});var Fq=d((ki,Uq)=>{"use strict";o();s();Object.defineProperty(ki,"__esModule",{value:!0});var Lq={},bl=kq(x_());Object.keys(bl).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(Lq,t)||t in ki&&ki[t]===bl[t]||Object.defineProperty(ki,t,{enumerable:!0,get:function(){return bl[t]}})});var Ol=kq(Wq());Object.keys(Ol).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(Lq,t)||t in ki&&ki[t]===Ol[t]||Object.defineProperty(ki,t,{enumerable:!0,get:function(){return Ol[t]}})});function Bq(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(Bq=function(i){return i?r:e})(t)}function kq(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=Bq(e);if(r&&r.has(t))return r.get(t);var i={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&{}.hasOwnProperty.call(t,a)){var u=n?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=t[a]}return i.default=t,r&&r.set(t,i),i}Uq.exports={...bl,...Ol}});var zq=d((GOe,Jk)=>{Jk.exports={name:"dotenv",version:"16.4.7",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var Gq=d((JOe,li)=>{o();s();var A_=O_(),T_=An(),Hk=Dq(),Kk=Fq(),Yk=zq(),C_=Yk.version,Xk=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function Zk(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let i;for(;(i=Xk.exec(r))!=null;){let n=i[1],a=i[2]||"";a=a.trim();let u=a[0];a=a.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),u==='"'&&(a=a.replace(/\\n/g,`
`),a=a.replace(/\\r/g,"\r")),e[n]=a}return e}function eU(t){let e=Vq(t),r=Ke.configDotenv({path:e});if(!r.parsed){let u=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw u.code="MISSING_DATA",u}let i=$q(t).split(","),n=i.length,a;for(let u=0;u<n;u++)try{let l=i[u].trim(),h=iU(r,l);a=Ke.decrypt(h.ciphertext,h.key);break}catch(l){if(u+1>=n)throw l}return Ke.parse(a)}function tU(t){console.log(`[dotenv@${C_}][INFO] ${t}`)}function rU(t){console.log(`[dotenv@${C_}][WARN] ${t}`)}function El(t){console.log(`[dotenv@${C_}][DEBUG] ${t}`)}function $q(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function iU(t,e){let r;try{r=new URL(e)}catch(l){if(l.code==="ERR_INVALID_URL"){let h=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw h.code="INVALID_DOTENV_KEY",h}throw l}let i=r.password;if(!i){let l=new Error("INVALID_DOTENV_KEY: Missing key part");throw l.code="INVALID_DOTENV_KEY",l}let n=r.searchParams.get("environment");if(!n){let l=new Error("INVALID_DOTENV_KEY: Missing environment part");throw l.code="INVALID_DOTENV_KEY",l}let a=`DOTENV_VAULT_${n.toUpperCase()}`,u=t.parsed[a];if(!u){let l=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${a} in your .env.vault file.`);throw l.code="NOT_FOUND_DOTENV_ENVIRONMENT",l}return{ciphertext:u,key:i}}function Vq(t){let e=null;if(t&&t.path&&t.path.length>0)if(Array.isArray(t.path))for(let r of t.path)A_.existsSync(r)&&(e=r.endsWith(".vault")?r:`${r}.vault`);else e=t.path.endsWith(".vault")?t.path:`${t.path}.vault`;else e=T_.resolve(process.cwd(),".env.vault");return A_.existsSync(e)?e:null}function Qq(t){return t[0]==="~"?T_.join(Hk.homedir(),t.slice(1)):t}function nU(t){tU("Loading env from encrypted .env.vault");let e=Ke._parseVault(t),r=process.env;return t&&t.processEnv!=null&&(r=t.processEnv),Ke.populate(r,e,t),{parsed:e}}function sU(t){let e=T_.resolve(process.cwd(),".env"),r="utf8",i=!!(t&&t.debug);t&&t.encoding?r=t.encoding:i&&El("No encoding is specified. UTF-8 is used by default");let n=[e];if(t&&t.path)if(!Array.isArray(t.path))n=[Qq(t.path)];else{n=[];for(let h of t.path)n.push(Qq(h))}let a,u={};for(let h of n)try{let y=Ke.parse(A_.readFileSync(h,{encoding:r}));Ke.populate(u,y,t)}catch(y){i&&El(`Failed to load ${h} ${y.message}`),a=y}let l=process.env;return t&&t.processEnv!=null&&(l=t.processEnv),Ke.populate(l,u,t),a?{parsed:u,error:a}:{parsed:u}}function oU(t){if($q(t).length===0)return Ke.configDotenv(t);let e=Vq(t);return e?Ke._configVault(t):(rU(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),Ke.configDotenv(t))}function aU(t,e){let r=Buffer.from(e.slice(-64),"hex"),i=Buffer.from(t,"base64"),n=i.subarray(0,12),a=i.subarray(-16);i=i.subarray(12,-16);try{let u=Kk.createDecipheriv("aes-256-gcm",r,n);return u.setAuthTag(a),`${u.update(i)}${u.final()}`}catch(u){let l=u instanceof RangeError,h=u.message==="Invalid key length",y=u.message==="Unsupported state or unable to authenticate data";if(l||h){let _=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw _.code="INVALID_DOTENV_KEY",_}else if(y){let _=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw _.code="DECRYPTION_FAILED",_}else throw u}}function uU(t,e,r={}){let i=!!(r&&r.debug),n=!!(r&&r.override);if(typeof e!="object"){let a=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw a.code="OBJECT_REQUIRED",a}for(let a of Object.keys(e))Object.prototype.hasOwnProperty.call(t,a)?(n===!0&&(t[a]=e[a]),i&&El(n===!0?`"${a}" is already defined and WAS overwritten`:`"${a}" is already defined and was NOT overwritten`)):t[a]=e[a]}var Ke={configDotenv:sU,_configVault:nU,_parseVault:eU,config:oU,decrypt:aU,parse:Zk,populate:uU};li.exports.configDotenv=Ke.configDotenv;li.exports._configVault=Ke._configVault;li.exports._parseVault=Ke._parseVault;li.exports.config=Ke.config;li.exports.decrypt=Ke.decrypt;li.exports.parse=Ke.parse;li.exports.populate=Ke.populate;li.exports=Ke});var Hq=d((YOe,Jq)=>{"use strict";o();s();var cU=/(\\)?(\$)(?!\()(\{?)([\w.]+)(?::?-((?:\$\{(?:\$\{(?:\$\{[^}]*\}|[^}])*}|[^}])*}|[^}])+))?(\}?)/gi;function lU(t){return t.replace(/\\\$/g,"$")}function Wa(t,e,r){return t.replace(cU,(i,n,a,u,l,h,y)=>n==="\\"?i.slice(1):e[l]?e[l]===r[l]?e[l]:Wa(e[l],e,r):r[l]&&r[l]!==t?Wa(r[l],e,r):h?h.startsWith("$")?Wa(h,e,r):h:"")}function dU(t){let e=process.env;t&&t.processEnv!=null&&(e=t.processEnv);for(let r in t.parsed){let i=t.parsed[r];Object.prototype.hasOwnProperty.call(e,r)?e[r]===t.parsed[r]?i=Wa(i,e,t.parsed):i=e[r]:i=Wa(i,e,t.parsed),t.parsed[r]=lU(i)}for(let r in t.parsed)e[r]=t.parsed[r];return t}Jq.exports.expand=dU});var j_=d(Gs=>{"use strict";o();s();var pU=Gs&&Gs.__classPrivateFieldGet||function(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)},R_,Kq;Object.defineProperty(Gs,"__esModule",{value:!0});Gs.ConnectionStringParser=void 0;var hU=Gq(),fU=Hq(),mU=/^\s*([a-z]+)\s*\(\s*(.*)\s*\)\s*$/,yU=/([^:]*)(.*)/,P_=class{constructor(){R_.add(this)}parse(e){let r=e.connectionString,i=r.match(mU);if(i){let y=i[1];if(y!=="env")throw new ReferenceError(`Function '${y}' is not defined.`);let _=i[2],b;try{b=_.includes('"')?JSON.parse(_):_}catch{throw new SyntaxError(`Invalid connection string: '${r}'`)}if(typeof b!="string")throw new TypeError(`Argument 0 of function '${y}' must be a string.`);let{error:w}=(0,fU.expand)((0,hU.config)({path:e.envFile})),E=e.envFile??".env";if(w)throw w.name==="ENOENT"?new ReferenceError(`Environment file '${E}' could not be found. Use --env-file to specify a different file.`):w;e.logger?.info(`Loaded environment variables from '${E}'.`);let v=process.env[b];if(!v)throw new ReferenceError(`Environment variable '${b}' could not be found.`);r=v}let n=r.match(yU),a=n[1],u=n[2],l=a==="pg"?`postgres${u}`:r,h=e.dialectName??pU(this,R_,"m",Kq).call(this,r);return{connectionString:l,inferredDialectName:h}}};Gs.ConnectionStringParser=P_;R_=new WeakSet,Kq=function(e){return e.startsWith("libsql")?"libsql":e.startsWith("mysql")?"mysql":e.startsWith("postgres")||e.startsWith("pg")?"postgres":e.toLowerCase().includes("user id=")?"mssql":"sqlite"}});var g=d(ke=>{"use strict";o();s();Object.defineProperty(ke,"__esModule",{value:!0});ke.isEmpty=NU;ke.isUndefined=_U;ke.isString=Yq;ke.isNumber=wU;ke.isBoolean=gU;ke.isNull=bU;ke.isDate=D_;ke.isBigInt=OU;ke.isBuffer=Sl;ke.isFunction=EU;ke.isObject=vl;ke.isArrayBufferOrView=SU;ke.isPlainObject=vU;ke.getLast=IU;ke.freeze=Xq;ke.asArray=qU;ke.asReadonlyArray=xU;ke.isReadonlyArray=La;ke.noop=AU;ke.compare=M_;function NU(t){return Array.isArray(t)||Yq(t)||Sl(t)?t.length===0:t?Object.keys(t).length===0:!1}function _U(t){return typeof t>"u"||t===void 0}function Yq(t){return typeof t=="string"}function wU(t){return typeof t=="number"}function gU(t){return typeof t=="boolean"}function bU(t){return t===null}function D_(t){return t instanceof Date}function OU(t){return typeof t=="bigint"}function Sl(t){return typeof Buffer<"u"&&Buffer.isBuffer(t)}function EU(t){return typeof t=="function"}function vl(t){return typeof t=="object"&&t!==null}function SU(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)}function vU(t){if(!vl(t)||MU(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function IU(t){return t[t.length-1]}function Xq(t){return Object.freeze(t)}function qU(t){return La(t)?t:[t]}function xU(t){return La(t)?t:Xq([t])}function La(t){return Array.isArray(t)}function AU(t){return t}function M_(t,e){return La(t)&&La(e)?TU(t,e):vl(t)&&vl(e)?CU(t,e):t===e}function TU(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!M_(t[r],e[r]))return!1;return!0}function CU(t,e){return Sl(t)&&Sl(e)?RU(t,e):D_(t)&&D_(e)?PU(t,e):jU(t,e)}function RU(t,e){return Buffer.compare(t,e)===0}function PU(t,e){return t.getTime()===e.getTime()}function jU(t,e){let r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(let n of r)if(!M_(t[n],e[n]))return!1;return!0}var DU=Object.prototype.toString;function MU(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":DU.call(t)}});var Tn=d(ql=>{"use strict";o();s();Object.defineProperty(ql,"__esModule",{value:!0});ql.AlterTableNode=void 0;var Il=g();ql.AlterTableNode=(0,Il.freeze)({is(t){return t.kind==="AlterTableNode"},create(t){return(0,Il.freeze)({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return(0,Il.freeze)({...t,...e})},cloneWithColumnAlteration(t,e){return(0,Il.freeze)({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}})});var Pe=d(xl=>{"use strict";o();s();Object.defineProperty(xl,"__esModule",{value:!0});xl.IdentifierNode=void 0;var Zq=g();xl.IdentifierNode=(0,Zq.freeze)({is(t){return t.kind==="IdentifierNode"},create(t){return(0,Zq.freeze)({kind:"IdentifierNode",name:t})}})});var Cl=d(Tl=>{"use strict";o();s();Object.defineProperty(Tl,"__esModule",{value:!0});Tl.CreateIndexNode=void 0;var Al=g(),WU=Pe();Tl.CreateIndexNode=(0,Al.freeze)({is(t){return t.kind==="CreateIndexNode"},create(t){return(0,Al.freeze)({kind:"CreateIndexNode",name:WU.IdentifierNode.create(t)})},cloneWith(t,e){return(0,Al.freeze)({...t,...e})},cloneWithColumns(t,e){return(0,Al.freeze)({...t,columns:[...t.columns||[],...e]})}})});var Pl=d(Rl=>{"use strict";o();s();Object.defineProperty(Rl,"__esModule",{value:!0});Rl.CreateSchemaNode=void 0;var W_=g(),LU=Pe();Rl.CreateSchemaNode=(0,W_.freeze)({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return(0,W_.freeze)({kind:"CreateSchemaNode",schema:LU.IdentifierNode.create(t),...e})},cloneWith(t,e){return(0,W_.freeze)({...t,...e})}})});var Hs=d(Js=>{"use strict";o();s();Object.defineProperty(Js,"__esModule",{value:!0});Js.CreateTableNode=Js.ON_COMMIT_ACTIONS=void 0;var St=g();Js.ON_COMMIT_ACTIONS=["preserve rows","delete rows","drop"];Js.CreateTableNode=(0,St.freeze)({is(t){return t.kind==="CreateTableNode"},create(t){return(0,St.freeze)({kind:"CreateTableNode",table:t,columns:(0,St.freeze)([])})},cloneWithColumn(t,e){return(0,St.freeze)({...t,columns:(0,St.freeze)([...t.columns,e])})},cloneWithConstraint(t,e){return(0,St.freeze)({...t,constraints:t.constraints?(0,St.freeze)([...t.constraints,e]):(0,St.freeze)([e])})},cloneWithFrontModifier(t,e){return(0,St.freeze)({...t,frontModifiers:t.frontModifiers?(0,St.freeze)([...t.frontModifiers,e]):(0,St.freeze)([e])})},cloneWithEndModifier(t,e){return(0,St.freeze)({...t,endModifiers:t.endModifiers?(0,St.freeze)([...t.endModifiers,e]):(0,St.freeze)([e])})},cloneWith(t,e){return(0,St.freeze)({...t,...e})}})});var Ui=d(jl=>{"use strict";o();s();Object.defineProperty(jl,"__esModule",{value:!0});jl.SchemableIdentifierNode=void 0;var L_=g(),B_=Pe();jl.SchemableIdentifierNode=(0,L_.freeze)({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return(0,L_.freeze)({kind:"SchemableIdentifierNode",identifier:B_.IdentifierNode.create(t)})},createWithSchema(t,e){return(0,L_.freeze)({kind:"SchemableIdentifierNode",schema:B_.IdentifierNode.create(t),identifier:B_.IdentifierNode.create(e)})}})});var Ba=d(Dl=>{"use strict";o();s();Object.defineProperty(Dl,"__esModule",{value:!0});Dl.DropIndexNode=void 0;var k_=g(),BU=Ui();Dl.DropIndexNode=(0,k_.freeze)({is(t){return t.kind==="DropIndexNode"},create(t,e){return(0,k_.freeze)({kind:"DropIndexNode",name:BU.SchemableIdentifierNode.create(t),...e})},cloneWith(t,e){return(0,k_.freeze)({...t,...e})}})});var Wl=d(Ml=>{"use strict";o();s();Object.defineProperty(Ml,"__esModule",{value:!0});Ml.DropSchemaNode=void 0;var U_=g(),kU=Pe();Ml.DropSchemaNode=(0,U_.freeze)({is(t){return t.kind==="DropSchemaNode"},create(t,e){return(0,U_.freeze)({kind:"DropSchemaNode",schema:kU.IdentifierNode.create(t),...e})},cloneWith(t,e){return(0,U_.freeze)({...t,...e})}})});var Bl=d(Ll=>{"use strict";o();s();Object.defineProperty(Ll,"__esModule",{value:!0});Ll.DropTableNode=void 0;var F_=g();Ll.DropTableNode=(0,F_.freeze)({is(t){return t.kind==="DropTableNode"},create(t,e){return(0,F_.freeze)({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return(0,F_.freeze)({...t,...e})}})});var Wr=d(kl=>{"use strict";o();s();Object.defineProperty(kl,"__esModule",{value:!0});kl.AliasNode=void 0;var ex=g();kl.AliasNode=(0,ex.freeze)({is(t){return t.kind==="AliasNode"},create(t,e){return(0,ex.freeze)({kind:"AliasNode",node:t,alias:e})}})});var Ks=d(Ul=>{"use strict";o();s();Object.defineProperty(Ul,"__esModule",{value:!0});Ul.TableNode=void 0;var z_=g(),tx=Ui();Ul.TableNode=(0,z_.freeze)({is(t){return t.kind==="TableNode"},create(t){return(0,z_.freeze)({kind:"TableNode",table:tx.SchemableIdentifierNode.create(t)})},createWithSchema(t,e){return(0,z_.freeze)({kind:"TableNode",table:tx.SchemableIdentifierNode.createWithSchema(t,e)})}})});var zt=d(Q_=>{"use strict";o();s();Object.defineProperty(Q_,"__esModule",{value:!0});Q_.isOperationNodeSource=UU;var rx=g();function UU(t){return(0,rx.isObject)(t)&&(0,rx.isFunction)(t.toOperationNode)}});var V_=d(Fl=>{"use strict";o();s();Object.defineProperty(Fl,"__esModule",{value:!0});Fl.isExpression=FU;Fl.isAliasedExpression=zU;var ix=zt(),$_=g();function FU(t){return(0,$_.isObject)(t)&&"expressionType"in t&&(0,ix.isOperationNodeSource)(t)}function zU(t){return(0,$_.isObject)(t)&&"expression"in t&&(0,$_.isString)(t.alias)&&(0,ix.isOperationNodeSource)(t)}});var J_=d(zl=>{"use strict";o();s();Object.defineProperty(zl,"__esModule",{value:!0});zl.SelectModifierNode=void 0;var G_=g();zl.SelectModifierNode=(0,G_.freeze)({is(t){return t.kind==="SelectModifierNode"},create(t,e){return(0,G_.freeze)({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return(0,G_.freeze)({kind:"SelectModifierNode",rawModifier:t})}})});var Fi=d(Ql=>{"use strict";o();s();Object.defineProperty(Ql,"__esModule",{value:!0});Ql.AndNode=void 0;var nx=g();Ql.AndNode=(0,nx.freeze)({is(t){return t.kind==="AndNode"},create(t,e){return(0,nx.freeze)({kind:"AndNode",left:t,right:e})}})});var Cn=d($l=>{"use strict";o();s();Object.defineProperty($l,"__esModule",{value:!0});$l.OrNode=void 0;var sx=g();$l.OrNode=(0,sx.freeze)({is(t){return t.kind==="OrNode"},create(t,e){return(0,sx.freeze)({kind:"OrNode",left:t,right:e})}})});var K_=d(Vl=>{"use strict";o();s();Object.defineProperty(Vl,"__esModule",{value:!0});Vl.OnNode=void 0;var H_=g(),QU=Fi(),$U=Cn();Vl.OnNode=(0,H_.freeze)({is(t){return t.kind==="OnNode"},create(t){return(0,H_.freeze)({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return(0,H_.freeze)({...t,on:e==="And"?QU.AndNode.create(t.on,r):$U.OrNode.create(t.on,r)})}})});var ka=d(Jl=>{"use strict";o();s();Object.defineProperty(Jl,"__esModule",{value:!0});Jl.JoinNode=void 0;var Gl=g(),Y_=K_();Jl.JoinNode=(0,Gl.freeze)({is(t){return t.kind==="JoinNode"},create(t,e){return(0,Gl.freeze)({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return(0,Gl.freeze)({kind:"JoinNode",joinType:t,table:e,on:Y_.OnNode.create(r)})},cloneWithOn(t,e){return(0,Gl.freeze)({...t,on:t.on?Y_.OnNode.cloneWithOperation(t.on,"And",e):Y_.OnNode.create(e)})}})});var Kl=d(Hl=>{"use strict";o();s();Object.defineProperty(Hl,"__esModule",{value:!0});Hl.BinaryOperationNode=void 0;var ox=g();Hl.BinaryOperationNode=(0,ox.freeze)({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return(0,ox.freeze)({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}})});var Pn=d(ne=>{"use strict";o();s();Object.defineProperty(ne,"__esModule",{value:!0});ne.OperatorNode=ne.OPERATORS=ne.UNARY_OPERATORS=ne.UNARY_FILTER_OPERATORS=ne.BINARY_OPERATORS=ne.JSON_OPERATORS=ne.ARITHMETIC_OPERATORS=ne.COMPARISON_OPERATORS=void 0;ne.isOperator=VU;ne.isBinaryOperator=GU;ne.isComparisonOperator=JU;ne.isArithmeticOperator=HU;ne.isJSONOperator=KU;var Rn=g();ne.COMPARISON_OPERATORS=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"];ne.ARITHMETIC_OPERATORS=["+","-","*","/","%","^","&","|","#","<<",">>"];ne.JSON_OPERATORS=["->","->>"];ne.BINARY_OPERATORS=[...ne.COMPARISON_OPERATORS,...ne.ARITHMETIC_OPERATORS,"&&","||"];ne.UNARY_FILTER_OPERATORS=["exists","not exists"];ne.UNARY_OPERATORS=["not","-",...ne.UNARY_FILTER_OPERATORS];ne.OPERATORS=[...ne.BINARY_OPERATORS,...ne.JSON_OPERATORS,...ne.UNARY_OPERATORS,"between","between symmetric"];ne.OperatorNode=(0,Rn.freeze)({is(t){return t.kind==="OperatorNode"},create(t){return(0,Rn.freeze)({kind:"OperatorNode",operator:t})}});function VU(t){return(0,Rn.isString)(t)&&ne.OPERATORS.includes(t)}function GU(t){return(0,Rn.isString)(t)&&ne.BINARY_OPERATORS.includes(t)}function JU(t){return(0,Rn.isString)(t)&&ne.COMPARISON_OPERATORS.includes(t)}function HU(t){return(0,Rn.isString)(t)&&ne.ARITHMETIC_OPERATORS.includes(t)}function KU(t){return(0,Rn.isString)(t)&&ne.JSON_OPERATORS.includes(t)}});var Nt=d(Yl=>{"use strict";o();s();Object.defineProperty(Yl,"__esModule",{value:!0});Yl.ColumnNode=void 0;var ax=g(),YU=Pe();Yl.ColumnNode=(0,ax.freeze)({is(t){return t.kind==="ColumnNode"},create(t){return(0,ax.freeze)({kind:"ColumnNode",column:YU.IdentifierNode.create(t)})}})});var Ua=d(Xl=>{"use strict";o();s();Object.defineProperty(Xl,"__esModule",{value:!0});Xl.SelectAllNode=void 0;var ux=g();Xl.SelectAllNode=(0,ux.freeze)({is(t){return t.kind==="SelectAllNode"},create(){return(0,ux.freeze)({kind:"SelectAllNode"})}})});var ed=d(Zl=>{"use strict";o();s();Object.defineProperty(Zl,"__esModule",{value:!0});Zl.ReferenceNode=void 0;var XU=Ua(),X_=g();Zl.ReferenceNode=(0,X_.freeze)({is(t){return t.kind==="ReferenceNode"},create(t,e){return(0,X_.freeze)({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return(0,X_.freeze)({kind:"ReferenceNode",table:t,column:XU.SelectAllNode.create()})}})});var td=d(Fa=>{"use strict";o();s();Object.defineProperty(Fa,"__esModule",{value:!0});Fa.DynamicReferenceBuilder=void 0;Fa.isDynamicReferenceBuilder=tF;var ZU=zt(),eF=dt(),cx=g(),Z_=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return(0,eF.parseSimpleReferenceExpression)(this.#e)}};Fa.DynamicReferenceBuilder=Z_;function tF(t){return(0,cx.isObject)(t)&&(0,ZU.isOperationNodeSource)(t)&&(0,cx.isString)(t.dynamicReference)}});var ew=d(rd=>{"use strict";o();s();Object.defineProperty(rd,"__esModule",{value:!0});rd.OrderByItemNode=void 0;var lx=g();rd.OrderByItemNode=(0,lx.freeze)({is(t){return t.kind==="OrderByItemNode"},create(t,e){return(0,lx.freeze)({kind:"OrderByItemNode",orderBy:t,direction:e})}})});var di=d(jn=>{"use strict";o();s();Object.defineProperty(jn,"__esModule",{value:!0});jn.RawNode=void 0;var id=g();jn.RawNode=(0,id.freeze)({is(t){return t.kind==="RawNode"},create(t,e){return(0,id.freeze)({kind:"RawNode",sqlFragments:(0,id.freeze)(t),parameters:(0,id.freeze)(e)})},createWithSql(t){return jn.RawNode.create([t],[])},createWithChild(t){return jn.RawNode.create(["",""],[t])},createWithChildren(t){return jn.RawNode.create(new Array(t.length+1).fill(""),t)}})});var Ys=d(za=>{"use strict";o();s();Object.defineProperty(za,"__esModule",{value:!0});za.isOrderByDirection=hx;za.parseOrderBy=nF;za.parseOrderByItem=nd;var rF=td(),tw=ew(),iF=di(),dx=yr(),px=dt();function hx(t){return t==="asc"||t==="desc"}function nF(t){if(t.length===2)return[nd(t[0],t[1])];if(t.length===1){let[e]=t;return Array.isArray(e)?e.map(r=>nd(r)):[nd(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function nd(t,e){let r=sF(t);if(tw.OrderByItemNode.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return tw.OrderByItemNode.create(r,fx(e))}function sF(t){if((0,dx.isExpressionOrFactory)(t))return(0,dx.parseExpression)(t);if((0,rF.isDynamicReferenceBuilder)(t))return t.toOperationNode();let[e,r]=t.split(" ");if(r){if(!hx(r))throw new Error(`Invalid order by direction: ${r}`);return tw.OrderByItemNode.create((0,px.parseStringReference)(e),fx(r))}return(0,px.parseStringReference)(t)}function fx(t){if(t)return t==="asc"||t==="desc"?iF.RawNode.createWithSql(t):t.toOperationNode()}});var od=d(sd=>{"use strict";o();s();Object.defineProperty(sd,"__esModule",{value:!0});sd.JSONReferenceNode=void 0;var rw=g();sd.JSONReferenceNode=(0,rw.freeze)({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return(0,rw.freeze)({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return(0,rw.freeze)({...t,traversal:e})}})});var ud=d(ad=>{"use strict";o();s();Object.defineProperty(ad,"__esModule",{value:!0});ad.JSONOperatorChainNode=void 0;var Qa=g();ad.JSONOperatorChainNode=(0,Qa.freeze)({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return(0,Qa.freeze)({kind:"JSONOperatorChainNode",operator:t,values:(0,Qa.freeze)([])})},cloneWithValue(t,e){return(0,Qa.freeze)({...t,values:(0,Qa.freeze)([...t.values,e])})}})});var Va=d(cd=>{"use strict";o();s();Object.defineProperty(cd,"__esModule",{value:!0});cd.JSONPathNode=void 0;var $a=g();cd.JSONPathNode=(0,$a.freeze)({is(t){return t.kind==="JSONPathNode"},create(t){return(0,$a.freeze)({kind:"JSONPathNode",inOperator:t,pathLegs:(0,$a.freeze)([])})},cloneWithLeg(t,e){return(0,$a.freeze)({...t,pathLegs:(0,$a.freeze)([...t.pathLegs,e])})}})});var dt=d(Lr=>{"use strict";o();s();Object.defineProperty(Lr,"__esModule",{value:!0});Lr.parseSimpleReferenceExpression=gx;Lr.parseReferenceExpressionOrList=lF;Lr.parseReferenceExpression=iw;Lr.parseJSONReference=dF;Lr.parseStringReference=Ga;Lr.parseAliasedStringReference=pF;Lr.parseColumnName=bx;Lr.parseOrderedColumnName=hF;var oF=Wr(),dd=Nt(),nw=ed(),_x=Ks(),wx=g(),mx=yr(),aF=Pe(),yx=Ys(),ld=Pn(),Nx=od(),uF=ud(),cF=Va();function gx(t){return(0,wx.isString)(t)?Ga(t):t.toOperationNode()}function lF(t){return(0,wx.isReadonlyArray)(t)?t.map(e=>iw(e)):[iw(t)]}function iw(t){return(0,mx.isExpressionOrFactory)(t)?(0,mx.parseExpression)(t):gx(t)}function dF(t,e){let r=Ga(t);if((0,ld.isJSONOperator)(e))return Nx.JSONReferenceNode.create(r,uF.JSONOperatorChainNode.create(ld.OperatorNode.create(e)));let i=e.slice(0,-1);if((0,ld.isJSONOperator)(i))return Nx.JSONReferenceNode.create(r,cF.JSONPathNode.create(ld.OperatorNode.create(i)));throw new Error(`Invalid JSON operator: ${e}`)}function Ga(t){let e=".";if(!t.includes(e))return nw.ReferenceNode.create(dd.ColumnNode.create(t));let r=t.split(e).map(sw);if(r.length===3)return fF(r);if(r.length===2)return mF(r);throw new Error(`invalid column reference ${t}`)}function pF(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(sw);return oF.AliasNode.create(Ga(r),aF.IdentifierNode.create(i))}else return Ga(t)}function bx(t){return dd.ColumnNode.create(t)}function hF(t){let e=" ";if(t.includes(e)){let[r,i]=t.split(e).map(sw);if(!(0,yx.isOrderByDirection)(i))throw new Error(`invalid order direction "${i}" next to "${r}"`);return(0,yx.parseOrderBy)([r,i])[0]}else return bx(t)}function fF(t){let[e,r,i]=t;return nw.ReferenceNode.create(dd.ColumnNode.create(i),_x.TableNode.createWithSchema(e,r))}function mF(t){let[e,r]=t;return nw.ReferenceNode.create(dd.ColumnNode.create(r),_x.TableNode.create(e))}function sw(t){return t.trim()}});var hd=d(pd=>{"use strict";o();s();Object.defineProperty(pd,"__esModule",{value:!0});pd.PrimitiveValueListNode=void 0;var ow=g();pd.PrimitiveValueListNode=(0,ow.freeze)({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return(0,ow.freeze)({kind:"PrimitiveValueListNode",values:(0,ow.freeze)([...t])})}})});var Ja=d(fd=>{"use strict";o();s();Object.defineProperty(fd,"__esModule",{value:!0});fd.ValueListNode=void 0;var aw=g();fd.ValueListNode=(0,aw.freeze)({is(t){return t.kind==="ValueListNode"},create(t){return(0,aw.freeze)({kind:"ValueListNode",values:(0,aw.freeze)(t)})}})});var pi=d(md=>{"use strict";o();s();Object.defineProperty(md,"__esModule",{value:!0});md.ValueNode=void 0;var uw=g();md.ValueNode=(0,uw.freeze)({is(t){return t.kind==="ValueNode"},create(t){return(0,uw.freeze)({kind:"ValueNode",value:t})},createImmediate(t){return(0,uw.freeze)({kind:"ValueNode",value:t,immediate:!0})}})});var Br=d(Xs=>{"use strict";o();s();Object.defineProperty(Xs,"__esModule",{value:!0});Xs.parseValueExpressionOrList=_F;Xs.parseValueExpression=lw;Xs.isSafeImmediateValue=Ex;Xs.parseSafeImmediateValue=wF;var yF=hd(),NF=Ja(),Ox=pi(),yd=g(),cw=yr();function _F(t){return(0,yd.isReadonlyArray)(t)?gF(t):lw(t)}function lw(t){return(0,cw.isExpressionOrFactory)(t)?(0,cw.parseExpression)(t):Ox.ValueNode.create(t)}function Ex(t){return(0,yd.isNumber)(t)||(0,yd.isBoolean)(t)||(0,yd.isNull)(t)}function wF(t){if(!Ex(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return Ox.ValueNode.createImmediate(t)}function gF(t){return t.some(cw.isExpressionOrFactory)?NF.ValueListNode.create(t.map(e=>lw(e))):yF.PrimitiveValueListNode.create(t)}});var Zs=d(Nd=>{"use strict";o();s();Object.defineProperty(Nd,"__esModule",{value:!0});Nd.ParensNode=void 0;var Sx=g();Nd.ParensNode=(0,Sx.freeze)({is(t){return t.kind==="ParensNode"},create(t){return(0,Sx.freeze)({kind:"ParensNode",node:t})}})});var Qt=d(Dn=>{"use strict";o();s();Object.defineProperty(Dn,"__esModule",{value:!0});Dn.parseValueBinaryOperationOrExpression=SF;Dn.parseValueBinaryOperation=fw;Dn.parseReferentialBinaryOperation=vF;Dn.parseFilterObject=IF;Dn.parseFilterList=xx;var _d=Kl(),wd=g(),Ix=zt(),dw=Pn(),gd=dt(),qx=Br(),pw=pi(),bF=Fi(),OF=Zs(),EF=Cn();function SF(t){if(t.length===3)return fw(t[0],t[1],t[2]);if(t.length===1)return(0,qx.parseValueExpression)(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function fw(t,e,r){return qF(e)&&Ax(r)?_d.BinaryOperationNode.create((0,gd.parseReferenceExpression)(t),hw(e),pw.ValueNode.createImmediate(r)):_d.BinaryOperationNode.create((0,gd.parseReferenceExpression)(t),hw(e),(0,qx.parseValueExpressionOrList)(r))}function vF(t,e,r){return _d.BinaryOperationNode.create((0,gd.parseReferenceExpression)(t),hw(e),(0,gd.parseReferenceExpression)(r))}function IF(t,e){return xx(Object.entries(t).filter(([,r])=>!(0,wd.isUndefined)(r)).map(([r,i])=>fw(r,Ax(i)?"is":"=",i)),e)}function xx(t,e,r=!0){let i=e==="and"?bF.AndNode.create:EF.OrNode.create;if(t.length===0)return _d.BinaryOperationNode.create(pw.ValueNode.createImmediate(1),dw.OperatorNode.create("="),pw.ValueNode.createImmediate(e==="and"?1:0));let n=vx(t[0]);for(let a=1;a<t.length;++a)n=i(n,vx(t[a]));return t.length>1&&r?OF.ParensNode.create(n):n}function qF(t){return t==="is"||t==="is not"}function Ax(t){return(0,wd.isNull)(t)||(0,wd.isBoolean)(t)}function hw(t){if((0,wd.isString)(t)&&dw.OPERATORS.includes(t))return dw.OperatorNode.create(t);if((0,Ix.isOperationNodeSource)(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function vx(t){return(0,Ix.isOperationNodeSource)(t)?t.toOperationNode():t}});var eo=d(bd=>{"use strict";o();s();Object.defineProperty(bd,"__esModule",{value:!0});bd.OrderByNode=void 0;var Ha=g();bd.OrderByNode=(0,Ha.freeze)({is(t){return t.kind==="OrderByNode"},create(t){return(0,Ha.freeze)({kind:"OrderByNode",items:(0,Ha.freeze)([...t])})},cloneWithItems(t,e){return(0,Ha.freeze)({...t,items:(0,Ha.freeze)([...t.items,...e])})}})});var mw=d(Od=>{"use strict";o();s();Object.defineProperty(Od,"__esModule",{value:!0});Od.PartitionByNode=void 0;var Ka=g();Od.PartitionByNode=(0,Ka.freeze)({is(t){return t.kind==="PartitionByNode"},create(t){return(0,Ka.freeze)({kind:"PartitionByNode",items:(0,Ka.freeze)(t)})},cloneWithItems(t,e){return(0,Ka.freeze)({...t,items:(0,Ka.freeze)([...t.items,...e])})}})});var vd=d(Sd=>{"use strict";o();s();Object.defineProperty(Sd,"__esModule",{value:!0});Sd.OverNode=void 0;var Ed=g(),Tx=eo(),Cx=mw();Sd.OverNode=(0,Ed.freeze)({is(t){return t.kind==="OverNode"},create(){return(0,Ed.freeze)({kind:"OverNode"})},cloneWithOrderByItems(t,e){return(0,Ed.freeze)({...t,orderBy:t.orderBy?Tx.OrderByNode.cloneWithItems(t.orderBy,e):Tx.OrderByNode.create(e)})},cloneWithPartitionByItems(t,e){return(0,Ed.freeze)({...t,partitionBy:t.partitionBy?Cx.PartitionByNode.cloneWithItems(t.partitionBy,e):Cx.PartitionByNode.create(e)})}})});var Xa=d(Id=>{"use strict";o();s();Object.defineProperty(Id,"__esModule",{value:!0});Id.FromNode=void 0;var Ya=g();Id.FromNode=(0,Ya.freeze)({is(t){return t.kind==="FromNode"},create(t){return(0,Ya.freeze)({kind:"FromNode",froms:(0,Ya.freeze)(t)})},cloneWithFroms(t,e){return(0,Ya.freeze)({...t,froms:(0,Ya.freeze)([...t.froms,...e])})}})});var yw=d(qd=>{"use strict";o();s();Object.defineProperty(qd,"__esModule",{value:!0});qd.GroupByNode=void 0;var Za=g();qd.GroupByNode=(0,Za.freeze)({is(t){return t.kind==="GroupByNode"},create(t){return(0,Za.freeze)({kind:"GroupByNode",items:(0,Za.freeze)(t)})},cloneWithItems(t,e){return(0,Za.freeze)({...t,items:(0,Za.freeze)([...t.items,...e])})}})});var _w=d(xd=>{"use strict";o();s();Object.defineProperty(xd,"__esModule",{value:!0});xd.HavingNode=void 0;var Nw=g(),xF=Fi(),AF=Cn();xd.HavingNode=(0,Nw.freeze)({is(t){return t.kind==="HavingNode"},create(t){return(0,Nw.freeze)({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return(0,Nw.freeze)({...t,having:e==="And"?xF.AndNode.create(t.having,r):AF.OrNode.create(t.having,r)})}})});var zi=d(Ad=>{"use strict";o();s();Object.defineProperty(Ad,"__esModule",{value:!0});Ad.SelectQueryNode=void 0;var ve=g(),TF=Xa(),Rx=yw(),Px=_w(),jx=eo();Ad.SelectQueryNode=(0,ve.freeze)({is(t){return t.kind==="SelectQueryNode"},create(t){return(0,ve.freeze)({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return(0,ve.freeze)({kind:"SelectQueryNode",from:TF.FromNode.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return(0,ve.freeze)({...t,selections:t.selections?(0,ve.freeze)([...t.selections,...e]):(0,ve.freeze)(e)})},cloneWithDistinctOn(t,e){return(0,ve.freeze)({...t,distinctOn:t.distinctOn?(0,ve.freeze)([...t.distinctOn,...e]):(0,ve.freeze)(e)})},cloneWithFrontModifier(t,e){return(0,ve.freeze)({...t,frontModifiers:t.frontModifiers?(0,ve.freeze)([...t.frontModifiers,e]):(0,ve.freeze)([e])})},cloneWithOrderByItems(t,e){return(0,ve.freeze)({...t,orderBy:t.orderBy?jx.OrderByNode.cloneWithItems(t.orderBy,e):jx.OrderByNode.create(e)})},cloneWithGroupByItems(t,e){return(0,ve.freeze)({...t,groupBy:t.groupBy?Rx.GroupByNode.cloneWithItems(t.groupBy,e):Rx.GroupByNode.create(e)})},cloneWithLimit(t,e){return(0,ve.freeze)({...t,limit:e})},cloneWithOffset(t,e){return(0,ve.freeze)({...t,offset:e})},cloneWithFetch(t,e){return(0,ve.freeze)({...t,fetch:e})},cloneWithHaving(t,e){return(0,ve.freeze)({...t,having:t.having?Px.HavingNode.cloneWithOperation(t.having,"And",e):Px.HavingNode.create(e)})},cloneWithSetOperations(t,e){return(0,ve.freeze)({...t,setOperations:t.setOperations?(0,ve.freeze)([...t.setOperations,...e]):(0,ve.freeze)([...e])})},cloneWithoutSelections(t){return(0,ve.freeze)({...t,selections:[]})},cloneWithoutLimit(t){return(0,ve.freeze)({...t,limit:void 0})},cloneWithoutOffset(t){return(0,ve.freeze)({...t,offset:void 0})},cloneWithoutOrderBy(t){return(0,ve.freeze)({...t,orderBy:void 0})},cloneWithoutGroupBy(t){return(0,ve.freeze)({...t,groupBy:void 0})}})});var pe=d(ww=>{"use strict";o();s();Object.defineProperty(ww,"__esModule",{value:!0});ww.preventAwait=CF;function CF(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}});var bw=d(Cd=>{"use strict";o();s();Object.defineProperty(Cd,"__esModule",{value:!0});Cd.JoinBuilder=void 0;var gw=ka(),RF=di(),Dx=Qt(),PF=g(),jF=pe(),Td=class t{#e;constructor(e){this.#e=(0,PF.freeze)(e)}on(...e){return new t({...this.#e,joinNode:gw.JoinNode.cloneWithOn(this.#e.joinNode,(0,Dx.parseValueBinaryOperationOrExpression)(e))})}onRef(e,r,i){return new t({...this.#e,joinNode:gw.JoinNode.cloneWithOn(this.#e.joinNode,(0,Dx.parseReferentialBinaryOperation)(e,r,i))})}onTrue(){return new t({...this.#e,joinNode:gw.JoinNode.cloneWithOn(this.#e.joinNode,RF.RawNode.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}};Cd.JoinBuilder=Td;(0,jF.preventAwait)(Td,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.")});var Ow=d(Rd=>{"use strict";o();s();Object.defineProperty(Rd,"__esModule",{value:!0});Rd.PartitionByItemNode=void 0;var Mx=g();Rd.PartitionByItemNode=(0,Mx.freeze)({is(t){return t.kind==="PartitionByItemNode"},create(t){return(0,Mx.freeze)({kind:"PartitionByItemNode",partitionBy:t})}})});var Wx=d(Ew=>{"use strict";o();s();Object.defineProperty(Ew,"__esModule",{value:!0});Ew.parsePartitionBy=WF;var DF=Ow(),MF=dt();function WF(t){return(0,MF.parseReferenceExpressionOrList)(t).map(DF.PartitionByItemNode.create)}});var Bx=d(jd=>{"use strict";o();s();Object.defineProperty(jd,"__esModule",{value:!0});jd.OverBuilder=void 0;var Lx=vd(),LF=Ys(),BF=Wx(),kF=g(),UF=pe(),Pd=class t{#e;constructor(e){this.#e=(0,kF.freeze)(e)}orderBy(e,r){return new t({overNode:Lx.OverNode.cloneWithOrderByItems(this.#e.overNode,(0,LF.parseOrderBy)([e,r]))})}partitionBy(e){return new t({overNode:Lx.OverNode.cloneWithPartitionByItems(this.#e.overNode,(0,BF.parsePartitionBy)(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}};jd.OverBuilder=Pd;(0,UF.preventAwait)(Pd,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.")});var Sw=d(Md=>{"use strict";o();s();Object.defineProperty(Md,"__esModule",{value:!0});Md.SelectionNode=void 0;var Dd=g(),FF=ed(),zF=Ua();Md.SelectionNode=(0,Dd.freeze)({is(t){return t.kind==="SelectionNode"},create(t){return(0,Dd.freeze)({kind:"SelectionNode",selection:t})},createSelectAll(){return(0,Dd.freeze)({kind:"SelectionNode",selection:zF.SelectAllNode.create()})},createSelectAllFromTable(t){return(0,Dd.freeze)({kind:"SelectionNode",selection:FF.ReferenceNode.createSelectAll(t)})}})});var Qi=d(Ld=>{"use strict";o();s();Object.defineProperty(Ld,"__esModule",{value:!0});Ld.parseSelectArg=Fx;Ld.parseSelectAll=HF;var Wd=g(),eu=Sw(),QF=dt(),$F=td(),VF=yr(),GF=_t(),JF=$i();function Fx(t){return(0,Wd.isFunction)(t)?Fx(t((0,JF.expressionBuilder)())):(0,Wd.isReadonlyArray)(t)?t.map(e=>kx(e)):[kx(t)]}function kx(t){return(0,Wd.isString)(t)?eu.SelectionNode.create((0,QF.parseAliasedStringReference)(t)):(0,$F.isDynamicReferenceBuilder)(t)?eu.SelectionNode.create(t.toOperationNode()):eu.SelectionNode.create((0,VF.parseAliasedExpression)(t))}function HF(t){return t?Array.isArray(t)?t.map(Ux):[Ux(t)]:[eu.SelectionNode.createSelectAll()]}function Ux(t){if((0,Wd.isString)(t))return eu.SelectionNode.createSelectAllFromTable((0,GF.parseTable)(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}});var Iw=d(Bd=>{"use strict";o();s();Object.defineProperty(Bd,"__esModule",{value:!0});Bd.ValuesNode=void 0;var vw=g();Bd.ValuesNode=(0,vw.freeze)({is(t){return t.kind==="ValuesNode"},create(t){return(0,vw.freeze)({kind:"ValuesNode",values:(0,vw.freeze)(t)})}})});var qw=d(kd=>{"use strict";o();s();Object.defineProperty(kd,"__esModule",{value:!0});kd.DefaultInsertValueNode=void 0;var zx=g();kd.DefaultInsertValueNode=(0,zx.freeze)({is(t){return t.kind==="DefaultInsertValueNode"},create(){return(0,zx.freeze)({kind:"DefaultInsertValueNode"})}})});var Aw=d(xw=>{"use strict";o();s();Object.defineProperty(xw,"__esModule",{value:!0});xw.parseInsertExpression=n2;var KF=Nt(),YF=hd(),XF=Ja(),Mn=g(),ZF=Br(),e2=Iw(),t2=yr(),r2=qw(),i2=$i();function n2(t){let e=(0,Mn.isFunction)(t)?t((0,i2.expressionBuilder)()):t,r=(0,Mn.isReadonlyArray)(e)?e:(0,Mn.freeze)([e]);return s2(r)}function s2(t){let e=o2(t);return[(0,Mn.freeze)([...e.keys()].map(KF.ColumnNode.create)),e2.ValuesNode.create(t.map(r=>a2(r,e)))]}function o2(t){let e=new Map;for(let r of t){let i=Object.keys(r);for(let n of i)!e.has(n)&&r[n]!==void 0&&e.set(n,e.size)}return e}function a2(t,e){let r=Object.keys(t),i=Array.from({length:e.size}),n=!1;for(let u of r){let l=e.get(u);if((0,Mn.isUndefined)(l))continue;let h=t[u];((0,Mn.isUndefined)(h)||(0,t2.isExpressionOrFactory)(h))&&(n=!0),i[l]=h}if(r.length<e.size||n){let u=r2.DefaultInsertValueNode.create();return XF.ValueListNode.create(i.map(l=>(0,Mn.isUndefined)(l)?u:(0,ZF.parseValueExpression)(l)))}return YF.PrimitiveValueListNode.create(i)}});var Wn=d(Fd=>{"use strict";o();s();Object.defineProperty(Fd,"__esModule",{value:!0});Fd.InsertQueryNode=void 0;var Ud=g();Fd.InsertQueryNode=(0,Ud.freeze)({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return(0,Ud.freeze)({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},createWithoutInto(){return(0,Ud.freeze)({kind:"InsertQueryNode"})},cloneWith(t,e){return(0,Ud.freeze)({...t,...e})}})});var to=d(zd=>{"use strict";o();s();Object.defineProperty(zd,"__esModule",{value:!0});zd.UpdateQueryNode=void 0;var Ln=g(),Qx=Xa();zd.UpdateQueryNode=(0,Ln.freeze)({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return(0,Ln.freeze)({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return(0,Ln.freeze)({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return(0,Ln.freeze)({...t,from:t.from?Qx.FromNode.cloneWithFroms(t.from,e):Qx.FromNode.create(e)})},cloneWithUpdates(t,e){return(0,Ln.freeze)({...t,updates:t.updates?(0,Ln.freeze)([...t.updates,...e]):e})},cloneWithLimit(t,e){return(0,Ln.freeze)({...t,limit:e})}})});var Tw=d(Qd=>{"use strict";o();s();Object.defineProperty(Qd,"__esModule",{value:!0});Qd.UsingNode=void 0;var tu=g();Qd.UsingNode=(0,tu.freeze)({is(t){return t.kind==="UsingNode"},create(t){return(0,tu.freeze)({kind:"UsingNode",tables:(0,tu.freeze)(t)})},cloneWithTables(t,e){return(0,tu.freeze)({...t,tables:(0,tu.freeze)([...t.tables,...e])})}})});var ru=d($d=>{"use strict";o();s();Object.defineProperty($d,"__esModule",{value:!0});$d.DeleteQueryNode=void 0;var Bn=g(),u2=Xa(),$x=eo(),Vx=Tw();$d.DeleteQueryNode=(0,Bn.freeze)({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return(0,Bn.freeze)({kind:"DeleteQueryNode",from:u2.FromNode.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return(0,Bn.freeze)({...t,orderBy:t.orderBy?$x.OrderByNode.cloneWithItems(t.orderBy,e):$x.OrderByNode.create(e)})},cloneWithoutOrderBy(t){return(0,Bn.freeze)({...t,orderBy:void 0})},cloneWithLimit(t,e){return(0,Bn.freeze)({...t,limit:e})},cloneWithoutLimit(t){return(0,Bn.freeze)({...t,limit:void 0})},cloneWithUsing(t,e){return(0,Bn.freeze)({...t,using:t.using!==void 0?Vx.UsingNode.cloneWithTables(t.using,e):Vx.UsingNode.create(e)})}})});var iu=d(Vd=>{"use strict";o();s();Object.defineProperty(Vd,"__esModule",{value:!0});Vd.WhereNode=void 0;var Cw=g(),c2=Fi(),l2=Cn();Vd.WhereNode=(0,Cw.freeze)({is(t){return t.kind==="WhereNode"},create(t){return(0,Cw.freeze)({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return(0,Cw.freeze)({...t,where:e==="And"?c2.AndNode.create(t.where,r):l2.OrNode.create(t.where,r)})}})});var Rw=d(Gd=>{"use strict";o();s();Object.defineProperty(Gd,"__esModule",{value:!0});Gd.ReturningNode=void 0;var ro=g();Gd.ReturningNode=(0,ro.freeze)({is(t){return t.kind==="ReturningNode"},create(t){return(0,ro.freeze)({kind:"ReturningNode",selections:(0,ro.freeze)(t)})},cloneWithSelections(t,e){return(0,ro.freeze)({...t,selections:t.selections?(0,ro.freeze)([...t.selections,...e]):(0,ro.freeze)(e)})}})});var Pw=d(Jd=>{"use strict";o();s();Object.defineProperty(Jd,"__esModule",{value:!0});Jd.ExplainNode=void 0;var Gx=g();Jd.ExplainNode=(0,Gx.freeze)({is(t){return t.kind==="ExplainNode"},create(t,e){return(0,Gx.freeze)({kind:"ExplainNode",format:t,options:e})}})});var io=d(Hd=>{"use strict";o();s();Object.defineProperty(Hd,"__esModule",{value:!0});Hd.WhenNode=void 0;var jw=g();Hd.WhenNode=(0,jw.freeze)({is(t){return t.kind==="WhenNode"},create(t){return(0,jw.freeze)({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return(0,jw.freeze)({...t,result:e})}})});var no=d(Kd=>{"use strict";o();s();Object.defineProperty(Kd,"__esModule",{value:!0});Kd.MergeQueryNode=void 0;var Vi=g(),d2=io();Kd.MergeQueryNode=(0,Vi.freeze)({is(t){return t.kind==="MergeQueryNode"},create(t,e){return(0,Vi.freeze)({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return(0,Vi.freeze)({...t,using:e})},cloneWithWhen(t,e){return(0,Vi.freeze)({...t,whens:t.whens?(0,Vi.freeze)([...t.whens,e]):(0,Vi.freeze)([e])})},cloneWithThen(t,e){return(0,Vi.freeze)({...t,whens:t.whens?(0,Vi.freeze)([...t.whens.slice(0,-1),d2.WhenNode.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}})});var Dw=d(Yd=>{"use strict";o();s();Object.defineProperty(Yd,"__esModule",{value:!0});Yd.OutputNode=void 0;var so=g();Yd.OutputNode=(0,so.freeze)({is(t){return t.kind==="OutputNode"},create(t){return(0,so.freeze)({kind:"OutputNode",selections:(0,so.freeze)(t)})},cloneWithSelections(t,e){return(0,so.freeze)({...t,selections:t.selections?(0,so.freeze)([...t.selections,...e]):(0,so.freeze)(e)})}})});var hi=d(Xd=>{"use strict";o();s();Object.defineProperty(Xd,"__esModule",{value:!0});Xd.QueryNode=void 0;var p2=Wn(),h2=zi(),f2=to(),m2=ru(),Jx=iu(),Pt=g(),Hx=Rw(),y2=Pw(),N2=no(),Kx=Dw();Xd.QueryNode=(0,Pt.freeze)({is(t){return h2.SelectQueryNode.is(t)||p2.InsertQueryNode.is(t)||f2.UpdateQueryNode.is(t)||m2.DeleteQueryNode.is(t)||N2.MergeQueryNode.is(t)},cloneWithEndModifier(t,e){return(0,Pt.freeze)({...t,endModifiers:t.endModifiers?(0,Pt.freeze)([...t.endModifiers,e]):(0,Pt.freeze)([e])})},cloneWithWhere(t,e){return(0,Pt.freeze)({...t,where:t.where?Jx.WhereNode.cloneWithOperation(t.where,"And",e):Jx.WhereNode.create(e)})},cloneWithJoin(t,e){return(0,Pt.freeze)({...t,joins:t.joins?(0,Pt.freeze)([...t.joins,e]):(0,Pt.freeze)([e])})},cloneWithReturning(t,e){return(0,Pt.freeze)({...t,returning:t.returning?Hx.ReturningNode.cloneWithSelections(t.returning,e):Hx.ReturningNode.create(e)})},cloneWithoutReturning(t){return(0,Pt.freeze)({...t,returning:void 0})},cloneWithoutWhere(t){return(0,Pt.freeze)({...t,where:void 0})},cloneWithExplain(t,e,r){return(0,Pt.freeze)({...t,explain:y2.ExplainNode.create(e,r?.toOperationNode())})},cloneWithTop(t,e){return(0,Pt.freeze)({...t,top:e})},cloneWithOutput(t,e){return(0,Pt.freeze)({...t,output:t.output?Kx.OutputNode.cloneWithSelections(t.output,e):Kx.OutputNode.create(e)})}})});var Mw=d(Zd=>{"use strict";o();s();Object.defineProperty(Zd,"__esModule",{value:!0});Zd.ColumnUpdateNode=void 0;var Yx=g();Zd.ColumnUpdateNode=(0,Yx.freeze)({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return(0,Yx.freeze)({kind:"ColumnUpdateNode",column:t,value:e})}})});var tp=d(ep=>{"use strict";o();s();Object.defineProperty(ep,"__esModule",{value:!0});ep.parseUpdate=O2;ep.parseUpdateObjectExpression=eA;var _2=Nt(),Xx=Mw(),w2=$i(),g2=g(),Zx=Br(),b2=dt();function O2(...t){return t.length===2?[Xx.ColumnUpdateNode.create((0,b2.parseReferenceExpression)(t[0]),(0,Zx.parseValueExpression)(t[1]))]:eA(t[0])}function eA(t){let e=(0,g2.isFunction)(t)?t((0,w2.expressionBuilder)()):t;return Object.entries(e).filter(([r,i])=>i!==void 0).map(([r,i])=>Xx.ColumnUpdateNode.create(_2.ColumnNode.create(r),(0,Zx.parseValueExpression)(i)))}});var Ww=d(rp=>{"use strict";o();s();Object.defineProperty(rp,"__esModule",{value:!0});rp.OnDuplicateKeyNode=void 0;var tA=g();rp.OnDuplicateKeyNode=(0,tA.freeze)({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return(0,tA.freeze)({kind:"OnDuplicateKeyNode",updates:t})}})});var Bw=d(ip=>{"use strict";o();s();Object.defineProperty(ip,"__esModule",{value:!0});ip.InsertResult=void 0;var Lw=class{insertId;numInsertedOrUpdatedRows;constructor(e,r){this.insertId=e,this.numInsertedOrUpdatedRows=r}};ip.InsertResult=Lw});var kn=d(nu=>{"use strict";o();s();Object.defineProperty(nu,"__esModule",{value:!0});nu.NoResultError=void 0;nu.isNoResultErrorConstructor=E2;var kw=class extends Error{node;constructor(e){super("no result"),this.node=e}};nu.NoResultError=kw;function E2(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}});var sp=d(np=>{"use strict";o();s();Object.defineProperty(np,"__esModule",{value:!0});np.OnConflictNode=void 0;var fi=g(),Gi=iu();np.OnConflictNode=(0,fi.freeze)({is(t){return t.kind==="OnConflictNode"},create(){return(0,fi.freeze)({kind:"OnConflictNode"})},cloneWith(t,e){return(0,fi.freeze)({...t,...e})},cloneWithIndexWhere(t,e){return(0,fi.freeze)({...t,indexWhere:t.indexWhere?Gi.WhereNode.cloneWithOperation(t.indexWhere,"And",e):Gi.WhereNode.create(e)})},cloneWithIndexOrWhere(t,e){return(0,fi.freeze)({...t,indexWhere:t.indexWhere?Gi.WhereNode.cloneWithOperation(t.indexWhere,"Or",e):Gi.WhereNode.create(e)})},cloneWithUpdateWhere(t,e){return(0,fi.freeze)({...t,updateWhere:t.updateWhere?Gi.WhereNode.cloneWithOperation(t.updateWhere,"And",e):Gi.WhereNode.create(e)})},cloneWithUpdateOrWhere(t,e){return(0,fi.freeze)({...t,updateWhere:t.updateWhere?Gi.WhereNode.cloneWithOperation(t.updateWhere,"Or",e):Gi.WhereNode.create(e)})},cloneWithoutIndexWhere(t){return(0,fi.freeze)({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return(0,fi.freeze)({...t,updateWhere:void 0})}})});var Fw=d(Ji=>{"use strict";o();s();Object.defineProperty(Ji,"__esModule",{value:!0});Ji.OnConflictUpdateBuilder=Ji.OnConflictDoNothingBuilder=Ji.OnConflictBuilder=void 0;var rA=Nt(),S2=Pe(),ir=sp(),op=Qt(),v2=tp(),Un=g(),Uw=pe(),ap=class t{#e;constructor(e){this.#e=(0,Un.freeze)(e)}column(e){let r=rA.ColumnNode.create(e);return new t({...this.#e,onConflictNode:ir.OnConflictNode.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?(0,Un.freeze)([...this.#e.onConflictNode.columns,r]):(0,Un.freeze)([r])})})}columns(e){let r=e.map(rA.ColumnNode.create);return new t({...this.#e,onConflictNode:ir.OnConflictNode.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?(0,Un.freeze)([...this.#e.onConflictNode.columns,...r]):(0,Un.freeze)(r)})})}constraint(e){return new t({...this.#e,onConflictNode:ir.OnConflictNode.cloneWith(this.#e.onConflictNode,{constraint:S2.IdentifierNode.create(e)})})}expression(e){return new t({...this.#e,onConflictNode:ir.OnConflictNode.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new t({...this.#e,onConflictNode:ir.OnConflictNode.cloneWithIndexWhere(this.#e.onConflictNode,(0,op.parseValueBinaryOperationOrExpression)(e))})}whereRef(e,r,i){return new t({...this.#e,onConflictNode:ir.OnConflictNode.cloneWithIndexWhere(this.#e.onConflictNode,(0,op.parseReferentialBinaryOperation)(e,r,i))})}clearWhere(){return new t({...this.#e,onConflictNode:ir.OnConflictNode.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new su({...this.#e,onConflictNode:ir.OnConflictNode.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new ou({...this.#e,onConflictNode:ir.OnConflictNode.cloneWith(this.#e.onConflictNode,{updates:(0,v2.parseUpdateObjectExpression)(e)})})}$call(e){return e(this)}};Ji.OnConflictBuilder=ap;(0,Uw.preventAwait)(ap,"don't await OnConflictBuilder instances.");var su=class{#e;constructor(e){this.#e=(0,Un.freeze)(e)}toOperationNode(){return this.#e.onConflictNode}};Ji.OnConflictDoNothingBuilder=su;(0,Uw.preventAwait)(su,"don't await OnConflictDoNothingBuilder instances.");var ou=class t{#e;constructor(e){this.#e=(0,Un.freeze)(e)}where(...e){return new t({...this.#e,onConflictNode:ir.OnConflictNode.cloneWithUpdateWhere(this.#e.onConflictNode,(0,op.parseValueBinaryOperationOrExpression)(e))})}whereRef(e,r,i){return new t({...this.#e,onConflictNode:ir.OnConflictNode.cloneWithUpdateWhere(this.#e.onConflictNode,(0,op.parseReferentialBinaryOperation)(e,r,i))})}clearWhere(){return new t({...this.#e,onConflictNode:ir.OnConflictNode.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}};Ji.OnConflictUpdateBuilder=ou;(0,Uw.preventAwait)(ou,"don't await OnConflictUpdateBuilder instances.")});var zw=d(up=>{"use strict";o();s();Object.defineProperty(up,"__esModule",{value:!0});up.TopNode=void 0;var iA=g();up.TopNode=(0,iA.freeze)({is(t){return t.kind==="TopNode"},create(t,e){return(0,iA.freeze)({kind:"TopNode",expression:t,modifiers:e})}})});var oo=d($w=>{"use strict";o();s();Object.defineProperty($w,"__esModule",{value:!0});$w.parseTop=q2;var I2=zw(),Qw=g();function q2(t,e){if(!(0,Qw.isNumber)(t)&&!(0,Qw.isBigInt)(t))throw new Error(`Invalid top expression: ${t}`);if(!(0,Qw.isUndefined)(e)&&!x2(e))throw new Error(`Invalid top modifiers: ${e}`);return I2.TopNode.create(t,e)}function x2(t){return t==="percent"||t==="with ties"||t==="percent with ties"}});var Vw=d(dp=>{"use strict";o();s();Object.defineProperty(dp,"__esModule",{value:!0});dp.InsertQueryBuilder=void 0;var cp=Qi(),A2=Aw(),Fn=Wn(),Hi=hi(),T2=tp(),C2=pe(),nA=g(),R2=Ww(),P2=Bw(),sA=kn(),j2=yr(),D2=Nt(),M2=Fw(),W2=sp(),L2=oo(),lp=class t{#e;constructor(e){this.#e=(0,nA.freeze)(e)}values(e){let[r,i]=(0,A2.parseInsertExpression)(e);return new t({...this.#e,queryNode:Fn.InsertQueryNode.cloneWith(this.#e.queryNode,{columns:r,values:i})})}columns(e){return new t({...this.#e,queryNode:Fn.InsertQueryNode.cloneWith(this.#e.queryNode,{columns:(0,nA.freeze)(e.map(D2.ColumnNode.create))})})}expression(e){return new t({...this.#e,queryNode:Fn.InsertQueryNode.cloneWith(this.#e.queryNode,{values:(0,j2.parseExpression)(e)})})}defaultValues(){return new t({...this.#e,queryNode:Fn.InsertQueryNode.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new t({...this.#e,queryNode:Hi.QueryNode.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new t({...this.#e,queryNode:Fn.InsertQueryNode.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,r){return new t({...this.#e,queryNode:Hi.QueryNode.cloneWithTop(this.#e.queryNode,(0,L2.parseTop)(e,r))})}onConflict(e){return new t({...this.#e,queryNode:Fn.InsertQueryNode.cloneWith(this.#e.queryNode,{onConflict:e(new M2.OnConflictBuilder({onConflictNode:W2.OnConflictNode.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new t({...this.#e,queryNode:Fn.InsertQueryNode.cloneWith(this.#e.queryNode,{onDuplicateKey:R2.OnDuplicateKeyNode.create((0,T2.parseUpdateObjectExpression)(e))})})}returning(e){return new t({...this.#e,queryNode:Hi.QueryNode.cloneWithReturning(this.#e.queryNode,(0,cp.parseSelectArg)(e))})}returningAll(){return new t({...this.#e,queryNode:Hi.QueryNode.cloneWithReturning(this.#e.queryNode,(0,cp.parseSelectAll)())})}output(e){return new t({...this.#e,queryNode:Hi.QueryNode.cloneWithOutput(this.#e.queryNode,(0,cp.parseSelectArg)(e))})}outputAll(e){return new t({...this.#e,queryNode:Hi.QueryNode.cloneWithOutput(this.#e.queryNode,(0,cp.parseSelectAll)(e))})}clearReturning(){return new t({...this.#e,queryNode:Hi.QueryNode.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new P2.InsertResult(r.insertId,r.numAffectedRows??r.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=sA.NoResultError){let r=await this.executeTakeFirst();if(r===void 0)throw(0,sA.isNoResultErrorConstructor)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:Hi.QueryNode.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};dp.InsertQueryBuilder=lp;(0,C2.preventAwait)(lp,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.")});var Jw=d(pp=>{"use strict";o();s();Object.defineProperty(pp,"__esModule",{value:!0});pp.DeleteResult=void 0;var Gw=class{numDeletedRows;constructor(e){this.numDeletedRows=e}};pp.DeleteResult=Gw});var au=d(hp=>{"use strict";o();s();Object.defineProperty(hp,"__esModule",{value:!0});hp.LimitNode=void 0;var oA=g();hp.LimitNode=(0,oA.freeze)({is(t){return t.kind==="LimitNode"},create(t){return(0,oA.freeze)({kind:"LimitNode",limit:t})}})});var Hw=d(Np=>{"use strict";o();s();Object.defineProperty(Np,"__esModule",{value:!0});Np.DeleteQueryBuilder=void 0;var fp=cu(),B2=_t(),mp=Qi(),vt=hi(),k2=pe(),U2=g(),aA=kn(),F2=Jw(),uu=ru(),z2=au(),Q2=Ys(),uA=Qt(),$2=Br(),V2=oo(),yp=class t{#e;constructor(e){this.#e=(0,U2.freeze)(e)}where(...e){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithWhere(this.#e.queryNode,(0,uA.parseValueBinaryOperationOrExpression)(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithWhere(this.#e.queryNode,(0,uA.parseReferentialBinaryOperation)(e,r,i))})}clearWhere(){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithoutWhere(this.#e.queryNode)})}top(e,r){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithTop(this.#e.queryNode,(0,V2.parseTop)(e,r))})}using(e){return new t({...this.#e,queryNode:uu.DeleteQueryNode.cloneWithUsing(this.#e.queryNode,(0,B2.parseTableExpressionOrList)(e))})}innerJoin(...e){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithJoin(this.#e.queryNode,(0,fp.parseJoin)("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithJoin(this.#e.queryNode,(0,fp.parseJoin)("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithJoin(this.#e.queryNode,(0,fp.parseJoin)("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithJoin(this.#e.queryNode,(0,fp.parseJoin)("FullJoin",e))})}returning(e){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithReturning(this.#e.queryNode,(0,mp.parseSelectArg)(e))})}returningAll(e){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithReturning(this.#e.queryNode,(0,mp.parseSelectAll)(e))})}output(e){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithOutput(this.#e.queryNode,(0,mp.parseSelectArg)(e))})}outputAll(e){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithOutput(this.#e.queryNode,(0,mp.parseSelectAll)(e))})}clearReturning(){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new t({...this.#e,queryNode:uu.DeleteQueryNode.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new t({...this.#e,queryNode:uu.DeleteQueryNode.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,r){return new t({...this.#e,queryNode:uu.DeleteQueryNode.cloneWithOrderByItems(this.#e.queryNode,(0,Q2.parseOrderBy)([e,r]))})}limit(e){return new t({...this.#e,queryNode:uu.DeleteQueryNode.cloneWithLimit(this.#e.queryNode,z2.LimitNode.create((0,$2.parseValueExpression)(e)))})}modifyEnd(e){return new t({...this.#e,queryNode:vt.QueryNode.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new F2.DeleteResult(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=aA.NoResultError){let r=await this.executeTakeFirst();if(r===void 0)throw(0,aA.isNoResultErrorConstructor)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:vt.QueryNode.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};Np.DeleteQueryBuilder=yp;(0,k2.preventAwait)(yp,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.")});var Yw=d(_p=>{"use strict";o();s();Object.defineProperty(_p,"__esModule",{value:!0});_p.UpdateResult=void 0;var Kw=class{numUpdatedRows;numChangedRows;constructor(e,r){this.numUpdatedRows=e,this.numChangedRows=r}};_p.UpdateResult=Kw});var Ep=d(Op=>{"use strict";o();s();Object.defineProperty(Op,"__esModule",{value:!0});Op.UpdateQueryBuilder=void 0;var wp=cu(),G2=_t(),gp=Qi(),It=hi(),Xw=to(),J2=tp(),H2=pe(),K2=g(),Y2=Yw(),cA=kn(),lA=Qt(),X2=Br(),Z2=au(),ez=oo(),bp=class t{#e;constructor(e){this.#e=(0,K2.freeze)(e)}where(...e){return new t({...this.#e,queryNode:It.QueryNode.cloneWithWhere(this.#e.queryNode,(0,lA.parseValueBinaryOperationOrExpression)(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:It.QueryNode.cloneWithWhere(this.#e.queryNode,(0,lA.parseReferentialBinaryOperation)(e,r,i))})}clearWhere(){return new t({...this.#e,queryNode:It.QueryNode.cloneWithoutWhere(this.#e.queryNode)})}top(e,r){return new t({...this.#e,queryNode:It.QueryNode.cloneWithTop(this.#e.queryNode,(0,ez.parseTop)(e,r))})}from(e){return new t({...this.#e,queryNode:Xw.UpdateQueryNode.cloneWithFromItems(this.#e.queryNode,(0,G2.parseTableExpressionOrList)(e))})}innerJoin(...e){return new t({...this.#e,queryNode:It.QueryNode.cloneWithJoin(this.#e.queryNode,(0,wp.parseJoin)("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:It.QueryNode.cloneWithJoin(this.#e.queryNode,(0,wp.parseJoin)("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:It.QueryNode.cloneWithJoin(this.#e.queryNode,(0,wp.parseJoin)("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:It.QueryNode.cloneWithJoin(this.#e.queryNode,(0,wp.parseJoin)("FullJoin",e))})}limit(e){return new t({...this.#e,queryNode:Xw.UpdateQueryNode.cloneWithLimit(this.#e.queryNode,Z2.LimitNode.create((0,X2.parseValueExpression)(e)))})}set(...e){return new t({...this.#e,queryNode:Xw.UpdateQueryNode.cloneWithUpdates(this.#e.queryNode,(0,J2.parseUpdate)(...e))})}returning(e){return new t({...this.#e,queryNode:It.QueryNode.cloneWithReturning(this.#e.queryNode,(0,gp.parseSelectArg)(e))})}returningAll(e){return new t({...this.#e,queryNode:It.QueryNode.cloneWithReturning(this.#e.queryNode,(0,gp.parseSelectAll)(e))})}output(e){return new t({...this.#e,queryNode:It.QueryNode.cloneWithOutput(this.#e.queryNode,(0,gp.parseSelectArg)(e))})}outputAll(e){return new t({...this.#e,queryNode:It.QueryNode.cloneWithOutput(this.#e.queryNode,(0,gp.parseSelectAll)(e))})}modifyEnd(e){return new t({...this.#e,queryNode:It.QueryNode.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new t({...this.#e,queryNode:It.QueryNode.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new Y2.UpdateResult(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0),r.numChangedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=cA.NoResultError){let r=await this.executeTakeFirst();if(r===void 0)throw(0,cA.isNoResultErrorConstructor)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:It.QueryNode.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};Op.UpdateQueryBuilder=bp;(0,H2.preventAwait)(bp,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.")});var eg=d(Sp=>{"use strict";o();s();Object.defineProperty(Sp,"__esModule",{value:!0});Sp.CommonTableExpressionNameNode=void 0;var Zw=g(),tz=Nt(),rz=Ks();Sp.CommonTableExpressionNameNode=(0,Zw.freeze)({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return(0,Zw.freeze)({kind:"CommonTableExpressionNameNode",table:rz.TableNode.create(t),columns:e?(0,Zw.freeze)(e.map(tz.ColumnNode.create)):void 0})}})});var Ip=d(vp=>{"use strict";o();s();Object.defineProperty(vp,"__esModule",{value:!0});vp.CommonTableExpressionNode=void 0;var tg=g();vp.CommonTableExpressionNode=(0,tg.freeze)({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return(0,tg.freeze)({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return(0,tg.freeze)({...t,...e})}})});var pA=d(xp=>{"use strict";o();s();Object.defineProperty(xp,"__esModule",{value:!0});xp.CTEBuilder=void 0;var dA=Ip(),iz=pe(),nz=g(),qp=class t{#e;constructor(e){this.#e=(0,nz.freeze)(e)}materialized(){return new t({...this.#e,node:dA.CommonTableExpressionNode.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new t({...this.#e,node:dA.CommonTableExpressionNode.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}};xp.CTEBuilder=qp;(0,iz.preventAwait)(qp,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.")});var yA=d(rg=>{"use strict";o();s();Object.defineProperty(rg,"__esModule",{value:!0});rg.parseCommonTableExpression=uz;var hA=eg(),sz=Ap(),oz=g(),az=pA(),fA=Ip();function uz(t,e){let r=e((0,sz.createQueryCreator)()).toOperationNode();return(0,oz.isFunction)(t)?t(cz(r)).toOperationNode():fA.CommonTableExpressionNode.create(mA(t),r)}function cz(t){return e=>new az.CTEBuilder({node:fA.CommonTableExpressionNode.create(mA(e),t)})}function mA(t){if(t.includes("(")){let e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(n=>n.trim());return hA.CommonTableExpressionNameNode.create(r,i)}else return hA.CommonTableExpressionNameNode.create(t)}});var ig=d(Tp=>{"use strict";o();s();Object.defineProperty(Tp,"__esModule",{value:!0});Tp.WithNode=void 0;var lu=g();Tp.WithNode=(0,lu.freeze)({is(t){return t.kind==="WithNode"},create(t,e){return(0,lu.freeze)({kind:"WithNode",expressions:(0,lu.freeze)([t]),...e})},cloneWithExpression(t,e){return(0,lu.freeze)({...t,expressions:(0,lu.freeze)([...t.expressions,e])})}})});var sg=d(ng=>{"use strict";o();s();Object.defineProperty(ng,"__esModule",{value:!0});ng.randomString=lz;var NA=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function lz(t){let e="";for(let r=0;r<t;++r)e+=dz();return e}function dz(){return NA[~~(Math.random()*NA.length)]}});var zn=d(ag=>{"use strict";o();s();Object.defineProperty(ag,"__esModule",{value:!0});ag.createQueryId=hz;var pz=sg();function hz(){return new og}var og=class{#e;get queryId(){return this.#e===void 0&&(this.#e=(0,pz.randomString)(8)),this.#e}}});var _A=d(ug=>{"use strict";o();s();Object.defineProperty(ug,"__esModule",{value:!0});ug.requireAllProps=fz;function fz(t){return t}});var ao=d(Rp=>{"use strict";o();s();Object.defineProperty(Rp,"__esModule",{value:!0});Rp.OperationNodeTransformer=void 0;var Cp=g(),T=_A(),cg=class{nodeStack=[];#e=(0,Cp.freeze)({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);let r=this.transformNodeImpl(e);return this.nodeStack.pop(),(0,Cp.freeze)(r)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&(0,Cp.freeze)(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return(0,T.requireAllProps)({kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)})}transformSelection(e){return(0,T.requireAllProps)({kind:"SelectionNode",selection:this.transformNode(e.selection)})}transformColumn(e){return(0,T.requireAllProps)({kind:"ColumnNode",column:this.transformNode(e.column)})}transformAlias(e){return(0,T.requireAllProps)({kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)})}transformTable(e){return(0,T.requireAllProps)({kind:"TableNode",table:this.transformNode(e.table)})}transformFrom(e){return(0,T.requireAllProps)({kind:"FromNode",froms:this.transformNodeList(e.froms)})}transformReference(e){return(0,T.requireAllProps)({kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)})}transformAnd(e){return(0,T.requireAllProps)({kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)})}transformOr(e){return(0,T.requireAllProps)({kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)})}transformValueList(e){return(0,T.requireAllProps)({kind:"ValueListNode",values:this.transformNodeList(e.values)})}transformParens(e){return(0,T.requireAllProps)({kind:"ParensNode",node:this.transformNode(e.node)})}transformJoin(e){return(0,T.requireAllProps)({kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)})}transformRaw(e){return(0,T.requireAllProps)({kind:"RawNode",sqlFragments:(0,Cp.freeze)([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)})}transformWhere(e){return(0,T.requireAllProps)({kind:"WhereNode",where:this.transformNode(e.where)})}transformInsertQuery(e){return(0,T.requireAllProps)({kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)})}transformValues(e){return(0,T.requireAllProps)({kind:"ValuesNode",values:this.transformNodeList(e.values)})}transformDeleteQuery(e){return(0,T.requireAllProps)({kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)})}transformReturning(e){return(0,T.requireAllProps)({kind:"ReturningNode",selections:this.transformNodeList(e.selections)})}transformCreateTable(e){return(0,T.requireAllProps)({kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)})}transformColumnDefinition(e){return(0,T.requireAllProps)({kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists})}transformAddColumn(e){return(0,T.requireAllProps)({kind:"AddColumnNode",column:this.transformNode(e.column)})}transformDropTable(e){return(0,T.requireAllProps)({kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade})}transformOrderBy(e){return(0,T.requireAllProps)({kind:"OrderByNode",items:this.transformNodeList(e.items)})}transformOrderByItem(e){return(0,T.requireAllProps)({kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)})}transformGroupBy(e){return(0,T.requireAllProps)({kind:"GroupByNode",items:this.transformNodeList(e.items)})}transformGroupByItem(e){return(0,T.requireAllProps)({kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)})}transformUpdateQuery(e){return(0,T.requireAllProps)({kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)})}transformColumnUpdate(e){return(0,T.requireAllProps)({kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)})}transformLimit(e){return(0,T.requireAllProps)({kind:"LimitNode",limit:this.transformNode(e.limit)})}transformOffset(e){return(0,T.requireAllProps)({kind:"OffsetNode",offset:this.transformNode(e.offset)})}transformOnConflict(e){return(0,T.requireAllProps)({kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing})}transformOnDuplicateKey(e){return(0,T.requireAllProps)({kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)})}transformCreateIndex(e){return(0,T.requireAllProps)({kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct})}transformList(e){return(0,T.requireAllProps)({kind:"ListNode",items:this.transformNodeList(e.items)})}transformDropIndex(e){return(0,T.requireAllProps)({kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade})}transformPrimaryKeyConstraint(e){return(0,T.requireAllProps)({kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)})}transformUniqueConstraint(e){return(0,T.requireAllProps)({kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct})}transformForeignKeyConstraint(e){return(0,T.requireAllProps)({kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate})}transformSetOperation(e){return(0,T.requireAllProps)({kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all})}transformReferences(e){return(0,T.requireAllProps)({kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate})}transformCheckConstraint(e){return(0,T.requireAllProps)({kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)})}transformWith(e){return(0,T.requireAllProps)({kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive})}transformCommonTableExpression(e){return(0,T.requireAllProps)({kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)})}transformCommonTableExpressionName(e){return(0,T.requireAllProps)({kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)})}transformHaving(e){return(0,T.requireAllProps)({kind:"HavingNode",having:this.transformNode(e.having)})}transformCreateSchema(e){return(0,T.requireAllProps)({kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists})}transformDropSchema(e){return(0,T.requireAllProps)({kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade})}transformAlterTable(e){return(0,T.requireAllProps)({kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)})}transformDropColumn(e){return(0,T.requireAllProps)({kind:"DropColumnNode",column:this.transformNode(e.column)})}transformRenameColumn(e){return(0,T.requireAllProps)({kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)})}transformAlterColumn(e){return(0,T.requireAllProps)({kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull})}transformModifyColumn(e){return(0,T.requireAllProps)({kind:"ModifyColumnNode",column:this.transformNode(e.column)})}transformAddConstraint(e){return(0,T.requireAllProps)({kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)})}transformDropConstraint(e){return(0,T.requireAllProps)({kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier})}transformCreateView(e){return(0,T.requireAllProps)({kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)})}transformDropView(e){return(0,T.requireAllProps)({kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade})}transformGenerated(e){return(0,T.requireAllProps)({kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)})}transformDefaultValue(e){return(0,T.requireAllProps)({kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)})}transformOn(e){return(0,T.requireAllProps)({kind:"OnNode",on:this.transformNode(e.on)})}transformSelectModifier(e){return(0,T.requireAllProps)({kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)})}transformCreateType(e){return(0,T.requireAllProps)({kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)})}transformDropType(e){return(0,T.requireAllProps)({kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists})}transformExplain(e){return(0,T.requireAllProps)({kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)})}transformSchemableIdentifier(e){return(0,T.requireAllProps)({kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)})}transformAggregateFunction(e){return(0,T.requireAllProps)({kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)})}transformOver(e){return(0,T.requireAllProps)({kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)})}transformPartitionBy(e){return(0,T.requireAllProps)({kind:"PartitionByNode",items:this.transformNodeList(e.items)})}transformPartitionByItem(e){return(0,T.requireAllProps)({kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)})}transformBinaryOperation(e){return(0,T.requireAllProps)({kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)})}transformUnaryOperation(e){return(0,T.requireAllProps)({kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)})}transformUsing(e){return(0,T.requireAllProps)({kind:"UsingNode",tables:this.transformNodeList(e.tables)})}transformFunction(e){return(0,T.requireAllProps)({kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)})}transformCase(e){return(0,T.requireAllProps)({kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement})}transformWhen(e){return(0,T.requireAllProps)({kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)})}transformJSONReference(e){return(0,T.requireAllProps)({kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)})}transformJSONPath(e){return(0,T.requireAllProps)({kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)})}transformJSONPathLeg(e){return(0,T.requireAllProps)({kind:"JSONPathLegNode",type:e.type,value:e.value})}transformJSONOperatorChain(e){return(0,T.requireAllProps)({kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)})}transformTuple(e){return(0,T.requireAllProps)({kind:"TupleNode",values:this.transformNodeList(e.values)})}transformMergeQuery(e){return(0,T.requireAllProps)({kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)})}transformMatched(e){return(0,T.requireAllProps)({kind:"MatchedNode",not:e.not,bySource:e.bySource})}transformAddIndex(e){return(0,T.requireAllProps)({kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists})}transformCast(e){return(0,T.requireAllProps)({kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)})}transformFetch(e){return(0,T.requireAllProps)({kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier})}transformTop(e){return(0,T.requireAllProps)({kind:"TopNode",expression:e.expression,modifiers:e.modifiers})}transformOutput(e){return(0,T.requireAllProps)({kind:"OutputNode",selections:this.transformNodeList(e.selections)})}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}};Rp.OperationNodeTransformer=cg});var wA=d(Pp=>{"use strict";o();s();Object.defineProperty(Pp,"__esModule",{value:!0});Pp.WithSchemaTransformer=void 0;var mz=Wr(),yz=Pe(),Nz=ao(),_z=Ui(),lg=Ks(),wz=g(),gz=(0,wz.freeze)({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),dg=class extends Nz.OperationNodeTransformer{#e;#t=new Set;#r=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#i(e))return super.transformNodeImpl(e);let r=this.#a(e);for(let a of r)this.#r.add(a);let i=this.#n(e);for(let a of i)this.#t.add(a);let n=super.transformNodeImpl(e);for(let a of i)this.#t.delete(a);for(let a of r)this.#r.delete(a);return n}transformSchemableIdentifier(e){let r=super.transformSchemableIdentifier(e);return r.schema||!this.#t.has(e.identifier.name)?r:{...r,schema:yz.IdentifierNode.create(this.#e)}}transformReferences(e){let r=super.transformReferences(e);return r.table.table.schema?r:{...r,table:lg.TableNode.createWithSchema(this.#e,r.table.table.identifier.name)}}#i(e){return e.kind in gz}#n(e){let r=new Set;if("name"in e&&e.name&&_z.SchemableIdentifierNode.is(e.name)&&this.#o(e.name,r),"from"in e&&e.from)for(let i of e.from.froms)this.#s(i,r);if("into"in e&&e.into&&this.#s(e.into,r),"table"in e&&e.table&&this.#s(e.table,r),"joins"in e&&e.joins)for(let i of e.joins)this.#s(i.table,r);return"using"in e&&e.using&&this.#s(e.using,r),r}#a(e){let r=new Set;return"with"in e&&e.with&&this.#u(e.with,r),r}#s(e,r){let i=lg.TableNode.is(e)?e:mz.AliasNode.is(e)&&lg.TableNode.is(e.node)?e.node:null;i&&this.#o(i.table,r)}#o(e,r){let i=e.identifier.name;!this.#t.has(i)&&!this.#r.has(i)&&r.add(i)}#u(e,r){for(let i of e.expressions){let n=i.name.table.table.identifier.name;this.#r.has(n)||r.add(n)}}};Pp.WithSchemaTransformer=dg});var Qn=d(jp=>{"use strict";o();s();Object.defineProperty(jp,"__esModule",{value:!0});jp.WithSchemaPlugin=void 0;var bz=wA(),pg=class{#e;constructor(e){this.#e=new bz.WithSchemaTransformer(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}};jp.WithSchemaPlugin=pg});var hg=d(Dp=>{"use strict";o();s();Object.defineProperty(Dp,"__esModule",{value:!0});Dp.MatchedNode=void 0;var gA=g();Dp.MatchedNode=(0,gA.freeze)({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return(0,gA.freeze)({kind:"MatchedNode",not:t,bySource:e})}})});var bA=d(Mp=>{"use strict";o();s();Object.defineProperty(Mp,"__esModule",{value:!0});Mp.parseMergeWhen=qz;Mp.parseMergeThen=xz;var Oz=hg(),Ez=zt(),Sz=di(),vz=io(),Iz=g(),fg=Qt();function qz(t,e,r){return vz.WhenNode.create((0,fg.parseFilterList)([Oz.MatchedNode.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&r?(0,fg.parseReferentialBinaryOperation)(e[0],e[1],e[2]):(0,fg.parseValueBinaryOperationOrExpression)(e)]:[]],"and",!1))}function xz(t){return(0,Iz.isString)(t)?Sz.RawNode.create([t],[]):(0,Ez.isOperationNodeSource)(t)?t.toOperationNode():t}});var yg=d(Wp=>{"use strict";o();s();Object.defineProperty(Wp,"__esModule",{value:!0});Wp.Deferred=void 0;var mg=class{#e;#t;#r;constructor(){this.#e=new Promise((e,r)=>{this.#r=r,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#r&&this.#r(e)}};Wp.Deferred=mg});var _g=d(Ng=>{"use strict";o();s();Object.defineProperty(Ng,"__esModule",{value:!0});Ng.logOnce=Az;var OA=new Set;function Az(t){OA.has(t)||(OA.add(t),console.log(t))}});var gg=d(Lp=>{"use strict";o();s();Object.defineProperty(Lp,"__esModule",{value:!0});Lp.QueryExecutorBase=void 0;var Tz=g(),EA=yg(),Cz=_g(),Rz=(0,Tz.freeze)([]),wg=class{#e;constructor(e=Rz){this.#e=e}get plugins(){return this.#e}transformQuery(e,r){for(let i of this.#e){let n=i.transformQuery({node:e,queryId:r});if(n.kind===e.kind)e=n;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${n.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async i=>{let n=await i.executeQuery(e),a=await this.#t(n,r);return Pz(n,a),a})}async*stream(e,r,i){let n=new EA.Deferred,a=new EA.Deferred;this.provideConnection(async l=>(n.resolve(l),await a.promise)).catch(l=>n.reject(l));let u=await n.promise;try{for await(let l of u.streamQuery(e,r))yield await this.#t(l,i)}finally{a.resolve()}}async#t(e,r){for(let i of this.#e)e=await i.transformResult({result:e,queryId:r});return e}};Lp.QueryExecutorBase=wg;function Pz(t,e){let{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||(0,Cz.logOnce)("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}});var co=d(uo=>{"use strict";o();s();Object.defineProperty(uo,"__esModule",{value:!0});uo.NOOP_QUERY_EXECUTOR=uo.NoopQueryExecutor=void 0;var jz=gg(),Bp=class t extends jz.QueryExecutorBase{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new t([...this.plugins,e])}withPlugins(e){return new t([...this.plugins,...e])}withPluginAtFront(e){return new t([e,...this.plugins])}withoutPlugins(){return new t([])}};uo.NoopQueryExecutor=Bp;uo.NOOP_QUERY_EXECUTOR=new Bp});var Og=d(kp=>{"use strict";o();s();Object.defineProperty(kp,"__esModule",{value:!0});kp.MergeResult=void 0;var bg=class{numChangedRows;constructor(e){this.numChangedRows=e}};kp.MergeResult=bg});var Eg=d(kr=>{"use strict";o();s();Object.defineProperty(kr,"__esModule",{value:!0});kr.NotMatchedThenableMergeQueryBuilder=kr.MatchedThenableMergeQueryBuilder=kr.WheneableMergeQueryBuilder=kr.MergeQueryBuilder=void 0;var SA=Wn(),Yi=no(),Ki=hi(),Dz=to(),Mz=Aw(),Wz=cu(),$n=bA(),Up=Qi(),IA=oo(),Lz=co(),zp=g(),Qp=pe(),Bz=Og(),vA=kn(),kz=Ep(),Fp=class t{#e;constructor(e){this.#e=(0,zp.freeze)(e)}modifyEnd(e){return new t({...this.#e,queryNode:Ki.QueryNode.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,r){return new t({...this.#e,queryNode:Ki.QueryNode.cloneWithTop(this.#e.queryNode,(0,IA.parseTop)(e,r))})}using(...e){return new Ur({...this.#e,queryNode:Yi.MergeQueryNode.cloneWithUsing(this.#e.queryNode,(0,Wz.parseJoin)("Using",e))})}output(e){return new t({...this.#e,queryNode:Ki.QueryNode.cloneWithOutput(this.#e.queryNode,(0,Up.parseSelectArg)(e))})}outputAll(e){return new t({...this.#e,queryNode:Ki.QueryNode.cloneWithOutput(this.#e.queryNode,(0,Up.parseSelectAll)(e))})}};kr.MergeQueryBuilder=Fp;(0,Qp.preventAwait)(Fp,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var Ur=class t{#e;constructor(e){this.#e=(0,zp.freeze)(e)}modifyEnd(e){return new t({...this.#e,queryNode:Ki.QueryNode.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,r){return new t({...this.#e,queryNode:Ki.QueryNode.cloneWithTop(this.#e.queryNode,(0,IA.parseTop)(e,r))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,r,i){return this.#t([e,r,i],!0)}#t(e,r){return new lo({...this.#e,queryNode:Yi.MergeQueryNode.cloneWithWhen(this.#e.queryNode,(0,$n.parseMergeWhen)({isMatched:!0},e,r))})}whenNotMatched(){return this.#r([])}whenNotMatchedAnd(...e){return this.#r(e)}whenNotMatchedAndRef(e,r,i){return this.#r([e,r,i],!0)}whenNotMatchedBySource(){return this.#r([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#r(e,!1,!0)}whenNotMatchedBySourceAndRef(e,r,i){return this.#r([e,r,i],!0,!0)}output(e){return new t({...this.#e,queryNode:Ki.QueryNode.cloneWithOutput(this.#e.queryNode,(0,Up.parseSelectArg)(e))})}outputAll(e){return new t({...this.#e,queryNode:Ki.QueryNode.cloneWithOutput(this.#e.queryNode,(0,Up.parseSelectAll)(e))})}#r(e,r=!1,i=!1){let n={...this.#e,queryNode:Yi.MergeQueryNode.cloneWithWhen(this.#e.queryNode,(0,$n.parseMergeWhen)({isMatched:!1,bySource:i},e,r))},a=i?lo:du;return new a(n)}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?r.rows:[new Bz.MergeResult(r.numAffectedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=vA.NoResultError){let r=await this.executeTakeFirst();if(r===void 0)throw(0,vA.isNoResultErrorConstructor)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}};kr.WheneableMergeQueryBuilder=Ur;(0,Qp.preventAwait)(Ur,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");var lo=class{#e;constructor(e){this.#e=(0,zp.freeze)(e)}thenDelete(){return new Ur({...this.#e,queryNode:Yi.MergeQueryNode.cloneWithThen(this.#e.queryNode,(0,$n.parseMergeThen)("delete"))})}thenDoNothing(){return new Ur({...this.#e,queryNode:Yi.MergeQueryNode.cloneWithThen(this.#e.queryNode,(0,$n.parseMergeThen)("do nothing"))})}thenUpdate(e){return new Ur({...this.#e,queryNode:Yi.MergeQueryNode.cloneWithThen(this.#e.queryNode,(0,$n.parseMergeThen)(e(new kz.UpdateQueryBuilder({queryId:this.#e.queryId,executor:Lz.NOOP_QUERY_EXECUTOR,queryNode:Dz.UpdateQueryNode.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(r=>r.set(...e))}};kr.MatchedThenableMergeQueryBuilder=lo;(0,Qp.preventAwait)(lo,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var du=class{#e;constructor(e){this.#e=(0,zp.freeze)(e)}thenDoNothing(){return new Ur({...this.#e,queryNode:Yi.MergeQueryNode.cloneWithThen(this.#e.queryNode,(0,$n.parseMergeThen)("do nothing"))})}thenInsertValues(e){let[r,i]=(0,Mz.parseInsertExpression)(e);return new Ur({...this.#e,queryNode:Yi.MergeQueryNode.cloneWithThen(this.#e.queryNode,(0,$n.parseMergeThen)(SA.InsertQueryNode.cloneWith(SA.InsertQueryNode.createWithoutInto(),{columns:r,values:i})))})}};kr.NotMatchedThenableMergeQueryBuilder=du;(0,Qp.preventAwait)(du,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.")});var Gp=d(Vp=>{"use strict";o();s();Object.defineProperty(Vp,"__esModule",{value:!0});Vp.QueryCreator=void 0;var qA=pu(),xA=Vw(),Uz=Hw(),Fz=Ep(),zz=ru(),AA=Wn(),Sg=zi(),Qz=to(),po=_t(),TA=yA(),$p=ig(),Vn=zn(),$z=Qn(),Vz=g(),Gz=Qi(),Jz=Eg(),Hz=no(),vg=class t{#e;constructor(e){this.#e=(0,Vz.freeze)(e)}selectFrom(e){return(0,qA.createSelectQueryBuilder)({queryId:(0,Vn.createQueryId)(),executor:this.#e.executor,queryNode:Sg.SelectQueryNode.createFrom((0,po.parseTableExpressionOrList)(e),this.#e.withNode)})}selectNoFrom(e){return(0,qA.createSelectQueryBuilder)({queryId:(0,Vn.createQueryId)(),executor:this.#e.executor,queryNode:Sg.SelectQueryNode.cloneWithSelections(Sg.SelectQueryNode.create(this.#e.withNode),(0,Gz.parseSelectArg)(e))})}insertInto(e){return new xA.InsertQueryBuilder({queryId:(0,Vn.createQueryId)(),executor:this.#e.executor,queryNode:AA.InsertQueryNode.create((0,po.parseTable)(e),this.#e.withNode)})}replaceInto(e){return new xA.InsertQueryBuilder({queryId:(0,Vn.createQueryId)(),executor:this.#e.executor,queryNode:AA.InsertQueryNode.create((0,po.parseTable)(e),this.#e.withNode,!0)})}deleteFrom(e){return new Uz.DeleteQueryBuilder({queryId:(0,Vn.createQueryId)(),executor:this.#e.executor,queryNode:zz.DeleteQueryNode.create((0,po.parseTableExpressionOrList)(e),this.#e.withNode)})}updateTable(e){return new Fz.UpdateQueryBuilder({queryId:(0,Vn.createQueryId)(),executor:this.#e.executor,queryNode:Qz.UpdateQueryNode.create((0,po.parseTableExpression)(e),this.#e.withNode)})}mergeInto(e){return new Jz.MergeQueryBuilder({queryId:(0,Vn.createQueryId)(),executor:this.#e.executor,queryNode:Hz.MergeQueryNode.create((0,po.parseAliasedTable)(e),this.#e.withNode)})}with(e,r){let i=(0,TA.parseCommonTableExpression)(e,r);return new t({...this.#e,withNode:this.#e.withNode?$p.WithNode.cloneWithExpression(this.#e.withNode,i):$p.WithNode.create(i)})}withRecursive(e,r){let i=(0,TA.parseCommonTableExpression)(e,r);return new t({...this.#e,withNode:this.#e.withNode?$p.WithNode.cloneWithExpression(this.#e.withNode,i):$p.WithNode.create(i,{recursive:!0})})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new $z.WithSchemaPlugin(e))})}};Vp.QueryCreator=vg});var Ap=d(ho=>{"use strict";o();s();Object.defineProperty(ho,"__esModule",{value:!0});ho.createSelectQueryBuilder=nQ;ho.createQueryCreator=sQ;ho.createJoinBuilder=oQ;ho.createOverBuilder=aQ;var Kz=ka(),Yz=vd(),Xz=zi(),Zz=bw(),eQ=Bx(),tQ=pu(),rQ=Gp(),CA=co(),iQ=zn(),RA=_t();function nQ(){return(0,tQ.createSelectQueryBuilder)({queryId:(0,iQ.createQueryId)(),executor:CA.NOOP_QUERY_EXECUTOR,queryNode:Xz.SelectQueryNode.createFrom((0,RA.parseTableExpressionOrList)([]))})}function sQ(){return new rQ.QueryCreator({executor:CA.NOOP_QUERY_EXECUTOR})}function oQ(t,e){return new Zz.JoinBuilder({joinNode:Kz.JoinNode.create(t,(0,RA.parseTableExpression)(e))})}function aQ(){return new eQ.OverBuilder({overNode:Yz.OverNode.create()})}});var cu=d(Ig=>{"use strict";o();s();Object.defineProperty(Ig,"__esModule",{value:!0});Ig.parseJoin=pQ;var uQ=ka(),cQ=_t(),lQ=Qt(),dQ=Ap();function pQ(t,e){if(e.length===3)return fQ(t,e[0],e[1],e[2]);if(e.length===2)return hQ(t,e[0],e[1]);throw new Error("not implemented")}function hQ(t,e,r){return r((0,dQ.createJoinBuilder)(t,e)).toOperationNode()}function fQ(t,e,r,i){return uQ.JoinNode.createWithOn(t,(0,cQ.parseTableExpression)(e),(0,lQ.parseReferentialBinaryOperation)(r,"=",i))}});var qg=d(Jp=>{"use strict";o();s();Object.defineProperty(Jp,"__esModule",{value:!0});Jp.OffsetNode=void 0;var PA=g();Jp.OffsetNode=(0,PA.freeze)({is(t){return t.kind==="OffsetNode"},create(t){return(0,PA.freeze)({kind:"OffsetNode",offset:t})}})});var xg=d(Hp=>{"use strict";o();s();Object.defineProperty(Hp,"__esModule",{value:!0});Hp.GroupByItemNode=void 0;var jA=g();Hp.GroupByItemNode=(0,jA.freeze)({is(t){return t.kind==="GroupByItemNode"},create(t){return(0,jA.freeze)({kind:"GroupByItemNode",groupBy:t})}})});var DA=d(Ag=>{"use strict";o();s();Object.defineProperty(Ag,"__esModule",{value:!0});Ag.parseGroupBy=wQ;var mQ=xg(),yQ=$i(),NQ=g(),_Q=dt();function wQ(t){return t=(0,NQ.isFunction)(t)?t((0,yQ.expressionBuilder)()):t,(0,_Q.parseReferenceExpressionOrList)(t).map(mQ.GroupByItemNode.create)}});var Yp=d(Kp=>{"use strict";o();s();Object.defineProperty(Kp,"__esModule",{value:!0});Kp.SetOperationNode=void 0;var MA=g();Kp.SetOperationNode=(0,MA.freeze)({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return(0,MA.freeze)({kind:"SetOperationNode",operator:t,expression:e,all:r})}})});var LA=d(Tg=>{"use strict";o();s();Object.defineProperty(Tg,"__esModule",{value:!0});Tg.parseSetOperations=EQ;var gQ=$i(),bQ=Yp(),WA=g(),OQ=yr();function EQ(t,e,r){return(0,WA.isFunction)(e)&&(e=e((0,gQ.createExpressionBuilder)())),(0,WA.isReadonlyArray)(e)||(e=[e]),e.map(i=>bQ.SetOperationNode.create(t,(0,OQ.parseExpression)(i),r))}});var mo=d(Fr=>{"use strict";o();s();Object.defineProperty(Fr,"__esModule",{value:!0});Fr.AndWrapper=Fr.OrWrapper=Fr.AliasedExpressionWrapper=Fr.ExpressionWrapper=void 0;var SQ=Wr(),BA=Fi(),vQ=Pe(),IQ=zt(),kA=Cn(),UA=Zs(),Xp=Qt(),Cg=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new fo(this,e)}or(...e){return new Zp(kA.OrNode.create(this.#e,(0,Xp.parseValueBinaryOperationOrExpression)(e)))}and(...e){return new eh(BA.AndNode.create(this.#e,(0,Xp.parseValueBinaryOperationOrExpression)(e)))}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e}};Fr.ExpressionWrapper=Cg;var fo=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return SQ.AliasNode.create(this.#e.toOperationNode(),(0,IQ.isOperationNodeSource)(this.#t)?this.#t.toOperationNode():vQ.IdentifierNode.create(this.#t))}};Fr.AliasedExpressionWrapper=fo;var Zp=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new fo(this,e)}or(...e){return new t(kA.OrNode.create(this.#e,(0,Xp.parseValueBinaryOperationOrExpression)(e)))}$castTo(){return new t(this.#e)}toOperationNode(){return UA.ParensNode.create(this.#e)}};Fr.OrWrapper=Zp;var eh=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new fo(this,e)}and(...e){return new t(BA.AndNode.create(this.#e,(0,Xp.parseValueBinaryOperationOrExpression)(e)))}$castTo(){return new t(this.#e)}toOperationNode(){return UA.ParensNode.create(this.#e)}};Fr.AndWrapper=eh});var Rg=d(th=>{"use strict";o();s();Object.defineProperty(th,"__esModule",{value:!0});th.FetchNode=void 0;var qQ=pi();th.FetchNode={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:qQ.ValueNode.create(t),modifier:e}}}});var zA=d(Pg=>{"use strict";o();s();Object.defineProperty(Pg,"__esModule",{value:!0});Pg.parseFetch=AQ;var xQ=Rg(),FA=g();function AQ(t,e){if(!(0,FA.isNumber)(t)&&!(0,FA.isBigInt)(t))throw new Error(`Invalid fetch row count: ${t}`);if(!TQ(e))throw new Error(`Invalid fetch modifier: ${e}`);return xQ.FetchNode.create(t,e)}function TQ(t){return t==="only"||t==="with ties"}});var pu=d(jg=>{"use strict";o();s();Object.defineProperty(jg,"__esModule",{value:!0});jg.createSelectQueryBuilder=UQ;var CQ=Wr(),mi=J_(),yo=cu(),rh=_t(),QA=Qi(),RQ=dt(),Le=zi(),it=hi(),PQ=Ys(),GA=pe(),jQ=au(),DQ=qg(),hu=g(),MQ=DA(),$A=kn(),WQ=Pe(),No=LA(),ih=Qt(),LQ=mo(),VA=Br(),BQ=zA(),kQ=oo(),nh=class t{#e;constructor(e){this.#e=(0,hu.freeze)(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithWhere(this.#e.queryNode,(0,ih.parseValueBinaryOperationOrExpression)(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:it.QueryNode.cloneWithWhere(this.#e.queryNode,(0,ih.parseReferentialBinaryOperation)(e,r,i))})}having(...e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithHaving(this.#e.queryNode,(0,ih.parseValueBinaryOperationOrExpression)(e))})}havingRef(e,r,i){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithHaving(this.#e.queryNode,(0,ih.parseReferentialBinaryOperation)(e,r,i))})}select(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithSelections(this.#e.queryNode,(0,QA.parseSelectArg)(e))})}distinctOn(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithDistinctOn(this.#e.queryNode,(0,RQ.parseReferenceExpressionOrList)(e))})}modifyFront(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithFrontModifier(this.#e.queryNode,mi.SelectModifierNode.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithEndModifier(this.#e.queryNode,mi.SelectModifierNode.createWithExpression(e.toOperationNode()))})}distinct(){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithFrontModifier(this.#e.queryNode,mi.SelectModifierNode.create("Distinct"))})}forUpdate(e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithEndModifier(this.#e.queryNode,mi.SelectModifierNode.create("ForUpdate",e?(0,hu.asArray)(e).map(rh.parseTable):void 0))})}forShare(e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithEndModifier(this.#e.queryNode,mi.SelectModifierNode.create("ForShare",e?(0,hu.asArray)(e).map(rh.parseTable):void 0))})}forKeyShare(e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithEndModifier(this.#e.queryNode,mi.SelectModifierNode.create("ForKeyShare",e?(0,hu.asArray)(e).map(rh.parseTable):void 0))})}forNoKeyUpdate(e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithEndModifier(this.#e.queryNode,mi.SelectModifierNode.create("ForNoKeyUpdate",e?(0,hu.asArray)(e).map(rh.parseTable):void 0))})}skipLocked(){return new t({...this.#e,queryNode:it.QueryNode.cloneWithEndModifier(this.#e.queryNode,mi.SelectModifierNode.create("SkipLocked"))})}noWait(){return new t({...this.#e,queryNode:it.QueryNode.cloneWithEndModifier(this.#e.queryNode,mi.SelectModifierNode.create("NoWait"))})}selectAll(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithSelections(this.#e.queryNode,(0,QA.parseSelectAll)(e))})}innerJoin(...e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithJoin(this.#e.queryNode,(0,yo.parseJoin)("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithJoin(this.#e.queryNode,(0,yo.parseJoin)("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithJoin(this.#e.queryNode,(0,yo.parseJoin)("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithJoin(this.#e.queryNode,(0,yo.parseJoin)("FullJoin",e))})}innerJoinLateral(...e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithJoin(this.#e.queryNode,(0,yo.parseJoin)("LateralInnerJoin",e))})}leftJoinLateral(...e){return new t({...this.#e,queryNode:it.QueryNode.cloneWithJoin(this.#e.queryNode,(0,yo.parseJoin)("LateralLeftJoin",e))})}orderBy(...e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithOrderByItems(this.#e.queryNode,(0,PQ.parseOrderBy)(e))})}groupBy(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithGroupByItems(this.#e.queryNode,(0,MQ.parseGroupBy)(e))})}limit(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithLimit(this.#e.queryNode,jQ.LimitNode.create((0,VA.parseValueExpression)(e)))})}offset(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithOffset(this.#e.queryNode,DQ.OffsetNode.create((0,VA.parseValueExpression)(e)))})}fetch(e,r="only"){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithFetch(this.#e.queryNode,(0,BQ.parseFetch)(e,r))})}top(e,r){return new t({...this.#e,queryNode:it.QueryNode.cloneWithTop(this.#e.queryNode,(0,kQ.parseTop)(e,r))})}union(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,No.parseSetOperations)("union",e,!1))})}unionAll(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,No.parseSetOperations)("union",e,!0))})}intersect(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,No.parseSetOperations)("intersect",e,!1))})}intersectAll(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,No.parseSetOperations)("intersect",e,!0))})}except(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,No.parseSetOperations)("except",e,!1))})}exceptAll(e){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,No.parseSetOperations)("except",e,!0))})}as(e){return new sh(this,e)}clearSelect(){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new t({...this.#e,queryNode:it.QueryNode.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new t({...this.#e,queryNode:Le.SelectQueryNode.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}$asTuple(){return new LQ.ExpressionWrapper(this.toOperationNode())}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=$A.NoResultError){let r=await this.executeTakeFirst();if(r===void 0)throw(0,$A.isNoResultErrorConstructor)(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:it.QueryNode.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};(0,GA.preventAwait)(nh,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function UQ(t){return new nh(t)}var sh=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return CQ.AliasNode.create(this.#e.toOperationNode(),WQ.IdentifierNode.create(this.#t))}};(0,GA.preventAwait)(sh,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.")});var uh=d(ah=>{"use strict";o();s();Object.defineProperty(ah,"__esModule",{value:!0});ah.AggregateFunctionNode=void 0;var Gn=g(),oh=iu(),JA=eo();ah.AggregateFunctionNode=(0,Gn.freeze)({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return(0,Gn.freeze)({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return(0,Gn.freeze)({...t,distinct:!0})},cloneWithOrderBy(t,e){return(0,Gn.freeze)({...t,orderBy:t.orderBy?JA.OrderByNode.cloneWithItems(t.orderBy,e):JA.OrderByNode.create(e)})},cloneWithFilter(t,e){return(0,Gn.freeze)({...t,filter:t.filter?oh.WhereNode.cloneWithOperation(t.filter,"And",e):oh.WhereNode.create(e)})},cloneWithOrFilter(t,e){return(0,Gn.freeze)({...t,filter:t.filter?oh.WhereNode.cloneWithOperation(t.filter,"Or",e):oh.WhereNode.create(e)})},cloneWithOver(t,e){return(0,Gn.freeze)({...t,over:e})}})});var Dg=d(ch=>{"use strict";o();s();Object.defineProperty(ch,"__esModule",{value:!0});ch.FunctionNode=void 0;var HA=g();ch.FunctionNode=(0,HA.freeze)({is(t){return t.kind==="FunctionNode"},create(t,e){return(0,HA.freeze)({kind:"FunctionNode",func:t,arguments:e})}})});var Mg=d(_o=>{"use strict";o();s();Object.defineProperty(_o,"__esModule",{value:!0});_o.AliasedAggregateFunctionBuilder=_o.AggregateFunctionBuilder=void 0;var FQ=g(),fu=uh(),zQ=Wr(),QQ=Pe(),$Q=pe(),VQ=Ap(),KA=Qt(),GQ=Ys(),lh=class t{#e;constructor(e){this.#e=(0,FQ.freeze)(e)}get expressionType(){}as(e){return new dh(this,e)}distinct(){return new t({...this.#e,aggregateFunctionNode:fu.AggregateFunctionNode.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,r){return new t({...this.#e,aggregateFunctionNode:fu.AggregateFunctionNode.cloneWithOrderBy(this.#e.aggregateFunctionNode,(0,GQ.parseOrderBy)([e,r]))})}filterWhere(...e){return new t({...this.#e,aggregateFunctionNode:fu.AggregateFunctionNode.cloneWithFilter(this.#e.aggregateFunctionNode,(0,KA.parseValueBinaryOperationOrExpression)(e))})}filterWhereRef(e,r,i){return new t({...this.#e,aggregateFunctionNode:fu.AggregateFunctionNode.cloneWithFilter(this.#e.aggregateFunctionNode,(0,KA.parseReferentialBinaryOperation)(e,r,i))})}over(e){let r=(0,VQ.createOverBuilder)();return new t({...this.#e,aggregateFunctionNode:fu.AggregateFunctionNode.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}};_o.AggregateFunctionBuilder=lh;(0,$Q.preventAwait)(lh,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var dh=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return zQ.AliasNode.create(this.#e.toOperationNode(),QQ.IdentifierNode.create(this.#t))}};_o.AliasedAggregateFunctionBuilder=dh});var ph=d(Bg=>{"use strict";o();s();Object.defineProperty(Bg,"__esModule",{value:!0});Bg.createFunctionModule=HQ;var YA=mo(),Wg=uh(),XA=Dg(),ZA=dt(),JQ=Qi(),Lg=Mg(),eT=g(),tT=_t();function HQ(){let t=(r,i)=>new YA.ExpressionWrapper(XA.FunctionNode.create(r,(0,ZA.parseReferenceExpressionOrList)(i??[]))),e=(r,i)=>new Lg.AggregateFunctionBuilder({aggregateFunctionNode:Wg.AggregateFunctionNode.create(r,i?(0,ZA.parseReferenceExpressionOrList)(i):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(...r){return t("coalesce",r)},count(r){return e("count",[r])},countAll(r){return new Lg.AggregateFunctionBuilder({aggregateFunctionNode:Wg.AggregateFunctionNode.create("count",(0,JQ.parseSelectAll)(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])},jsonAgg(r){return new Lg.AggregateFunctionBuilder({aggregateFunctionNode:Wg.AggregateFunctionNode.create("json_agg",[(0,eT.isString)(r)?(0,tT.parseTable)(r):r.toOperationNode()])})},toJson(r){return new YA.ExpressionWrapper(XA.FunctionNode.create("to_json",[(0,eT.isString)(r)?(0,tT.parseTable)(r):r.toOperationNode()]))}})}});var kg=d(hh=>{"use strict";o();s();Object.defineProperty(hh,"__esModule",{value:!0});hh.UnaryOperationNode=void 0;var rT=g();hh.UnaryOperationNode=(0,rT.freeze)({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return(0,rT.freeze)({kind:"UnaryOperationNode",operator:t,operand:e})}})});var iT=d(mu=>{"use strict";o();s();Object.defineProperty(mu,"__esModule",{value:!0});mu.parseExists=ZQ;mu.parseNotExists=e$;mu.parseUnaryOperation=Ug;var KQ=Pn(),YQ=kg(),XQ=dt();function ZQ(t){return Ug("exists",t)}function e$(t){return Ug("not exists",t)}function Ug(t,e){return YQ.UnaryOperationNode.create(KQ.OperatorNode.create(t),(0,XQ.parseReferenceExpression)(e))}});var yu=d(fh=>{"use strict";o();s();Object.defineProperty(fh,"__esModule",{value:!0});fh.CaseNode=void 0;var Jn=g(),t$=io();fh.CaseNode=(0,Jn.freeze)({is(t){return t.kind==="CaseNode"},create(t){return(0,Jn.freeze)({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return(0,Jn.freeze)({...t,when:(0,Jn.freeze)(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return(0,Jn.freeze)({...t,when:t.when?(0,Jn.freeze)([...t.when.slice(0,-1),t$.WhenNode.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return(0,Jn.freeze)({...t,...e})}})});var wh=d(zr=>{"use strict";o();s();Object.defineProperty(zr,"__esModule",{value:!0});zr.CaseEndBuilder=zr.CaseWhenBuilder=zr.CaseThenBuilder=zr.CaseBuilder=void 0;var mh=mo(),_h=g(),Xi=yu(),nT=io(),sT=Qt(),wo=Br(),Fg=class{#e;constructor(e){this.#e=(0,_h.freeze)(e)}when(...e){return new Nu({...this.#e,node:Xi.CaseNode.cloneWithWhen(this.#e.node,nT.WhenNode.create((0,sT.parseValueBinaryOperationOrExpression)(e)))})}};zr.CaseBuilder=Fg;var Nu=class{#e;constructor(e){this.#e=(0,_h.freeze)(e)}then(e){return new yh({...this.#e,node:Xi.CaseNode.cloneWithThen(this.#e.node,(0,wo.isSafeImmediateValue)(e)?(0,wo.parseSafeImmediateValue)(e):(0,wo.parseValueExpression)(e))})}};zr.CaseThenBuilder=Nu;var yh=class{#e;constructor(e){this.#e=(0,_h.freeze)(e)}when(...e){return new Nu({...this.#e,node:Xi.CaseNode.cloneWithWhen(this.#e.node,nT.WhenNode.create((0,sT.parseValueBinaryOperationOrExpression)(e)))})}else(e){return new Nh({...this.#e,node:Xi.CaseNode.cloneWith(this.#e.node,{else:(0,wo.isSafeImmediateValue)(e)?(0,wo.parseSafeImmediateValue)(e):(0,wo.parseValueExpression)(e)})})}end(){return new mh.ExpressionWrapper(Xi.CaseNode.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new mh.ExpressionWrapper(Xi.CaseNode.cloneWith(this.#e.node,{isStatement:!0}))}};zr.CaseWhenBuilder=yh;var Nh=class{#e;constructor(e){this.#e=(0,_h.freeze)(e)}end(){return new mh.ExpressionWrapper(Xi.CaseNode.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new mh.ExpressionWrapper(Xi.CaseNode.cloneWith(this.#e.node,{isStatement:!0}))}};zr.CaseEndBuilder=Nh});var zg=d(gh=>{"use strict";o();s();Object.defineProperty(gh,"__esModule",{value:!0});gh.JSONPathLegNode=void 0;var oT=g();gh.JSONPathLegNode=(0,oT.freeze)({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return(0,oT.freeze)({kind:"JSONPathLegNode",type:t,value:e})}})});var $g=d(Zi=>{"use strict";o();s();Object.defineProperty(Zi,"__esModule",{value:!0});Zi.AliasedJSONPathBuilder=Zi.TraversedJSONPathBuilder=Zi.JSONPathBuilder=void 0;var r$=Wr(),i$=Pe(),n$=ud(),aT=zg(),Qg=Va(),uT=od(),s$=zt(),o$=pi(),bh=class{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,r){return uT.JSONReferenceNode.is(this.#e)?new _u(uT.JSONReferenceNode.cloneWithTraversal(this.#e,Qg.JSONPathNode.is(this.#e.traversal)?Qg.JSONPathNode.cloneWithLeg(this.#e.traversal,aT.JSONPathLegNode.create(e,r)):n$.JSONOperatorChainNode.cloneWithValue(this.#e.traversal,o$.ValueNode.createImmediate(r)))):new _u(Qg.JSONPathNode.cloneWithLeg(this.#e,aT.JSONPathLegNode.create(e,r)))}};Zi.JSONPathBuilder=bh;var _u=class t extends bh{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new Oh(this,e)}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e}};Zi.TraversedJSONPathBuilder=_u;var Oh=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return r$.AliasNode.create(this.#e.toOperationNode(),(0,s$.isOperationNodeSource)(this.#t)?this.#t.toOperationNode():i$.IdentifierNode.create(this.#t))}};Zi.AliasedJSONPathBuilder=Oh});var Gg=d(Eh=>{"use strict";o();s();Object.defineProperty(Eh,"__esModule",{value:!0});Eh.TupleNode=void 0;var Vg=g();Eh.TupleNode=(0,Vg.freeze)({is(t){return t.kind==="TupleNode"},create(t){return(0,Vg.freeze)({kind:"TupleNode",values:(0,Vg.freeze)(t)})}})});var Jg=d(wu=>{"use strict";o();s();Object.defineProperty(wu,"__esModule",{value:!0});wu.DataTypeNode=void 0;wu.isColumnDataType=c$;var cT=g(),a$=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],u$=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/];wu.DataTypeNode=(0,cT.freeze)({is(t){return t.kind==="DataTypeNode"},create(t){return(0,cT.freeze)({kind:"DataTypeNode",dataType:t})}});function c$(t){return!!(a$.includes(t)||u$.some(e=>e.test(t)))}});var gu=d(Hg=>{"use strict";o();s();Object.defineProperty(Hg,"__esModule",{value:!0});Hg.parseDataTypeExpression=d$;var lT=Jg(),l$=zt();function d$(t){if((0,l$.isOperationNodeSource)(t))return t.toOperationNode();if((0,lT.isColumnDataType)(t))return lT.DataTypeNode.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}});var Kg=d(Sh=>{"use strict";o();s();Object.defineProperty(Sh,"__esModule",{value:!0});Sh.CastNode=void 0;var dT=g();Sh.CastNode=(0,dT.freeze)({is(t){return t.kind==="CastNode"},create(t,e){return(0,dT.freeze)({kind:"CastNode",expression:t,dataType:e})}})});var $i=d(Ih=>{"use strict";o();s();Object.defineProperty(Ih,"__esModule",{value:!0});Ih.createExpressionBuilder=Yg;Ih.expressionBuilder=S$;var p$=pu(),h$=zi(),pT=_t(),f$=Qn(),m$=zn(),y$=ph(),Hn=dt(),go=Qt(),hT=Zs(),pt=mo(),fT=Pn(),N$=iT(),Kn=Br(),_$=co(),w$=wh(),g$=yu(),vh=g(),mT=$g(),yT=Kl(),NT=Fi(),_T=Gg(),b$=Va(),O$=gu(),E$=Kg();function Yg(t=_$.NOOP_QUERY_EXECUTOR){function e(n,a,u){return new pt.ExpressionWrapper((0,go.parseValueBinaryOperation)(n,a,u))}function r(n,a){return new pt.ExpressionWrapper((0,N$.parseUnaryOperation)(n,a))}let i=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(n){return(0,p$.createSelectQueryBuilder)({queryId:(0,m$.createQueryId)(),executor:t,queryNode:h$.SelectQueryNode.createFrom((0,pT.parseTableExpressionOrList)(n))})},case(n){return new w$.CaseBuilder({node:g$.CaseNode.create((0,vh.isUndefined)(n)?void 0:(0,Hn.parseReferenceExpression)(n))})},ref(n,a){return(0,vh.isUndefined)(a)?new pt.ExpressionWrapper((0,Hn.parseStringReference)(n)):new mT.JSONPathBuilder((0,Hn.parseJSONReference)(n,a))},jsonPath(){return new mT.JSONPathBuilder(b$.JSONPathNode.create())},table(n){return new pt.ExpressionWrapper((0,pT.parseTable)(n))},val(n){return new pt.ExpressionWrapper((0,Kn.parseValueExpression)(n))},refTuple(...n){return new pt.ExpressionWrapper(_T.TupleNode.create(n.map(Hn.parseReferenceExpression)))},tuple(...n){return new pt.ExpressionWrapper(_T.TupleNode.create(n.map(Kn.parseValueExpression)))},lit(n){return new pt.ExpressionWrapper((0,Kn.parseSafeImmediateValue)(n))},unary:r,not(n){return r("not",n)},exists(n){return r("exists",n)},neg(n){return r("-",n)},between(n,a,u){return new pt.ExpressionWrapper(yT.BinaryOperationNode.create((0,Hn.parseReferenceExpression)(n),fT.OperatorNode.create("between"),NT.AndNode.create((0,Kn.parseValueExpression)(a),(0,Kn.parseValueExpression)(u))))},betweenSymmetric(n,a,u){return new pt.ExpressionWrapper(yT.BinaryOperationNode.create((0,Hn.parseReferenceExpression)(n),fT.OperatorNode.create("between symmetric"),NT.AndNode.create((0,Kn.parseValueExpression)(a),(0,Kn.parseValueExpression)(u))))},and(n){return(0,vh.isReadonlyArray)(n)?new pt.ExpressionWrapper((0,go.parseFilterList)(n,"and")):new pt.ExpressionWrapper((0,go.parseFilterObject)(n,"and"))},or(n){return(0,vh.isReadonlyArray)(n)?new pt.ExpressionWrapper((0,go.parseFilterList)(n,"or")):new pt.ExpressionWrapper((0,go.parseFilterObject)(n,"or"))},parens(...n){let a=(0,go.parseValueBinaryOperationOrExpression)(n);return hT.ParensNode.is(a)?new pt.ExpressionWrapper(a):new pt.ExpressionWrapper(hT.ParensNode.create(a))},cast(n,a){return new pt.ExpressionWrapper(E$.CastNode.create((0,Hn.parseReferenceExpression)(n),(0,O$.parseDataTypeExpression)(a)))},withSchema(n){return Yg(t.withPluginAtFront(new f$.WithSchemaPlugin(n)))}});return i.fn=(0,y$.createFunctionModule)(),i.eb=i,i}function S$(t){return Yg()}});var yr=d(bu=>{"use strict";o();s();Object.defineProperty(bu,"__esModule",{value:!0});bu.parseExpression=v$;bu.parseAliasedExpression=I$;bu.isExpressionOrFactory=q$;var wT=V_(),gT=zt(),bT=$i(),Xg=g();function v$(t){if((0,gT.isOperationNodeSource)(t))return t.toOperationNode();if((0,Xg.isFunction)(t))return t((0,bT.expressionBuilder)()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function I$(t){if((0,gT.isOperationNodeSource)(t))return t.toOperationNode();if((0,Xg.isFunction)(t))return t((0,bT.expressionBuilder)()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function q$(t){return(0,wT.isExpression)(t)||(0,wT.isAliasedExpression)(t)||(0,Xg.isFunction)(t)}});var _t=d(bo=>{"use strict";o();s();Object.defineProperty(bo,"__esModule",{value:!0});bo.parseTableExpressionOrList=C$;bo.parseTableExpression=Zg;bo.parseAliasedTable=ST;bo.parseTable=eb;var ET=g(),x$=Wr(),OT=Ks(),A$=yr(),T$=Pe();function C$(t){return(0,ET.isReadonlyArray)(t)?t.map(e=>Zg(e)):[Zg(t)]}function Zg(t){return(0,ET.isString)(t)?ST(t):(0,A$.parseAliasedExpression)(t)}function ST(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(vT);return x$.AliasNode.create(eb(r),T$.IdentifierNode.create(i))}else return eb(t)}function eb(t){let e=".";if(t.includes(e)){let[r,i]=t.split(e).map(vT);return OT.TableNode.createWithSchema(r,i)}else return OT.TableNode.create(t)}function vT(t){return t.trim()}});var tb=d(qh=>{"use strict";o();s();Object.defineProperty(qh,"__esModule",{value:!0});qh.AddColumnNode=void 0;var IT=g();qh.AddColumnNode=(0,IT.freeze)({is(t){return t.kind==="AddColumnNode"},create(t){return(0,IT.freeze)({kind:"AddColumnNode",column:t})}})});var Ou=d(xh=>{"use strict";o();s();Object.defineProperty(xh,"__esModule",{value:!0});xh.ColumnDefinitionNode=void 0;var Yn=g(),R$=Nt();xh.ColumnDefinitionNode=(0,Yn.freeze)({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return(0,Yn.freeze)({kind:"ColumnDefinitionNode",column:R$.ColumnNode.create(t),dataType:e})},cloneWithFrontModifier(t,e){return(0,Yn.freeze)({...t,frontModifiers:t.frontModifiers?(0,Yn.freeze)([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return(0,Yn.freeze)({...t,endModifiers:t.endModifiers?(0,Yn.freeze)([...t.endModifiers,e]):[e]})},cloneWith(t,e){return(0,Yn.freeze)({...t,...e})}})});var rb=d(Ah=>{"use strict";o();s();Object.defineProperty(Ah,"__esModule",{value:!0});Ah.DropColumnNode=void 0;var qT=g(),P$=Nt();Ah.DropColumnNode=(0,qT.freeze)({is(t){return t.kind==="DropColumnNode"},create(t){return(0,qT.freeze)({kind:"DropColumnNode",column:P$.ColumnNode.create(t)})}})});var ib=d(Th=>{"use strict";o();s();Object.defineProperty(Th,"__esModule",{value:!0});Th.RenameColumnNode=void 0;var xT=g(),AT=Nt();Th.RenameColumnNode=(0,xT.freeze)({is(t){return t.kind==="RenameColumnNode"},create(t,e){return(0,xT.freeze)({kind:"RenameColumnNode",column:AT.ColumnNode.create(t),renameTo:AT.ColumnNode.create(e)})}})});var Eu=d(Ch=>{"use strict";o();s();Object.defineProperty(Ch,"__esModule",{value:!0});Ch.CheckConstraintNode=void 0;var TT=g(),j$=Pe();Ch.CheckConstraintNode=(0,TT.freeze)({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return(0,TT.freeze)({kind:"CheckConstraintNode",expression:t,name:e?j$.IdentifierNode.create(e):void 0})}})});var vu=d(Oo=>{"use strict";o();s();Object.defineProperty(Oo,"__esModule",{value:!0});Oo.ReferencesNode=Oo.ON_MODIFY_FOREIGN_ACTIONS=void 0;var Su=g();Oo.ON_MODIFY_FOREIGN_ACTIONS=["no action","restrict","cascade","set null","set default"];Oo.ReferencesNode=(0,Su.freeze)({is(t){return t.kind==="ReferencesNode"},create(t,e){return(0,Su.freeze)({kind:"ReferencesNode",table:t,columns:(0,Su.freeze)([...e])})},cloneWithOnDelete(t,e){return(0,Su.freeze)({...t,onDelete:e})},cloneWithOnUpdate(t,e){return(0,Su.freeze)({...t,onUpdate:e})}})});var sb=d(nb=>{"use strict";o();s();Object.defineProperty(nb,"__esModule",{value:!0});nb.parseDefaultValueExpression=W$;var D$=zt(),M$=pi();function W$(t){return(0,D$.isOperationNodeSource)(t)?t.toOperationNode():M$.ValueNode.createImmediate(t)}});var ob=d(Ph=>{"use strict";o();s();Object.defineProperty(Ph,"__esModule",{value:!0});Ph.GeneratedNode=void 0;var Rh=g();Ph.GeneratedNode=(0,Rh.freeze)({is(t){return t.kind==="GeneratedNode"},create(t){return(0,Rh.freeze)({kind:"GeneratedNode",...t})},createWithExpression(t){return(0,Rh.freeze)({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return(0,Rh.freeze)({...t,...e})}})});var ab=d(jh=>{"use strict";o();s();Object.defineProperty(jh,"__esModule",{value:!0});jh.DefaultValueNode=void 0;var CT=g();jh.DefaultValueNode=(0,CT.freeze)({is(t){return t.kind==="DefaultValueNode"},create(t){return(0,CT.freeze)({kind:"DefaultValueNode",defaultValue:t})}})});var cb=d(ub=>{"use strict";o();s();Object.defineProperty(ub,"__esModule",{value:!0});ub.parseOnModifyForeignAction=B$;var L$=vu();function B$(t){if(L$.ON_MODIFY_FOREIGN_ACTIONS.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}});var Lh=d(Wh=>{"use strict";o();s();Object.defineProperty(Wh,"__esModule",{value:!0});Wh.ColumnDefinitionBuilder=void 0;var k$=Eu(),lb=vu(),U$=Ua(),F$=dt(),z$=pe(),Ye=Ou(),Q$=sb(),Dh=ob(),$$=ab(),RT=cb(),Mh=class t{#e;constructor(e){this.#e=e}autoIncrement(){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{primaryKey:!0}))}references(e){let r=(0,F$.parseStringReference)(e);if(!r.table||U$.SelectAllNode.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{references:lb.ReferencesNode.create(r.table,[r.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{references:lb.ReferencesNode.cloneWithOnDelete(this.#e.references,(0,RT.parseOnModifyForeignAction)(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{references:lb.ReferencesNode.cloneWithOnUpdate(this.#e.references,(0,RT.parseOnModifyForeignAction)(e))}))}unique(){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{unique:!0}))}notNull(){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{defaultTo:$$.DefaultValueNode.create((0,Q$.parseDefaultValueExpression)(e))}))}check(e){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{check:k$.CheckConstraintNode.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{generated:Dh.GeneratedNode.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{generated:Dh.GeneratedNode.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{generated:Dh.GeneratedNode.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{generated:Dh.GeneratedNode.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new t(Ye.ColumnDefinitionNode.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new t(Ye.ColumnDefinitionNode.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new t(Ye.ColumnDefinitionNode.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}};Wh.ColumnDefinitionBuilder=Mh;(0,z$.preventAwait)(Mh,"don't await ColumnDefinitionBuilder instances directly.")});var db=d(Bh=>{"use strict";o();s();Object.defineProperty(Bh,"__esModule",{value:!0});Bh.ModifyColumnNode=void 0;var PT=g();Bh.ModifyColumnNode=(0,PT.freeze)({is(t){return t.kind==="ModifyColumnNode"},create(t){return(0,PT.freeze)({kind:"ModifyColumnNode",column:t})}})});var Iu=d(kh=>{"use strict";o();s();Object.defineProperty(kh,"__esModule",{value:!0});kh.ForeignKeyConstraintNode=void 0;var pb=g(),V$=Pe(),G$=vu();kh.ForeignKeyConstraintNode=(0,pb.freeze)({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return(0,pb.freeze)({kind:"ForeignKeyConstraintNode",columns:t,references:G$.ReferencesNode.create(e,r),name:i?V$.IdentifierNode.create(i):void 0})},cloneWith(t,e){return(0,pb.freeze)({...t,...e})}})});var zh=d(Fh=>{"use strict";o();s();Object.defineProperty(Fh,"__esModule",{value:!0});Fh.ForeignKeyConstraintBuilder=void 0;var jT=Iu(),DT=cb(),J$=pe(),Uh=class t{#e;constructor(e){this.#e=e}onDelete(e){return new t(jT.ForeignKeyConstraintNode.cloneWith(this.#e,{onDelete:(0,DT.parseOnModifyForeignAction)(e)}))}onUpdate(e){return new t(jT.ForeignKeyConstraintNode.cloneWith(this.#e,{onUpdate:(0,DT.parseOnModifyForeignAction)(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}};Fh.ForeignKeyConstraintBuilder=Uh;(0,J$.preventAwait)(Uh,"don't await ForeignKeyConstraintBuilder instances directly.")});var $h=d(Qh=>{"use strict";o();s();Object.defineProperty(Qh,"__esModule",{value:!0});Qh.AddConstraintNode=void 0;var MT=g();Qh.AddConstraintNode=(0,MT.freeze)({is(t){return t.kind==="AddConstraintNode"},create(t){return(0,MT.freeze)({kind:"AddConstraintNode",constraint:t})}})});var qu=d(Gh=>{"use strict";o();s();Object.defineProperty(Gh,"__esModule",{value:!0});Gh.UniqueConstraintNode=void 0;var Vh=g(),H$=Nt(),K$=Pe();Gh.UniqueConstraintNode=(0,Vh.freeze)({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,r){return(0,Vh.freeze)({kind:"UniqueConstraintNode",columns:(0,Vh.freeze)(t.map(H$.ColumnNode.create)),name:e?K$.IdentifierNode.create(e):void 0,nullsNotDistinct:r})},cloneWith(t,e){return(0,Vh.freeze)({...t,...e})}})});var Hh=d(Jh=>{"use strict";o();s();Object.defineProperty(Jh,"__esModule",{value:!0});Jh.DropConstraintNode=void 0;var hb=g(),Y$=Pe();Jh.DropConstraintNode=(0,hb.freeze)({is(t){return t.kind==="DropConstraintNode"},create(t){return(0,hb.freeze)({kind:"DropConstraintNode",constraintName:Y$.IdentifierNode.create(t)})},cloneWith(t,e){return(0,hb.freeze)({...t,...e})}})});var fb=d(Kh=>{"use strict";o();s();Object.defineProperty(Kh,"__esModule",{value:!0});Kh.AlterColumnNode=void 0;var WT=g(),X$=Nt();Kh.AlterColumnNode=(0,WT.freeze)({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return(0,WT.freeze)({kind:"AlterColumnNode",column:X$.ColumnNode.create(t),[e]:r})}})});var mb=d(Eo=>{"use strict";o();s();Object.defineProperty(Eo,"__esModule",{value:!0});Eo.AlteredColumnBuilder=Eo.AlterColumnBuilder=void 0;var xu=fb(),Z$=gu(),e5=sb(),LT=pe(),Yh=class{#e;constructor(e){this.#e=e}setDataType(e){return new yi(xu.AlterColumnNode.create(this.#e,"dataType",(0,Z$.parseDataTypeExpression)(e)))}setDefault(e){return new yi(xu.AlterColumnNode.create(this.#e,"setDefault",(0,e5.parseDefaultValueExpression)(e)))}dropDefault(){return new yi(xu.AlterColumnNode.create(this.#e,"dropDefault",!0))}setNotNull(){return new yi(xu.AlterColumnNode.create(this.#e,"setNotNull",!0))}dropNotNull(){return new yi(xu.AlterColumnNode.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}};Eo.AlterColumnBuilder=Yh;(0,LT.preventAwait)(Yh,"don't await AlterColumnBuilder instances");var yi=class{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}};Eo.AlteredColumnBuilder=yi;(0,LT.preventAwait)(yi,"don't await AlteredColumnBuilder instances")});var BT=d(Zh=>{"use strict";o();s();Object.defineProperty(Zh,"__esModule",{value:!0});Zh.AlterTableExecutor=void 0;var t5=g(),r5=pe(),Xh=class{#e;constructor(e){this.#e=(0,t5.freeze)(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};Zh.AlterTableExecutor=Xh;(0,r5.preventAwait)(Xh,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`")});var kT=d(tf=>{"use strict";o();s();Object.defineProperty(tf,"__esModule",{value:!0});tf.AlterTableAddForeignKeyConstraintBuilder=void 0;var i5=$h(),n5=Tn(),s5=g(),o5=pe(),ef=class t{#e;constructor(e){this.#e=(0,s5.freeze)(e)}onDelete(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(n5.AlterTableNode.cloneWithTableProps(this.#e.node,{addConstraint:i5.AddConstraintNode.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};tf.AlterTableAddForeignKeyConstraintBuilder=ef;(0,o5.preventAwait)(ef,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`")});var UT=d(nf=>{"use strict";o();s();Object.defineProperty(nf,"__esModule",{value:!0});nf.AlterTableDropConstraintBuilder=void 0;var yb=Tn(),Nb=Hh(),a5=g(),u5=pe(),rf=class t{#e;constructor(e){this.#e=(0,a5.freeze)(e)}ifExists(){return new t({...this.#e,node:yb.AlterTableNode.cloneWithTableProps(this.#e.node,{dropConstraint:Nb.DropConstraintNode.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new t({...this.#e,node:yb.AlterTableNode.cloneWithTableProps(this.#e.node,{dropConstraint:Nb.DropConstraintNode.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new t({...this.#e,node:yb.AlterTableNode.cloneWithTableProps(this.#e.node,{dropConstraint:Nb.DropConstraintNode.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};nf.AlterTableDropConstraintBuilder=rf;(0,u5.preventAwait)(rf,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`")});var of=d(sf=>{"use strict";o();s();Object.defineProperty(sf,"__esModule",{value:!0});sf.PrimaryConstraintNode=void 0;var _b=g(),c5=Nt(),l5=Pe();sf.PrimaryConstraintNode=(0,_b.freeze)({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return(0,_b.freeze)({kind:"PrimaryKeyConstraintNode",columns:(0,_b.freeze)(t.map(c5.ColumnNode.create)),name:e?l5.IdentifierNode.create(e):void 0})}})});var cf=d(uf=>{"use strict";o();s();Object.defineProperty(uf,"__esModule",{value:!0});uf.AddIndexNode=void 0;var af=g(),d5=Pe();uf.AddIndexNode=(0,af.freeze)({is(t){return t.kind==="AddIndexNode"},create(t){return(0,af.freeze)({kind:"AddIndexNode",name:d5.IdentifierNode.create(t)})},cloneWith(t,e){return(0,af.freeze)({...t,...e})},cloneWithColumns(t,e){return(0,af.freeze)({...t,columns:[...t.columns||[],...e]})}})});var zT=d(df=>{"use strict";o();s();Object.defineProperty(df,"__esModule",{value:!0});df.AlterTableAddIndexBuilder=void 0;var Au=cf(),Tu=Tn(),p5=di(),FT=dt(),h5=g(),f5=pe(),lf=class t{#e;constructor(e){this.#e=(0,h5.freeze)(e)}unique(){return new t({...this.#e,node:Tu.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:Au.AddIndexNode.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new t({...this.#e,node:Tu.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:Au.AddIndexNode.cloneWithColumns(this.#e.node.addIndex,[(0,FT.parseOrderedColumnName)(e)])})})}columns(e){return new t({...this.#e,node:Tu.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:Au.AddIndexNode.cloneWithColumns(this.#e.node.addIndex,e.map(FT.parseOrderedColumnName))})})}expression(e){return new t({...this.#e,node:Tu.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:Au.AddIndexNode.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new t({...this.#e,node:Tu.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:Au.AddIndexNode.cloneWith(this.#e.node.addIndex,{using:p5.RawNode.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};df.AlterTableAddIndexBuilder=lf;(0,f5.preventAwait)(lf,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`")});var wb=d(hf=>{"use strict";o();s();Object.defineProperty(hf,"__esModule",{value:!0});hf.UniqueConstraintNodeBuilder=void 0;var m5=qu(),y5=pe(),pf=class t{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new t(m5.UniqueConstraintNode.cloneWith(this.#e,{nullsNotDistinct:!0}))}};hf.UniqueConstraintNodeBuilder=pf;(0,y5.preventAwait)(pf,"don't await UniqueConstraintNodeBuilder instances directly.")});var bb=d(vo=>{"use strict";o();s();Object.defineProperty(vo,"__esModule",{value:!0});vo.AlterTableColumnAlteringBuilder=vo.AlterTableBuilder=void 0;var VT=tb(),nt=Tn(),ff=Ou(),GT=rb(),N5=Pe(),JT=ib(),Xn=g(),HT=pe(),mf=Lh(),KT=db(),yf=gu(),_5=zh(),gb=$h(),w5=qu(),g5=Eu(),b5=Iu(),QT=Nt(),$T=_t(),O5=Hh(),YT=mb(),So=BT(),E5=kT(),S5=UT(),v5=of(),I5=Ba(),q5=cf(),x5=zT(),A5=wb(),Nf=class{#e;constructor(e){this.#e=(0,Xn.freeze)(e)}renameTo(e){return new So.AlterTableExecutor({...this.#e,node:nt.AlterTableNode.cloneWithTableProps(this.#e.node,{renameTo:(0,$T.parseTable)(e)})})}setSchema(e){return new So.AlterTableExecutor({...this.#e,node:nt.AlterTableNode.cloneWithTableProps(this.#e.node,{setSchema:N5.IdentifierNode.create(e)})})}alterColumn(e,r){let i=r(new YT.AlterColumnBuilder(e));return new Ni({...this.#e,node:nt.AlterTableNode.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new Ni({...this.#e,node:nt.AlterTableNode.cloneWithColumnAlteration(this.#e.node,GT.DropColumnNode.create(e))})}renameColumn(e,r){return new Ni({...this.#e,node:nt.AlterTableNode.cloneWithColumnAlteration(this.#e.node,JT.RenameColumnNode.create(e,r))})}addColumn(e,r,i=Xn.noop){let n=i(new mf.ColumnDefinitionBuilder(ff.ColumnDefinitionNode.create(e,(0,yf.parseDataTypeExpression)(r))));return new Ni({...this.#e,node:nt.AlterTableNode.cloneWithColumnAlteration(this.#e.node,VT.AddColumnNode.create(n.toOperationNode()))})}modifyColumn(e,r,i=Xn.noop){let n=i(new mf.ColumnDefinitionBuilder(ff.ColumnDefinitionNode.create(e,(0,yf.parseDataTypeExpression)(r))));return new Ni({...this.#e,node:nt.AlterTableNode.cloneWithColumnAlteration(this.#e.node,KT.ModifyColumnNode.create(n.toOperationNode()))})}addUniqueConstraint(e,r,i=Xn.noop){let n=i(new A5.UniqueConstraintNodeBuilder(w5.UniqueConstraintNode.create(r,e)));return new So.AlterTableExecutor({...this.#e,node:nt.AlterTableNode.cloneWithTableProps(this.#e.node,{addConstraint:gb.AddConstraintNode.create(n.toOperationNode())})})}addCheckConstraint(e,r){return new So.AlterTableExecutor({...this.#e,node:nt.AlterTableNode.cloneWithTableProps(this.#e.node,{addConstraint:gb.AddConstraintNode.create(g5.CheckConstraintNode.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,i,n){return new E5.AlterTableAddForeignKeyConstraintBuilder({...this.#e,constraintBuilder:new _5.ForeignKeyConstraintBuilder(b5.ForeignKeyConstraintNode.create(r.map(QT.ColumnNode.create),(0,$T.parseTable)(i),n.map(QT.ColumnNode.create),e))})}addPrimaryKeyConstraint(e,r){return new So.AlterTableExecutor({...this.#e,node:nt.AlterTableNode.cloneWithTableProps(this.#e.node,{addConstraint:gb.AddConstraintNode.create(v5.PrimaryConstraintNode.create(r,e))})})}dropConstraint(e){return new S5.AlterTableDropConstraintBuilder({...this.#e,node:nt.AlterTableNode.cloneWithTableProps(this.#e.node,{dropConstraint:O5.DropConstraintNode.create(e)})})}addIndex(e){return new x5.AlterTableAddIndexBuilder({...this.#e,node:nt.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:q5.AddIndexNode.create(e)})})}dropIndex(e){return new So.AlterTableExecutor({...this.#e,node:nt.AlterTableNode.cloneWithTableProps(this.#e.node,{dropIndex:I5.DropIndexNode.create(e)})})}$call(e){return e(this)}};vo.AlterTableBuilder=Nf;(0,HT.preventAwait)(Nf,"don't await AlterTableBuilder instances");var Ni=class t{#e;constructor(e){this.#e=(0,Xn.freeze)(e)}alterColumn(e,r){let i=r(new YT.AlterColumnBuilder(e));return new t({...this.#e,node:nt.AlterTableNode.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new t({...this.#e,node:nt.AlterTableNode.cloneWithColumnAlteration(this.#e.node,GT.DropColumnNode.create(e))})}renameColumn(e,r){return new t({...this.#e,node:nt.AlterTableNode.cloneWithColumnAlteration(this.#e.node,JT.RenameColumnNode.create(e,r))})}addColumn(e,r,i=Xn.noop){let n=i(new mf.ColumnDefinitionBuilder(ff.ColumnDefinitionNode.create(e,(0,yf.parseDataTypeExpression)(r))));return new t({...this.#e,node:nt.AlterTableNode.cloneWithColumnAlteration(this.#e.node,VT.AddColumnNode.create(n.toOperationNode()))})}modifyColumn(e,r,i=Xn.noop){let n=i(new mf.ColumnDefinitionBuilder(ff.ColumnDefinitionNode.create(e,(0,yf.parseDataTypeExpression)(r))));return new t({...this.#e,node:nt.AlterTableNode.cloneWithColumnAlteration(this.#e.node,KT.ModifyColumnNode.create(n.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};vo.AlterTableColumnAlteringBuilder=Ni;(0,HT.preventAwait)(Ni,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`")});var Eb=d(_f=>{"use strict";o();s();Object.defineProperty(_f,"__esModule",{value:!0});_f.ImmediateValueTransformer=void 0;var T5=ao(),Ob=class extends T5.OperationNodeTransformer{transformValue(e){return{...super.transformValue(e),immediate:!0}}};_f.ImmediateValueTransformer=Ob});var Sb=d(gf=>{"use strict";o();s();Object.defineProperty(gf,"__esModule",{value:!0});gf.CreateIndexBuilder=void 0;var en=Cl(),C5=di(),XT=dt(),R5=_t(),P5=pe(),j5=g(),D5=Qt(),M5=hi(),W5=Eb(),wf=class t{#e;constructor(e){this.#e=(0,j5.freeze)(e)}ifNotExists(){return new t({...this.#e,node:en.CreateIndexNode.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new t({...this.#e,node:en.CreateIndexNode.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new t({...this.#e,node:en.CreateIndexNode.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new t({...this.#e,node:en.CreateIndexNode.cloneWith(this.#e.node,{table:(0,R5.parseTable)(e)})})}column(e){return new t({...this.#e,node:en.CreateIndexNode.cloneWithColumns(this.#e.node,[(0,XT.parseOrderedColumnName)(e)])})}columns(e){return new t({...this.#e,node:en.CreateIndexNode.cloneWithColumns(this.#e.node,e.map(XT.parseOrderedColumnName))})}expression(e){return new t({...this.#e,node:en.CreateIndexNode.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new t({...this.#e,node:en.CreateIndexNode.cloneWith(this.#e.node,{using:C5.RawNode.createWithSql(e)})})}where(...e){let r=new W5.ImmediateValueTransformer;return new t({...this.#e,node:M5.QueryNode.cloneWithWhere(this.#e.node,r.transformNode((0,D5.parseValueBinaryOperationOrExpression)(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};gf.CreateIndexBuilder=wf;(0,P5.preventAwait)(wf,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`")});var vb=d(Of=>{"use strict";o();s();Object.defineProperty(Of,"__esModule",{value:!0});Of.CreateSchemaBuilder=void 0;var L5=Pl(),B5=pe(),k5=g(),bf=class t{#e;constructor(e){this.#e=(0,k5.freeze)(e)}ifNotExists(){return new t({...this.#e,node:L5.CreateSchemaNode.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};Of.CreateSchemaBuilder=bf;(0,B5.preventAwait)(bf,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`")});var ZT=d(Ib=>{"use strict";o();s();Object.defineProperty(Ib,"__esModule",{value:!0});Ib.parseOnCommitAction=F5;var U5=Hs();function F5(t){if(U5.ON_COMMIT_ACTIONS.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}});var qb=d(vf=>{"use strict";o();s();Object.defineProperty(vf,"__esModule",{value:!0});vf.CreateTableBuilder=void 0;var z5=Ou(),Nr=Hs(),Q5=pe(),$5=Lh(),Ef=g(),V5=Iu(),eC=Nt(),G5=zh(),J5=gu(),H5=of(),K5=qu(),Y5=Eu(),X5=_t(),Z5=ZT(),eV=wb(),tV=yr(),Sf=class t{#e;constructor(e){this.#e=(0,Ef.freeze)(e)}temporary(){return new t({...this.#e,node:Nr.CreateTableNode.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new t({...this.#e,node:Nr.CreateTableNode.cloneWith(this.#e.node,{onCommit:(0,Z5.parseOnCommitAction)(e)})})}ifNotExists(){return new t({...this.#e,node:Nr.CreateTableNode.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,r,i=Ef.noop){let n=i(new $5.ColumnDefinitionBuilder(z5.ColumnDefinitionNode.create(e,(0,J5.parseDataTypeExpression)(r))));return new t({...this.#e,node:Nr.CreateTableNode.cloneWithColumn(this.#e.node,n.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new t({...this.#e,node:Nr.CreateTableNode.cloneWithConstraint(this.#e.node,H5.PrimaryConstraintNode.create(r,e))})}addUniqueConstraint(e,r,i=Ef.noop){let n=i(new eV.UniqueConstraintNodeBuilder(K5.UniqueConstraintNode.create(r,e)));return new t({...this.#e,node:Nr.CreateTableNode.cloneWithConstraint(this.#e.node,n.toOperationNode())})}addCheckConstraint(e,r){return new t({...this.#e,node:Nr.CreateTableNode.cloneWithConstraint(this.#e.node,Y5.CheckConstraintNode.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,i,n,a=Ef.noop){let u=a(new G5.ForeignKeyConstraintBuilder(V5.ForeignKeyConstraintNode.create(r.map(eC.ColumnNode.create),(0,X5.parseTable)(i),n.map(eC.ColumnNode.create),e)));return new t({...this.#e,node:Nr.CreateTableNode.cloneWithConstraint(this.#e.node,u.toOperationNode())})}modifyFront(e){return new t({...this.#e,node:Nr.CreateTableNode.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new t({...this.#e,node:Nr.CreateTableNode.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new t({...this.#e,node:Nr.CreateTableNode.cloneWith(this.#e.node,{selectQuery:(0,tV.parseExpression)(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};vf.CreateTableBuilder=Sf;(0,Q5.preventAwait)(Sf,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`")});var Ab=d(qf=>{"use strict";o();s();Object.defineProperty(qf,"__esModule",{value:!0});qf.DropIndexBuilder=void 0;var xb=Ba(),rV=pe(),iV=_t(),nV=g(),If=class t{#e;constructor(e){this.#e=(0,nV.freeze)(e)}on(e){return new t({...this.#e,node:xb.DropIndexNode.cloneWith(this.#e.node,{table:(0,iV.parseTable)(e)})})}ifExists(){return new t({...this.#e,node:xb.DropIndexNode.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:xb.DropIndexNode.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};qf.DropIndexBuilder=If;(0,rV.preventAwait)(If,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`")});var Tb=d(Af=>{"use strict";o();s();Object.defineProperty(Af,"__esModule",{value:!0});Af.DropSchemaBuilder=void 0;var tC=Wl(),sV=pe(),oV=g(),xf=class t{#e;constructor(e){this.#e=(0,oV.freeze)(e)}ifExists(){return new t({...this.#e,node:tC.DropSchemaNode.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:tC.DropSchemaNode.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};Af.DropSchemaBuilder=xf;(0,sV.preventAwait)(xf,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`")});var Cb=d(Cf=>{"use strict";o();s();Object.defineProperty(Cf,"__esModule",{value:!0});Cf.DropTableBuilder=void 0;var rC=Bl(),aV=pe(),uV=g(),Tf=class t{#e;constructor(e){this.#e=(0,uV.freeze)(e)}ifExists(){return new t({...this.#e,node:rC.DropTableNode.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:rC.DropTableNode.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};Cf.DropTableBuilder=Tf;(0,aV.preventAwait)(Tf,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`")});var Cu=d(Rf=>{"use strict";o();s();Object.defineProperty(Rf,"__esModule",{value:!0});Rf.CreateViewNode=void 0;var Rb=g(),cV=Ui();Rf.CreateViewNode=(0,Rb.freeze)({is(t){return t.kind==="CreateViewNode"},create(t){return(0,Rb.freeze)({kind:"CreateViewNode",name:cV.SchemableIdentifierNode.create(t)})},cloneWith(t,e){return(0,Rb.freeze)({...t,...e})}})});var iC=d(Pf=>{"use strict";o();s();Object.defineProperty(Pf,"__esModule",{value:!0});Pf.ImmediateValuePlugin=void 0;var lV=Eb(),Pb=class{#e=new lV.ImmediateValueTransformer;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}};Pf.ImmediateValuePlugin=Pb});var jb=d(Df=>{"use strict";o();s();Object.defineProperty(Df,"__esModule",{value:!0});Df.CreateViewBuilder=void 0;var dV=pe(),pV=g(),Io=Cu(),hV=dt(),fV=iC(),jf=class t{#e;constructor(e){this.#e=(0,pV.freeze)(e)}temporary(){return new t({...this.#e,node:Io.CreateViewNode.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new t({...this.#e,node:Io.CreateViewNode.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new t({...this.#e,node:Io.CreateViewNode.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new t({...this.#e,node:Io.CreateViewNode.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new t({...this.#e,node:Io.CreateViewNode.cloneWith(this.#e.node,{columns:e.map(hV.parseColumnName)})})}as(e){let r=e.withPlugin(new fV.ImmediateValuePlugin).toOperationNode();return new t({...this.#e,node:Io.CreateViewNode.cloneWith(this.#e.node,{as:r})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};Df.CreateViewBuilder=jf;(0,dV.preventAwait)(jf,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`")});var Wf=d(Mf=>{"use strict";o();s();Object.defineProperty(Mf,"__esModule",{value:!0});Mf.DropViewNode=void 0;var Db=g(),mV=Ui();Mf.DropViewNode=(0,Db.freeze)({is(t){return t.kind==="DropViewNode"},create(t){return(0,Db.freeze)({kind:"DropViewNode",name:mV.SchemableIdentifierNode.create(t)})},cloneWith(t,e){return(0,Db.freeze)({...t,...e})}})});var Wb=d(Bf=>{"use strict";o();s();Object.defineProperty(Bf,"__esModule",{value:!0});Bf.DropViewBuilder=void 0;var yV=pe(),NV=g(),Mb=Wf(),Lf=class t{#e;constructor(e){this.#e=(0,NV.freeze)(e)}materialized(){return new t({...this.#e,node:Mb.DropViewNode.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new t({...this.#e,node:Mb.DropViewNode.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:Mb.DropViewNode.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};Bf.DropViewBuilder=Lf;(0,yV.preventAwait)(Lf,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`")});var Uf=d(kf=>{"use strict";o();s();Object.defineProperty(kf,"__esModule",{value:!0});kf.CreateTypeNode=void 0;var Lb=g(),_V=Ja(),wV=pi();kf.CreateTypeNode=(0,Lb.freeze)({is(t){return t.kind==="CreateTypeNode"},create(t){return(0,Lb.freeze)({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return(0,Lb.freeze)({...t,enum:_V.ValueListNode.create(e.map(r=>wV.ValueNode.createImmediate(r)))})}})});var Bb=d(zf=>{"use strict";o();s();Object.defineProperty(zf,"__esModule",{value:!0});zf.CreateTypeBuilder=void 0;var gV=pe(),bV=g(),OV=Uf(),Ff=class t{#e;constructor(e){this.#e=(0,bV.freeze)(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new t({...this.#e,node:OV.CreateTypeNode.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};zf.CreateTypeBuilder=Ff;(0,gV.preventAwait)(Ff,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`")});var $f=d(Qf=>{"use strict";o();s();Object.defineProperty(Qf,"__esModule",{value:!0});Qf.DropTypeNode=void 0;var kb=g();Qf.DropTypeNode=(0,kb.freeze)({is(t){return t.kind==="DropTypeNode"},create(t){return(0,kb.freeze)({kind:"DropTypeNode",name:t})},cloneWith(t,e){return(0,kb.freeze)({...t,...e})}})});var Ub=d(Gf=>{"use strict";o();s();Object.defineProperty(Gf,"__esModule",{value:!0});Gf.DropTypeBuilder=void 0;var EV=$f(),SV=pe(),vV=g(),Vf=class t{#e;constructor(e){this.#e=(0,vV.freeze)(e)}ifExists(){return new t({...this.#e,node:EV.DropTypeNode.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};Gf.DropTypeBuilder=Vf;(0,SV.preventAwait)(Vf,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`")});var sC=d(Fb=>{"use strict";o();s();Object.defineProperty(Fb,"__esModule",{value:!0});Fb.parseSchemableIdentifier=IV;var nC=Ui();function IV(t){let e=".";if(t.includes(e)){let r=t.split(e).map(qV);if(r.length===2)return nC.SchemableIdentifierNode.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return nC.SchemableIdentifierNode.create(t)}function qV(t){return t.trim()}});var $b=d(Jf=>{"use strict";o();s();Object.defineProperty(Jf,"__esModule",{value:!0});Jf.SchemaModule=void 0;var xV=Tn(),AV=Cl(),TV=Pl(),CV=Hs(),RV=Ba(),PV=Wl(),jV=Bl(),zb=_t(),DV=bb(),MV=Sb(),WV=vb(),LV=qb(),BV=Ab(),kV=Tb(),UV=Cb(),_r=zn(),FV=Qn(),zV=jb(),QV=Cu(),$V=Wb(),VV=Wf(),GV=Bb(),JV=Ub(),HV=Uf(),KV=$f(),oC=sC(),Qb=class t{#e;constructor(e){this.#e=e}createTable(e){return new LV.CreateTableBuilder({queryId:(0,_r.createQueryId)(),executor:this.#e,node:CV.CreateTableNode.create((0,zb.parseTable)(e))})}dropTable(e){return new UV.DropTableBuilder({queryId:(0,_r.createQueryId)(),executor:this.#e,node:jV.DropTableNode.create((0,zb.parseTable)(e))})}createIndex(e){return new MV.CreateIndexBuilder({queryId:(0,_r.createQueryId)(),executor:this.#e,node:AV.CreateIndexNode.create(e)})}dropIndex(e){return new BV.DropIndexBuilder({queryId:(0,_r.createQueryId)(),executor:this.#e,node:RV.DropIndexNode.create(e)})}createSchema(e){return new WV.CreateSchemaBuilder({queryId:(0,_r.createQueryId)(),executor:this.#e,node:TV.CreateSchemaNode.create(e)})}dropSchema(e){return new kV.DropSchemaBuilder({queryId:(0,_r.createQueryId)(),executor:this.#e,node:PV.DropSchemaNode.create(e)})}alterTable(e){return new DV.AlterTableBuilder({queryId:(0,_r.createQueryId)(),executor:this.#e,node:xV.AlterTableNode.create((0,zb.parseTable)(e))})}createView(e){return new zV.CreateViewBuilder({queryId:(0,_r.createQueryId)(),executor:this.#e,node:QV.CreateViewNode.create(e)})}dropView(e){return new $V.DropViewBuilder({queryId:(0,_r.createQueryId)(),executor:this.#e,node:VV.DropViewNode.create(e)})}createType(e){return new GV.CreateTypeBuilder({queryId:(0,_r.createQueryId)(),executor:this.#e,node:HV.CreateTypeNode.create((0,oC.parseSchemableIdentifier)(e))})}dropType(e){return new JV.DropTypeBuilder({queryId:(0,_r.createQueryId)(),executor:this.#e,node:KV.DropTypeNode.create((0,oC.parseSchemableIdentifier)(e))})}withPlugin(e){return new t(this.#e.withPlugin(e))}withoutPlugins(){return new t(this.#e.withoutPlugins())}withSchema(e){return new t(this.#e.withPluginAtFront(new FV.WithSchemaPlugin(e)))}};Jf.SchemaModule=Qb});var Gb=d(Hf=>{"use strict";o();s();Object.defineProperty(Hf,"__esModule",{value:!0});Hf.DynamicModule=void 0;var YV=td(),Vb=class{ref(e){return new YV.DynamicReferenceBuilder(e)}};Hf.DynamicModule=Vb});var Hb=d(Kf=>{"use strict";o();s();Object.defineProperty(Kf,"__esModule",{value:!0});Kf.DefaultConnectionProvider=void 0;var Jb=class{#e;constructor(e){this.#e=e}async provideConnection(e){let r=await this.#e.acquireConnection();try{return await e(r)}finally{await this.#e.releaseConnection(r)}}};Kf.DefaultConnectionProvider=Jb});var Yb=d(Yf=>{"use strict";o();s();Object.defineProperty(Yf,"__esModule",{value:!0});Yf.DefaultQueryExecutor=void 0;var XV=gg(),Kb=class t extends XV.QueryExecutorBase{#e;#t;#r;constructor(e,r,i,n=[]){super(n),this.#e=e,this.#t=r,this.#r=i}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#r.provideConnection(e)}withPlugins(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,...e])}withPlugin(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,e])}withPluginAtFront(e){return new t(this.#e,this.#t,this.#r,[e,...this.plugins])}withConnectionProvider(e){return new t(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new t(this.#e,this.#t,this.#r,[])}};Yf.DefaultQueryExecutor=Kb});var aC=d(Xb=>{"use strict";o();s();Object.defineProperty(Xb,"__esModule",{value:!0});Xb.performanceNow=eG;var ZV=g();function eG(){return typeof performance<"u"&&(0,ZV.isFunction)(performance.now)?performance.now():Date.now()}});var cC=d(Xf=>{"use strict";o();s();Object.defineProperty(Xf,"__esModule",{value:!0});Xf.RuntimeDriver=void 0;var uC=aC(),Zb=class{#e;#t;#r;#i;#n;#a=new WeakSet;constructor(e,r){this.#i=!1,this.#e=e,this.#t=r}async init(){if(this.#n)throw new Error("driver has already been destroyed");this.#r||(this.#r=this.#e.init().then(()=>{this.#i=!0}).catch(e=>(this.#r=void 0,Promise.reject(e)))),await this.#r}async acquireConnection(){if(this.#n)throw new Error("driver has already been destroyed");this.#i||await this.init();let e=await this.#e.acquireConnection();return this.#a.has(e)||(this.#s()&&this.#o(e),this.#a.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,r){return this.#e.beginTransaction(e,r)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#r&&(await this.#r,this.#n||(this.#n=this.#e.destroy().catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n)}#s(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#o(e){let r=e.executeQuery;e.executeQuery=async i=>{let n,a=(0,uC.performanceNow)();try{return await r.call(e,i)}catch(u){throw n=u,await this.#u(u,i,a),u}finally{n||await this.#c(i,a)}}}async#u(e,r,i){await this.#t.error(()=>({level:"error",error:e,query:r,queryDurationMillis:this.#l(i)}))}async#c(e,r){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#l(r)}))}#l(e){return(0,uC.performanceNow)()-e}};Xf.RuntimeDriver=Zb});var tO=d(Zf=>{"use strict";o();s();Object.defineProperty(Zf,"__esModule",{value:!0});Zf.SingleConnectionProvider=void 0;var tG=()=>{},eO=class{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(tG);return this.#t=this.#r(e).finally(()=>{this.#t=void 0}),this.#t}async#r(e){return await e(this.#e)}};Zf.SingleConnectionProvider=eO});var rO=d(em=>{"use strict";o();s();Object.defineProperty(em,"__esModule",{value:!0});em.TRANSACTION_ISOLATION_LEVELS=void 0;em.TRANSACTION_ISOLATION_LEVELS=["read uncommitted","read committed","repeatable read","serializable","snapshot"]});var nO=d(qo=>{"use strict";o();s();Object.defineProperty(qo,"__esModule",{value:!0});qo.Log=qo.LOG_LEVELS=void 0;var tm=g();qo.LOG_LEVELS=(0,tm.freeze)(["query","error"]);var iO=class{#e;#t;constructor(e){(0,tm.isFunction)(e)?(this.#t=e,this.#e=(0,tm.freeze)({query:!0,error:!0})):(this.#t=rG,this.#e=(0,tm.freeze)({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}};qo.Log=iO;function rG(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}});var oO=d(sO=>{"use strict";o();s();Object.defineProperty(sO,"__esModule",{value:!0});sO.isCompilable=iG;var lC=g();function iG(t){return(0,lC.isObject)(t)&&(0,lC.isFunction)(t.compile)}});var mC=d(wr=>{"use strict";o();s();Object.defineProperty(wr,"__esModule",{value:!0});wr.TransactionBuilder=wr.ConnectionBuilder=wr.Transaction=wr.Kysely=void 0;wr.isKyselyProps=fC;var nG=$b(),sG=Gb(),oG=Hb(),aG=Gp(),uG=Yb(),_i=g(),cG=cC(),dC=tO(),lG=rO(),pC=pe(),dG=ph(),pG=nO(),hG=zn(),fG=oO(),mG=wh(),yG=yu(),NG=yr(),hC=Qn(),Ru=class t extends aG.QueryCreator{#e;constructor(e){let r,i;if(fC(e))r={executor:e.executor},i={...e};else{let n=e.dialect,a=n.createDriver(),u=n.createQueryCompiler(),l=n.createAdapter(),h=new pG.Log(e.log??[]),y=new cG.RuntimeDriver(a,h),_=new oG.DefaultConnectionProvider(y),b=new uG.DefaultQueryExecutor(u,l,_,e.plugins??[]);r={executor:b},i={config:e,executor:b,dialect:n,driver:y}}super(r),this.#e=(0,_i.freeze)(i)}get schema(){return new nG.SchemaModule(this.#e.executor)}get dynamic(){return new sG.DynamicModule}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new mG.CaseBuilder({node:yG.CaseNode.create((0,_i.isUndefined)(e)?void 0:(0,NG.parseExpression)(e))})}get fn(){return(0,dG.createFunctionModule)()}transaction(){return new ju({...this.#e})}connection(){return new Pu({...this.#e})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new hC.WithSchemaPlugin(e))})}withTables(){return new t({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,r=(0,hG.createQueryId)()){let i=(0,fG.isCompilable)(e)?e.compile():e;return this.getExecutor().executeQuery(i,r)}};wr.Kysely=Ru;var rm=class t extends Ru{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new hC.WithSchemaPlugin(e))})}withTables(){return new t({...this.#e})}};wr.Transaction=rm;function fC(t){return(0,_i.isObject)(t)&&(0,_i.isObject)(t.config)&&(0,_i.isObject)(t.driver)&&(0,_i.isObject)(t.executor)&&(0,_i.isObject)(t.dialect)}var Pu=class{#e;constructor(e){this.#e=(0,_i.freeze)(e)}async execute(e){return this.#e.executor.provideConnection(async r=>{let i=this.#e.executor.withConnectionProvider(new dC.SingleConnectionProvider(r)),n=new Ru({...this.#e,executor:i});return await e(n)})}};wr.ConnectionBuilder=Pu;(0,pC.preventAwait)(Pu,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var ju=class t{#e;constructor(e){this.#e=(0,_i.freeze)(e)}setIsolationLevel(e){return new t({...this.#e,isolationLevel:e})}async execute(e){let{isolationLevel:r,...i}=this.#e,n={isolationLevel:r};return _G(n),this.#e.executor.provideConnection(async a=>{let u=this.#e.executor.withConnectionProvider(new dC.SingleConnectionProvider(a)),l=new rm({...i,executor:u});try{await this.#e.driver.beginTransaction(a,n);let h=await e(l);return await this.#e.driver.commitTransaction(a),h}catch(h){throw await this.#e.driver.rollbackTransaction(a),h}})}};wr.TransactionBuilder=ju;(0,pC.preventAwait)(ju,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function _G(t){if(t.isolationLevel&&!lG.TRANSACTION_ISOLATION_LEVELS.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}});var NC=d(yC=>{"use strict";o();s();Object.defineProperty(yC,"__esModule",{value:!0})});var wC=d(_C=>{"use strict";o();s();Object.defineProperty(_C,"__esModule",{value:!0})});var bC=d(gC=>{"use strict";o();s();Object.defineProperty(gC,"__esModule",{value:!0})});var EC=d(OC=>{"use strict";o();s();Object.defineProperty(OC,"__esModule",{value:!0})});var cO=d(uO=>{"use strict";o();s();Object.defineProperty(uO,"__esModule",{value:!0});uO.createRawBuilder=EG;var wG=Wr(),SC=pe(),aO=g(),gG=co(),bG=Pe(),OG=zt(),im=class t{#e;constructor(e){this.#e=(0,aO.freeze)(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new nm(this,e)}$castTo(){return new t({...this.#e})}$notNull(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,plugins:this.#e.plugins!==void 0?(0,aO.freeze)([...this.#e.plugins,e]):(0,aO.freeze)([e])})}toOperationNode(){return this.#r(this.#t())}compile(e){return this.#i(this.#t(e))}async execute(e){let r=this.#t(e);return r.executeQuery(this.#i(r),this.#e.queryId)}#t(e){let r=e!==void 0?e.getExecutor():gG.NOOP_QUERY_EXECUTOR;return this.#e.plugins!==void 0?r.withPlugins(this.#e.plugins):r}#r(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#i(e){return e.compileQuery(this.#r(e),this.#e.queryId)}};function EG(t){return new im(t)}(0,SC.preventAwait)(im,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var nm=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return wG.AliasNode.create(this.#e.toOperationNode(),(0,OG.isOperationNodeSource)(this.#t)?this.#t.toOperationNode():bG.IdentifierNode.create(this.#t))}};(0,SC.preventAwait)(nm,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.")});var sn=d(Du=>{"use strict";o();s();Object.defineProperty(Du,"__esModule",{value:!0});Du.sql=void 0;var SG=Pe(),vG=zt(),tn=di(),IG=pi(),qG=dt(),xG=_t(),IC=Br(),rn=zn(),nn=cO();Du.sql=Object.assign((t,...e)=>(0,nn.createRawBuilder)({queryId:(0,rn.createQueryId)(),rawNode:tn.RawNode.create(t,e?.map(vC)??[])}),{ref(t){return(0,nn.createRawBuilder)({queryId:(0,rn.createQueryId)(),rawNode:tn.RawNode.createWithChild((0,qG.parseStringReference)(t))})},val(t){return(0,nn.createRawBuilder)({queryId:(0,rn.createQueryId)(),rawNode:tn.RawNode.createWithChild((0,IC.parseValueExpression)(t))})},value(t){return this.val(t)},table(t){return(0,nn.createRawBuilder)({queryId:(0,rn.createQueryId)(),rawNode:tn.RawNode.createWithChild((0,xG.parseTable)(t))})},id(...t){let e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",(0,nn.createRawBuilder)({queryId:(0,rn.createQueryId)(),rawNode:tn.RawNode.create(e,t.map(SG.IdentifierNode.create))})},lit(t){return(0,nn.createRawBuilder)({queryId:(0,rn.createQueryId)(),rawNode:tn.RawNode.createWithChild(IG.ValueNode.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return(0,nn.createRawBuilder)({queryId:(0,rn.createQueryId)(),rawNode:tn.RawNode.createWithSql(t)})},join(t,e=(0,Du.sql)`, `){let r=new Array(2*t.length-1),i=e.toOperationNode();for(let n=0;n<t.length;++n)r[2*n]=vC(t[n]),n!==t.length-1&&(r[2*n+1]=i);return(0,nn.createRawBuilder)({queryId:(0,rn.createQueryId)(),rawNode:tn.RawNode.createWithChildren(r)})}});function vC(t){return(0,vG.isOperationNodeSource)(t)?t.toOperationNode():(0,IC.parseValueExpression)(t)}});var xC=d(qC=>{"use strict";o();s();Object.defineProperty(qC,"__esModule",{value:!0})});var TC=d(AC=>{"use strict";o();s();Object.defineProperty(AC,"__esModule",{value:!0})});var dO=d(sm=>{"use strict";o();s();Object.defineProperty(sm,"__esModule",{value:!0});sm.OperationNodeVisitor=void 0;var AG=g(),lO=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=(0,AG.freeze)({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}};sm.OperationNodeVisitor=lO});var Zn=d(am=>{"use strict";o();s();Object.defineProperty(am,"__esModule",{value:!0});am.DefaultQueryCompiler=void 0;var TG=Hs(),CG=Wn(),RG=dO(),PG=Pn(),jG=Zs(),pO=hi(),$t=g(),DG=Cu(),MG=Yp(),om=no(),hO=class extends RG.OperationNodeVisitor{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),(0,$t.freeze)({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){let r=this.parentNode!==void 0&&!jG.ParensNode.is(this.parentNode)&&!CG.InsertQueryNode.is(this.parentNode)&&!TG.CreateTableNode.is(this.parentNode)&&!DG.CreateViewNode.is(this.parentNode)&&!MG.SetOperationNode.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),r&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,r=", "){let i=e.length-1;for(let n=0;n<=i;n++)this.visitNode(e[n]),n<i&&this.append(r)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let r=this.nodeStack.find(pO.QueryNode.is),i=r!==e;!i&&e.explain&&(this.visitNode(e.explain),this.append(" ")),i&&!om.MergeQueryNode.is(r)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),i&&!om.MergeQueryNode.is(r)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let r=this.nodeStack.find(pO.QueryNode.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!(0,$t.isString)(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:r}=e;for(let i=0;i<r.length;++i)this.appendValue(r[i]),i!==r.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(LG[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:r,parameters:i}=e;for(let n=0;n<r.length;++n)this.append(r[n]),i.length>n&&this.visitNode(i[n])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let r=this.nodeStack.find(pO.QueryNode.is),i=r!==e;!i&&e.explain&&(this.visitNode(e.explain),this.append(" ")),i&&!om.MergeQueryNode.is(r)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),i&&!om.MergeQueryNode.is(r)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),(0,$t.isBoolean)(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(WG[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return PG.OperatorNode.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(let r of e.pathLegs)this.visitNode(r);this.append("'")}visitJSONPathLeg(e){let r=e.type==="ArrayLocation";this.append(r?"[":"."),this.append(String(e.value)),r&&this.append("]")}visitJSONOperatorChain(e){for(let r=0,i=e.values.length;r<i;r++)r===i-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[r])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let r=this.getLeftIdentifierWrapper(),i=this.getRightIdentifierWrapper(),n="";for(let a of e)n+=a,a===r?n+=r:a===i&&(n+=i);return n}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if((0,$t.isString)(e))this.append(`'${e}'`);else if((0,$t.isNumber)(e)||(0,$t.isBoolean)(e))this.append(e.toString());else if((0,$t.isNull)(e))this.append("null");else if((0,$t.isDate)(e))this.appendImmediateValue(e.toISOString());else if((0,$t.isBigInt)(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((r,i)=>r.modifier&&i.modifier?CC[r.modifier]-CC[i.modifier]:1),(0,$t.freeze)(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}};am.DefaultQueryCompiler=hO;var WG=(0,$t.freeze)({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),CC=(0,$t.freeze)({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),LG=(0,$t.freeze)({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"})});var xo=d(um=>{"use strict";o();s();Object.defineProperty(um,"__esModule",{value:!0});um.CompiledQuery=void 0;var BG=di(),fO=g();um.CompiledQuery=(0,fO.freeze)({raw(t,e=[]){return(0,fO.freeze)({sql:t,query:BG.RawNode.createWithSql(t),parameters:(0,fO.freeze)(e)})}})});var PC=d(RC=>{"use strict";o();s();Object.defineProperty(RC,"__esModule",{value:!0})});var DC=d(jC=>{"use strict";o();s();Object.defineProperty(jC,"__esModule",{value:!0})});var MC=d(cm=>{"use strict";o();s();Object.defineProperty(cm,"__esModule",{value:!0});cm.DummyDriver=void 0;var mO=class{async init(){}async acquireConnection(){return new yO}async beginTransaction(){}async commitTransaction(){}async rollbackTransaction(){}async releaseConnection(){}async destroy(){}};cm.DummyDriver=mO;var yO=class{async executeQuery(){return{rows:[]}}async*streamQuery(){}}});var LC=d(WC=>{"use strict";o();s();Object.defineProperty(WC,"__esModule",{value:!0})});var kC=d(BC=>{"use strict";o();s();Object.defineProperty(BC,"__esModule",{value:!0})});var Ao=d(lm=>{"use strict";o();s();Object.defineProperty(lm,"__esModule",{value:!0});lm.DialectAdapterBase=void 0;var NO=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}};lm.DialectAdapterBase=NO});var FC=d(UC=>{"use strict";o();s();Object.defineProperty(UC,"__esModule",{value:!0})});var OO=d(dm=>{"use strict";o();s();Object.defineProperty(dm,"__esModule",{value:!0});dm.SqliteDriver=void 0;var kG=zi(),_O=xo(),zC=g(),wO=class{#e;#t=new bO;#r;#i;constructor(e){this.#e=(0,zC.freeze)({...e})}async init(){this.#r=(0,zC.isFunction)(this.#e.database)?await this.#e.database():this.#e.database,this.#i=new gO(this.#r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(this.#i)}async acquireConnection(){return await this.#t.lock(),this.#i}async beginTransaction(e){await e.executeQuery(_O.CompiledQuery.raw("begin"))}async commitTransaction(e){await e.executeQuery(_O.CompiledQuery.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(_O.CompiledQuery.raw("rollback"))}async releaseConnection(){this.#t.unlock()}async destroy(){this.#r?.close()}};dm.SqliteDriver=wO;var gO=class{#e;constructor(e){this.#e=e}executeQuery(e){let{sql:r,parameters:i}=e,n=this.#e.prepare(r);if(n.reader)return Promise.resolve({rows:n.all(i)});{let{changes:a,lastInsertRowid:u}=n.run(i),l=a!=null?BigInt(a):void 0;return Promise.resolve({numUpdatedOrDeletedRows:l,numAffectedRows:l,insertId:u!=null?BigInt(u):void 0,rows:[]})}}async*streamQuery(e,r){let{sql:i,parameters:n,query:a}=e,u=this.#e.prepare(i);if(kG.SelectQueryNode.is(a)){let l=u.iterate(n);for(let h of l)yield{rows:[h]}}else throw new Error("Sqlite driver only supports streaming of select queries")}},bO=class{#e;#t;async lock(){for(;this.#e;)await this.#e;this.#e=new Promise(e=>{this.#t=e})}unlock(){let e=this.#t;this.#e=void 0,this.#t=void 0,e?.()}}});var SO=d(pm=>{"use strict";o();s();Object.defineProperty(pm,"__esModule",{value:!0});pm.SqliteQueryCompiler=void 0;var UG=Zn(),FG=/"/g,EO=class extends UG.DefaultQueryCompiler{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier(e){return e.replace(FG,'""')}visitDefaultInsertValue(e){this.append("null")}};pm.SqliteQueryCompiler=EO});var QC=d(hm=>{"use strict";o();s();Object.defineProperty(hm,"__esModule",{value:!0});hm.NoopPlugin=void 0;var vO=class{transformQuery(e){return e.node}async transformResult(e){return e.result}};hm.NoopPlugin=vO});var es=d(Ue=>{"use strict";o();s();Object.defineProperty(Ue,"__esModule",{value:!0});Ue.Migrator=Ue.NO_MIGRATIONS=Ue.MIGRATION_LOCK_ID=Ue.DEFAULT_ALLOW_UNORDERED_MIGRATIONS=Ue.DEFAULT_MIGRATION_LOCK_TABLE=Ue.DEFAULT_MIGRATION_TABLE=void 0;var zG=QC(),QG=Qn(),Mu=g();Ue.DEFAULT_MIGRATION_TABLE="kysely_migration";Ue.DEFAULT_MIGRATION_LOCK_TABLE="kysely_migration_lock";Ue.DEFAULT_ALLOW_UNORDERED_MIGRATIONS=!1;Ue.MIGRATION_LOCK_ID="migration_lock";Ue.NO_MIGRATIONS=(0,Mu.freeze)({__noMigrations__:!0});var IO=class{#e;constructor(e){this.#e=(0,Mu.freeze)(e)}async getMigrations(){let e=await this.#d(this.#i)?await this.#e.db.withPlugin(this.#s).selectFrom(this.#i).select(["name","timestamp"]).execute():[];return(await this.#m()).map(({name:i,...n})=>{let a=e.find(u=>u.name===i);return{name:i,migration:n,executedAt:a?new Date(a.timestamp):void 0}})}async migrateToLatest(){return this.#t(()=>({direction:"Up",step:1/0}))}async migrateTo(e){return this.#t(({migrations:r,executedMigrations:i,pendingMigrations:n})=>{if(e===Ue.NO_MIGRATIONS)return{direction:"Down",step:1/0};if(!r.find(l=>l.name===e))throw new Error(`migration "${e}" doesn't exist`);let a=i.indexOf(e),u=n.findIndex(l=>l.name===e);if(a!==-1)return{direction:"Down",step:i.length-a-1};if(u!==-1)return{direction:"Up",step:u+1};throw new Error(`migration "${e}" isn't executed or pending`)})}async migrateUp(){return this.#t(()=>({direction:"Up",step:1}))}async migrateDown(){return this.#t(()=>({direction:"Down",step:1}))}async#t(e){try{return await this.#o(),await this.#N(e)}catch(r){return r instanceof Wu?r.resultSet:{error:r}}}get#r(){return this.#e.migrationTableSchema}get#i(){return this.#e.migrationTableName??Ue.DEFAULT_MIGRATION_TABLE}get#n(){return this.#e.migrationLockTableName??Ue.DEFAULT_MIGRATION_LOCK_TABLE}get#a(){return this.#e.allowUnorderedMigrations??Ue.DEFAULT_ALLOW_UNORDERED_MIGRATIONS}get#s(){return this.#r?new QG.WithSchemaPlugin(this.#r):new zG.NoopPlugin}async#o(){await this.#u(),await this.#c(),await this.#l(),await this.#y()}async#u(){if(this.#r&&!await this.#h())try{await this.#p(this.#e.db.schema.createSchema(this.#r))}catch(e){if(!await this.#h())throw e}}async#c(){if(!await this.#d(this.#i))try{this.#r&&await this.#p(this.#e.db.schema.createSchema(this.#r)),await this.#p(this.#e.db.schema.withPlugin(this.#s).createTable(this.#i).addColumn("name","varchar(255)",e=>e.notNull().primaryKey()).addColumn("timestamp","varchar(255)",e=>e.notNull()))}catch(e){if(!await this.#d(this.#i))throw e}}async#l(){if(!await this.#d(this.#n))try{await this.#p(this.#e.db.schema.withPlugin(this.#s).createTable(this.#n).addColumn("id","varchar(255)",e=>e.notNull().primaryKey()).addColumn("is_locked","integer",e=>e.notNull().defaultTo(0)))}catch(e){if(!await this.#d(this.#n))throw e}}async#y(){if(!await this.#f())try{await this.#e.db.withPlugin(this.#s).insertInto(this.#n).values({id:Ue.MIGRATION_LOCK_ID,is_locked:0}).execute()}catch(e){if(!await this.#f())throw e}}async#h(){return(await this.#e.db.introspection.getSchemas()).some(r=>r.name===this.#r)}async#d(e){let r=this.#r;return(await this.#e.db.introspection.getTables({withInternalKyselyTables:!0})).some(n=>n.name===e&&(!r||n.schema===r))}async#f(){return!!await this.#e.db.withPlugin(this.#s).selectFrom(this.#n).where("id","=",Ue.MIGRATION_LOCK_ID).select("id").executeTakeFirst()}async#N(e){let r=this.#e.db.getExecutor().adapter,i=(0,Mu.freeze)({lockTable:this.#e.migrationLockTableName??Ue.DEFAULT_MIGRATION_LOCK_TABLE,lockRowId:Ue.MIGRATION_LOCK_ID,lockTableSchema:this.#e.migrationTableSchema}),n=async a=>{try{await r.acquireMigrationLock(a,i);let u=await this.#_(a);if(u.migrations.length===0)return{results:[]};let{direction:l,step:h}=e(u);return h<=0?{results:[]}:l==="Down"?await this.#E(a,u,h):l==="Up"?await this.#S(a,u,h):{results:[]}}finally{await r.releaseMigrationLock(a,i)}};return r.supportsTransactionalDdl?this.#e.db.transaction().execute(n):this.#e.db.connection().execute(n)}async#_(e){let r=await this.#m(),i=await this.#g(e);this.#b(r,i),this.#a||this.#O(r,i);let n=this.#w(r,i);return(0,Mu.freeze)({migrations:r,executedMigrations:i,lastMigration:(0,Mu.getLast)(i),pendingMigrations:n})}#w(e,r){return e.filter(i=>!r.includes(i.name))}async#m(){let e=await this.#e.provider.getMigrations();return Object.keys(e).sort().map(r=>({...e[r],name:r}))}async#g(e){return(await e.withPlugin(this.#s).selectFrom(this.#i).select("name").orderBy(["timestamp","name"]).execute()).map(i=>i.name)}#b(e,r){for(let i of r)if(!e.some(n=>n.name===i))throw new Error(`corrupted migrations: previously executed migration ${i} is missing`)}#O(e,r){for(let i=0;i<r.length;++i)if(e[i].name!==r[i])throw new Error(`corrupted migrations: expected previously executed migration ${r[i]} to be at index ${i} but ${e[i].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#E(e,r,i){let n=r.executedMigrations.slice().reverse().slice(0,i).map(u=>r.migrations.find(l=>l.name===u)),a=n.map(u=>({migrationName:u.name,direction:"Down",status:"NotExecuted"}));for(let u=0;u<a.length;++u){let l=n[u];try{l.down&&(await l.down(e),await e.withPlugin(this.#s).deleteFrom(this.#i).where("name","=",l.name).execute(),a[u]={migrationName:l.name,direction:"Down",status:"Success"})}catch(h){throw a[u]={migrationName:l.name,direction:"Down",status:"Error"},new Wu({error:h,results:a})}}return{results:a}}async#S(e,r,i){let a=r.pendingMigrations.slice(0,i).map(u=>({migrationName:u.name,direction:"Up",status:"NotExecuted"}));for(let u=0;u<a.length;u++){let l=r.pendingMigrations[u];try{await l.up(e),await e.withPlugin(this.#s).insertInto(this.#i).values({name:l.name,timestamp:new Date().toISOString()}).execute(),a[u]={migrationName:l.name,direction:"Up",status:"Success"}}catch(h){throw a[u]={migrationName:l.name,direction:"Up",status:"Error"},new Wu({error:h,results:a})}}return{results:a}}async#p(e){this.#e.db.getExecutor().adapter.supportsCreateIfNotExists&&(e=e.ifNotExists()),await e.execute()}};Ue.Migrator=IO;var Wu=class extends Error{#e;constructor(e){super(),this.#e=e}get resultSet(){return this.#e}}});var xO=d(fm=>{"use strict";o();s();Object.defineProperty(fm,"__esModule",{value:!0});fm.SqliteIntrospector=void 0;var $C=es(),$G=sn(),qO=class{#e;constructor(e){this.#e=e}async getSchemas(){return[]}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select("name").orderBy("name").$castTo();e.withInternalKyselyTables||(r=r.where("name","!=",$C.DEFAULT_MIGRATION_TABLE).where("name","!=",$C.DEFAULT_MIGRATION_LOCK_TABLE));let i=await r.execute();return Promise.all(i.map(({name:n})=>this.#t(n)))}async getMetadata(e){return{tables:await this.getTables(e)}}async#t(e){let r=this.#e,i=await r.selectFrom("sqlite_master").where("name","=",e).select(["sql","type"]).$castTo().executeTakeFirstOrThrow(),n=i.sql?.split(/[\(\),]/)?.find(u=>u.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),a=await r.selectFrom((0,$G.sql)`pragma_table_info(${e})`.as("table_info")).select(["name","type","notnull","dflt_value"]).orderBy("cid").execute();return{name:e,isView:i.type==="view",columns:a.map(u=>({name:u.name,dataType:u.type,isNullable:!u.notnull,isAutoIncrementing:u.name===n,hasDefaultValue:u.dflt_value!=null,comment:void 0}))}}};fm.SqliteIntrospector=qO});var TO=d(mm=>{"use strict";o();s();Object.defineProperty(mm,"__esModule",{value:!0});mm.SqliteAdapter=void 0;var VG=Ao(),AO=class extends VG.DialectAdapterBase{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(e,r){}async releaseMigrationLock(e,r){}};mm.SqliteAdapter=AO});var VC=d(ym=>{"use strict";o();s();Object.defineProperty(ym,"__esModule",{value:!0});ym.SqliteDialect=void 0;var GG=OO(),JG=SO(),HG=xO(),KG=TO(),YG=g(),CO=class{#e;constructor(e){this.#e=(0,YG.freeze)({...e})}createDriver(){return new GG.SqliteDriver(this.#e)}createQueryCompiler(){return new JG.SqliteQueryCompiler}createAdapter(){return new KG.SqliteAdapter}createIntrospector(e){return new HG.SqliteIntrospector(e)}};ym.SqliteDialect=CO});var JC=d(GC=>{"use strict";o();s();Object.defineProperty(GC,"__esModule",{value:!0})});var PO=d(Nm=>{"use strict";o();s();Object.defineProperty(Nm,"__esModule",{value:!0});Nm.PostgresQueryCompiler=void 0;var XG=Zn(),ZG=/"/g,RO=class extends XG.DefaultQueryCompiler{sanitizeIdentifier(e){return e.replace(ZG,'""')}};Nm.PostgresQueryCompiler=RO});var MO=d(_m=>{"use strict";o();s();Object.defineProperty(_m,"__esModule",{value:!0});_m.PostgresIntrospector=void 0;var HC=es(),KC=g(),jO=sn(),DO=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(r=>({name:r.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",(0,jO.sql)`col_description(a.attrelid, a.attnum)`.as("column_description"),this.#e.selectFrom("pg_class").select((0,jO.sql)`true`.as("auto_incrementing")).whereRef("relnamespace","=","c.relnamespace").where("relkind","=","S").where("relname","=",(0,jO.sql)`c.relname || '_' || a.attname || '_seq'`).as("auto_incrementing")]).where(n=>n.or([n("c.relkind","=","r"),n("c.relkind","=","v"),n("c.relkind","=","p")])).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(r=r.where("c.relname","!=",HC.DEFAULT_MIGRATION_TABLE).where("c.relname","!=",HC.DEFAULT_MIGRATION_LOCK_TABLE));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let n=r.find(a=>a.name===i.table&&a.schema===i.schema);return n||(n=(0,KC.freeze)({name:i.table,isView:i.table_type==="v",schema:i.schema,columns:[]}),r.push(n)),n.columns.push((0,KC.freeze)({name:i.column,dataType:i.type,dataTypeSchema:i.type_schema,isNullable:!i.not_null,isAutoIncrementing:!!i.auto_incrementing,hasDefaultValue:i.has_default,comment:i.column_description??void 0})),r},[])}};_m.PostgresIntrospector=DO});var LO=d(wm=>{"use strict";o();s();Object.defineProperty(wm,"__esModule",{value:!0});wm.PostgresAdapter=void 0;var YC=sn(),e6=Ao(),t6=BigInt("3853314791062309107"),WO=class extends e6.DialectAdapterBase{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e,r){await(0,YC.sql)`select pg_advisory_xact_lock(${YC.sql.lit(t6)})`.execute(e)}async releaseMigrationLock(e,r){}};wm.PostgresAdapter=WO});var gm=d(BO=>{"use strict";o();s();Object.defineProperty(BO,"__esModule",{value:!0});BO.extendStackTrace=r6;var XC=g();function r6(t,e){if(i6(t)&&e.stack){let r=e.stack.split(`
`).slice(1).join(`
`);return t.stack+=`
${r}`,t}return t}function i6(t){return(0,XC.isObject)(t)&&(0,XC.isString)(t.stack)}});var zO=d(Om=>{"use strict";o();s();Object.defineProperty(Om,"__esModule",{value:!0});Om.MysqlDriver=void 0;var bm=xo(),kO=g(),n6=gm(),ZC=Symbol(),UO=class{#e;#t=new WeakMap;#r;constructor(e){this.#e=(0,kO.freeze)({...e})}async init(){this.#r=(0,kO.isFunction)(this.#e.pool)?await this.#e.pool():this.#e.pool}async acquireConnection(){let e=await this.#i(),r=this.#t.get(e);return r||(r=new FO(e),this.#t.set(e,r),this.#e?.onCreateConnection&&await this.#e.onCreateConnection(r)),this.#e?.onReserveConnection&&await this.#e.onReserveConnection(r),r}async#i(){return new Promise((e,r)=>{this.#r.getConnection(async(i,n)=>{i?r(i):e(n)})})}async beginTransaction(e,r){r.isolationLevel&&await e.executeQuery(bm.CompiledQuery.raw(`set transaction isolation level ${r.isolationLevel}`)),await e.executeQuery(bm.CompiledQuery.raw("begin"))}async commitTransaction(e){await e.executeQuery(bm.CompiledQuery.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(bm.CompiledQuery.raw("rollback"))}async releaseConnection(e){e[ZC]()}async destroy(){return new Promise((e,r)=>{this.#r.end(i=>{i?r(i):e()})})}};Om.MysqlDriver=UO;function s6(t){return(0,kO.isObject)(t)&&"insertId"in t&&"affectedRows"in t}var FO=class{#e;constructor(e){this.#e=e}async executeQuery(e){try{let r=await this.#t(e);if(s6(r)){let{insertId:i,affectedRows:n,changedRows:a}=r,u=n!=null?BigInt(n):void 0,l=a!=null?BigInt(a):void 0;return{insertId:i!=null&&i.toString()!=="0"?BigInt(i):void 0,numUpdatedOrDeletedRows:u,numAffectedRows:u,numChangedRows:l,rows:[]}}else if(Array.isArray(r))return{rows:r};return{rows:[]}}catch(r){throw(0,n6.extendStackTrace)(r,new Error)}}#t(e){return new Promise((r,i)=>{this.#e.query(e.sql,e.parameters,(n,a)=>{n?i(n):r(a)})})}async*streamQuery(e,r){let i=this.#e.query(e.sql,e.parameters).stream({objectMode:!0});try{for await(let n of i)yield{rows:[n]}}catch(n){if(n&&typeof n=="object"&&"code"in n&&n.code==="ERR_STREAM_PREMATURE_CLOSE")return;throw n}}[ZC](){this.#e.release()}}});var $O=d(Em=>{"use strict";o();s();Object.defineProperty(Em,"__esModule",{value:!0});Em.MysqlQueryCompiler=void 0;var o6=Zn(),a6=/`/g,QO=class extends o6.DefaultQueryCompiler{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier(e){return e.replace(a6,"``")}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.using&&(this.append(" using "),this.visitNode(e.using)),e.table&&(this.append(" on "),this.visitNode(e.table)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.where&&(this.append(" "),this.visitNode(e.where))}};Em.MysqlQueryCompiler=QO});var GO=d(Sm=>{"use strict";o();s();Object.defineProperty(Sm,"__esModule",{value:!0});Sm.MysqlIntrospector=void 0;var e1=es(),t1=g(),u6=sn(),VO=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map(r=>({name:r.SCHEMA_NAME}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",n=>n.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",(0,u6.sql)`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();e.withInternalKyselyTables||(r=r.where("columns.TABLE_NAME","!=",e1.DEFAULT_MIGRATION_TABLE).where("columns.TABLE_NAME","!=",e1.DEFAULT_MIGRATION_LOCK_TABLE));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let n=r.find(a=>a.name===i.TABLE_NAME);return n||(n=(0,t1.freeze)({name:i.TABLE_NAME,isView:i.TABLE_TYPE==="VIEW",schema:i.TABLE_SCHEMA,columns:[]}),r.push(n)),n.columns.push((0,t1.freeze)({name:i.COLUMN_NAME,dataType:i.DATA_TYPE,isNullable:i.IS_NULLABLE==="YES",isAutoIncrementing:i.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:i.COLUMN_DEFAULT!==null,comment:i.COLUMN_COMMENT===""?void 0:i.COLUMN_COMMENT})),r},[])}};Sm.MysqlIntrospector=VO});var HO=d(vm=>{"use strict";o();s();Object.defineProperty(vm,"__esModule",{value:!0});vm.MysqlAdapter=void 0;var Lu=sn(),c6=Ao(),r1="ea586330-2c93-47c8-908d-981d9d270f9d",l6=60*60,JO=class extends c6.DialectAdapterBase{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(e,r){await(0,Lu.sql)`select get_lock(${Lu.sql.lit(r1)}, ${Lu.sql.lit(l6)})`.execute(e)}async releaseMigrationLock(e,r){await(0,Lu.sql)`select release_lock(${Lu.sql.lit(r1)})`.execute(e)}};vm.MysqlAdapter=JO});var i1=d(Im=>{"use strict";o();s();Object.defineProperty(Im,"__esModule",{value:!0});Im.MysqlDialect=void 0;var d6=zO(),p6=$O(),h6=GO(),f6=HO(),KO=class{#e;constructor(e){this.#e=e}createDriver(){return new d6.MysqlDriver(this.#e)}createQueryCompiler(){return new p6.MysqlQueryCompiler}createAdapter(){return new f6.MysqlAdapter}createIntrospector(e){return new h6.MysqlIntrospector(e)}};Im.MysqlDialect=KO});var s1=d(n1=>{"use strict";o();s();Object.defineProperty(n1,"__esModule",{value:!0})});var ZO=d(xm=>{"use strict";o();s();Object.defineProperty(xm,"__esModule",{value:!0});xm.PostgresDriver=void 0;var qm=xo(),o1=g(),m6=gm(),a1=Symbol(),YO=class{#e;#t=new WeakMap;#r;constructor(e){this.#e=(0,o1.freeze)({...e})}async init(){this.#r=(0,o1.isFunction)(this.#e.pool)?await this.#e.pool():this.#e.pool}async acquireConnection(){let e=await this.#r.connect(),r=this.#t.get(e);return r||(r=new XO(e,{cursor:this.#e.cursor??null}),this.#t.set(e,r),this.#e.onCreateConnection&&await this.#e.onCreateConnection(r)),this.#e.onReserveConnection&&await this.#e.onReserveConnection(r),r}async beginTransaction(e,r){r.isolationLevel?await e.executeQuery(qm.CompiledQuery.raw(`start transaction isolation level ${r.isolationLevel}`)):await e.executeQuery(qm.CompiledQuery.raw("begin"))}async commitTransaction(e){await e.executeQuery(qm.CompiledQuery.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(qm.CompiledQuery.raw("rollback"))}async releaseConnection(e){e[a1]()}async destroy(){if(this.#r){let e=this.#r;this.#r=void 0,await e.end()}}};xm.PostgresDriver=YO;var XO=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}async executeQuery(e){try{let r=await this.#e.query(e.sql,[...e.parameters]);if(r.command==="INSERT"||r.command==="UPDATE"||r.command==="DELETE"||r.command==="MERGE"){let i=BigInt(r.rowCount);return{numUpdatedOrDeletedRows:i,numAffectedRows:i,rows:r.rows??[]}}return{rows:r.rows??[]}}catch(r){throw(0,m6.extendStackTrace)(r,new Error)}}async*streamQuery(e,r){if(!this.#t.cursor)throw new Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(r)||r<=0)throw new Error("chunkSize must be a positive integer");let i=this.#e.query(new this.#t.cursor(e.sql,e.parameters.slice()));try{for(;;){let n=await i.read(r);if(n.length===0)break;yield{rows:n}}}finally{await i.close()}}[a1](){this.#e.release()}}});var c1=d(u1=>{"use strict";o();s();Object.defineProperty(u1,"__esModule",{value:!0})});var l1=d(Am=>{"use strict";o();s();Object.defineProperty(Am,"__esModule",{value:!0});Am.PostgresDialect=void 0;var y6=ZO(),N6=MO(),_6=PO(),w6=LO(),eE=class{#e;constructor(e){this.#e=e}createDriver(){return new y6.PostgresDriver(this.#e)}createQueryCompiler(){return new _6.PostgresQueryCompiler}createAdapter(){return new w6.PostgresAdapter}createIntrospector(e){return new N6.PostgresIntrospector(e)}};Am.PostgresDialect=eE});var rE=d(Cm=>{"use strict";o();s();Object.defineProperty(Cm,"__esModule",{value:!0});Cm.MssqlAdapter=void 0;var g6=es(),Tm=sn(),b6=Ao(),tE=class extends b6.DialectAdapterBase{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock(e){await(0,Tm.sql)`exec sp_getapplock @DbPrincipal = ${Tm.sql.lit("dbo")}, @Resource = ${Tm.sql.lit(g6.DEFAULT_MIGRATION_TABLE)}, @LockMode = ${Tm.sql.lit("Exclusive")}`.execute(e)}async releaseMigrationLock(){}};Cm.MssqlAdapter=tE});var p1=d(d1=>{"use strict";o();s();Object.defineProperty(d1,"__esModule",{value:!0})});var sE=d(Rm=>{"use strict";o();s();Object.defineProperty(Rm,"__esModule",{value:!0});Rm.MssqlDriver=void 0;var Qr=g(),O6=xo(),E6=gm(),S6=sg(),h1=yg(),f1=Symbol(),m1=Symbol(),iE=class{#e;#t;constructor(e){this.#e=(0,Qr.freeze)({...e});let{tarn:r,tedious:i}=this.#e,{validateConnections:n,...a}=r.options;this.#t=new r.Pool({...a,create:async()=>{let u=await i.connectionFactory();return await new nE(u,i).connect()},destroy:async u=>{await u[m1]()},validate:n===!1?void 0:u=>u.validate()})}async init(){}async acquireConnection(){return await this.#t.acquire().promise}async beginTransaction(e,r){await e.beginTransaction(r)}async commitTransaction(e){await e.commitTransaction()}async rollbackTransaction(e){await e.rollbackTransaction()}async releaseConnection(e){await e[f1](),this.#t.release(e)}async destroy(){await this.#t.destroy()}};Rm.MssqlDriver=iE;var nE=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r,this.#e.on("error",console.error),this.#e.once("end",()=>{this.#e.off("error",console.error)})}async beginTransaction(e){let{isolationLevel:r}=e;await new Promise((i,n)=>this.#e.beginTransaction(a=>{a?n(a):i(void 0)},r?(0,S6.randomString)(8):void 0,r?this.#r(r):void 0))}async commitTransaction(){await new Promise((e,r)=>this.#e.commitTransaction(i=>{i?r(i):e(void 0)}))}async connect(){return await new Promise((e,r)=>{this.#e.connect(i=>{i?(console.error(i),r(i)):e(void 0)})}),this}async executeQuery(e){try{let r=new h1.Deferred,i=new Bu({compiledQuery:e,tedious:this.#t,onDone:r});this.#e.execSql(i.request);let{rowCount:n,rows:a}=await r.promise;return{numAffectedRows:n!==void 0?BigInt(n):void 0,rows:a}}catch(r){throw(0,E6.extendStackTrace)(r,new Error)}}async rollbackTransaction(){await new Promise((e,r)=>this.#e.rollbackTransaction(i=>{i?r(i):e(void 0)}))}async*streamQuery(e,r){if(!Number.isInteger(r)||r<=0)throw new Error("chunkSize must be a positive integer");let i=new Bu({compiledQuery:e,streamChunkSize:r,tedious:this.#t});this.#e.execSql(i.request);try{for(;;){let n=await i.readChunk();if(n.length===0||(yield{rows:n},n.length<r))break}}finally{await this.#i(i)}}async validate(){try{let e=new h1.Deferred,r=new Bu({compiledQuery:O6.CompiledQuery.raw("select 1"),onDone:e,tedious:this.#t});return this.#e.execSql(r.request),await e.promise,!0}catch{return!1}}#r(e){let{ISOLATION_LEVEL:r}=this.#t,n={"read committed":r.READ_COMMITTED,"read uncommitted":r.READ_UNCOMMITTED,"repeatable read":r.REPEATABLE_READ,serializable:r.SERIALIZABLE,snapshot:r.SNAPSHOT}[e];if(n===void 0)throw new Error(`Unknown isolation level: ${e}`);return n}#i(e){return new Promise(r=>{e.request.once("requestCompleted",r),this.#e.cancel()||(e.request.off("requestCompleted",r),r(void 0))})}async[f1](){this.#t.resetConnectionOnRelease!==!1&&await new Promise((e,r)=>{this.#e.reset(i=>{i?r(i):e(void 0)})})}[m1](){return new Promise(e=>{this.#e.once("end",()=>{e(void 0)}),this.#e.close()})}},Bu=class{#e;#t;#r;#i;#n;#a;#s;constructor(e){let{compiledQuery:r,onDone:i,streamChunkSize:n,tedious:a}=e;if(this.#t=[],this.#r=n,this.#i={},this.#n=a,i){let u="onDone";this.#i[u]=(l,h)=>{l!=="chunkReady"&&(delete this.#i[u],l==="error"?i.reject(h):i.resolve({rowCount:this.#s,rows:this.#t}))}}this.#e=new this.#n.Request(r.sql,(u,l)=>{u?Object.values(this.#i).forEach(h=>h("error",u instanceof AggregateError?u.errors:u)):this.#s=l}),this.#o(r.parameters),this.#u()}get request(){return this.#e}readChunk(){let e=this.readChunk.name;return new Promise((r,i)=>{this.#i[e]=(n,a)=>{delete this.#i[e],n==="error"?i(a):r(this.#t.splice(0,this.#r))},this.#e.resume()})}#o(e){for(let r=0;r<e.length;r++){let i=e[r];this.#e.addParameter(String(r+1),this.#c(i),i)}}#u(){let e=this.#r?()=>{this.#r<=this.#t.length&&(this.#e.pause(),Object.values(this.#i).forEach(i=>i("chunkReady")))}:()=>{},r=i=>{let n={};for(let a of i)n[a.metadata.colName]=a.value;this.#t.push(n),e()};this.#e.on("row",r),this.#e.once("requestCompleted",()=>{Object.values(this.#i).forEach(i=>i("completed")),this.#e.off("row",r)})}#c(e){return(0,Qr.isNull)(e)||(0,Qr.isUndefined)(e)||(0,Qr.isString)(e)?this.#n.TYPES.NVarChar:(0,Qr.isBigInt)(e)||(0,Qr.isNumber)(e)&&e%1===0?e<-2147483648||e>2147483647?this.#n.TYPES.BigInt:this.#n.TYPES.Int:(0,Qr.isNumber)(e)?this.#n.TYPES.Float:(0,Qr.isBoolean)(e)?this.#n.TYPES.Bit:(0,Qr.isDate)(e)?this.#n.TYPES.DateTime:(0,Qr.isBuffer)(e)?this.#n.TYPES.VarBinary:this.#n.TYPES.NVarChar}}});var aE=d(Pm=>{"use strict";o();s();Object.defineProperty(Pm,"__esModule",{value:!0});Pm.MssqlIntrospector=void 0;var y1=es(),N1=g(),oE=class{#e;constructor(e){this.#e=e}async getSchemas(){return await this.#e.selectFrom("sys.schemas").select("name").execute()}async getTables(e={withInternalKyselyTables:!1}){let r=await this.#e.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",n=>n.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!e.withInternalKyselyTables,n=>n.where("tables.name","!=",y1.DEFAULT_MIGRATION_TABLE).where("tables.name","!=",y1.DEFAULT_MIGRATION_LOCK_TABLE)).select(["tables.name as table_name",n=>n.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#e.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",n=>n.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),i={};for(let n of r){let a=`${n.table_schema_name}.${n.table_name}`;(i[a]=i[a]||(0,N1.freeze)({columns:[],isView:n.table_type==="V ",name:n.table_name,schema:n.table_schema_name??void 0})).columns.push((0,N1.freeze)({dataType:n.type_name,dataTypeSchema:n.type_schema_name??void 0,hasDefaultValue:n.column_default_object_id>0||n.column_generated_always_type!=="NOT_APPLICABLE"||n.column_is_identity||n.column_is_computed||n.column_is_rowguidcol,isAutoIncrementing:n.column_is_identity,isNullable:n.column_is_nullable&&n.type_is_nullable,name:n.column_name,comment:n.column_comment??void 0}))}return Object.values(i)}async getMetadata(e){return{tables:await this.getTables(e)}}};Pm.MssqlIntrospector=oE});var cE=d(jm=>{"use strict";o();s();Object.defineProperty(jm,"__esModule",{value:!0});jm.MssqlQueryCompiler=void 0;var v6=Zn(),uE=class extends v6.DefaultQueryCompiler{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset(e){super.visitOffset(e),this.append(" rows")}compileColumnAlterations(e){let r={};for(let n of e)r[n.kind]||(r[n.kind]=[]),r[n.kind].push(n);let i=!0;r.AddColumnNode&&(this.append("add "),this.compileList(r.AddColumnNode),i=!1),r.AlterColumnNode&&(i||this.append(", "),this.compileList(r.AlterColumnNode)),r.DropColumnNode&&(i||this.append(", "),this.append("drop column "),this.compileList(r.DropColumnNode)),r.ModifyColumnNode&&(i||this.append(", "),this.compileList(r.ModifyColumnNode)),r.RenameColumnNode&&(i||this.append(", "),this.compileList(r.RenameColumnNode))}visitAddColumn(e){this.visitNode(e.column)}visitDropColumn(e){this.visitNode(e.column)}visitMergeQuery(e){super.visitMergeQuery(e),this.append(";")}announcesNewColumnDataType(){return!1}};jm.MssqlQueryCompiler=uE});var _1=d(Dm=>{"use strict";o();s();Object.defineProperty(Dm,"__esModule",{value:!0});Dm.MssqlDialect=void 0;var I6=rE(),q6=sE(),x6=aE(),A6=cE(),lE=class{#e;constructor(e){this.#e=e}createDriver(){return new q6.MssqlDriver(this.#e)}createQueryCompiler(){return new A6.MssqlQueryCompiler}createAdapter(){return new I6.MssqlAdapter}createIntrospector(e){return new x6.MssqlIntrospector(e)}};Dm.MssqlDialect=lE});var g1=d(w1=>{"use strict";o();s();Object.defineProperty(w1,"__esModule",{value:!0})});var E1=d(Mm=>{"use strict";o();s();Object.defineProperty(Mm,"__esModule",{value:!0});Mm.FileMigrationProvider=void 0;var b1=g(),dE=class{#e;constructor(e){this.#e=e}async getMigrations(){let e={},r=await this.#e.fs.readdir(this.#e.migrationFolder);for(let i of r)if(i.endsWith(".js")||i.endsWith(".ts")&&!i.endsWith(".d.ts")||i.endsWith(".mjs")||i.endsWith(".mts")&&!i.endsWith(".d.mts")){let n=await Promise.resolve(`${this.#e.path.join(this.#e.migrationFolder,i)}`).then(u=>Ht(u)),a=i.substring(0,i.lastIndexOf("."));O1(n?.default)?e[a]=n.default:O1(n)&&(e[a]=n)}return e}};Mm.FileMigrationProvider=dE;function O1(t){return(0,b1.isObject)(t)&&(0,b1.isFunction)(t.up)}});var v1=d(S1=>{"use strict";o();s();Object.defineProperty(S1,"__esModule",{value:!0})});var I1=d(Wm=>{"use strict";o();s();Object.defineProperty(Wm,"__esModule",{value:!0});Wm.SnakeCaseTransformer=void 0;var T6=ao(),pE=class extends T6.OperationNodeTransformer{#e;constructor(e){super(),this.#e=e}transformIdentifier(e){return e=super.transformIdentifier(e),{...e,name:this.#e(e.name)}}};Wm.SnakeCaseTransformer=pE});var A1=d(Lm=>{"use strict";o();s();Object.defineProperty(Lm,"__esModule",{value:!0});Lm.createSnakeCaseMapper=C6;Lm.createCamelCaseMapper=R6;function C6({upperCase:t=!1,underscoreBeforeDigits:e=!1,underscoreBetweenUppercaseLetters:r=!1}={}){return x1(i=>{if(i.length===0)return i;let n=i.toUpperCase(),a=i.toLowerCase(),u=a[0];for(let l=1,h=i.length;l<h;++l){let y=i[l],_=i[l-1],b=n[l],w=n[l-1],E=a[l],v=a[l-1];if(e&&q1(y)&&!q1(_)){u+="_"+y;continue}y===b&&b!==E?r||!(_===w&&w!==v)?u+="_"+E:u+=E:u+=y}return t?u.toUpperCase():u})}function R6({upperCase:t=!1}={}){return x1(e=>{if(e.length===0)return e;t&&P6(e)&&(e=e.toLowerCase());let r=e[0];for(let i=1,n=e.length;i<n;++i){let a=e[i],u=e[i-1];a!=="_"&&(u==="_"?r+=a.toUpperCase():r+=a)}return r})}function P6(t){for(let e=1,r=t.length;e<r;++e){let i=t[e];if(i!=="_"&&i!==i.toUpperCase())return!1}return!0}function q1(t){return t>="0"&&t<="9"}function x1(t){let e=new Map;return r=>{let i=e.get(r);return i||(i=t(r),e.set(r,i)),i}}});var R1=d(Bm=>{"use strict";o();s();Object.defineProperty(Bm,"__esModule",{value:!0});Bm.CamelCasePlugin=void 0;var j6=g(),D6=I1(),T1=A1(),hE=class{opt;#e;#t;#r;constructor(e={}){this.opt=e,this.#e=(0,T1.createCamelCaseMapper)(e),this.#t=(0,T1.createSnakeCaseMapper)(e),this.#r=new D6.SnakeCaseTransformer(this.snakeCase.bind(this))}transformQuery(e){return this.#r.transformNode(e.node)}async transformResult(e){return e.result.rows&&Array.isArray(e.result.rows)?{...e.result,rows:e.result.rows.map(r=>this.mapRow(r))}:e.result}mapRow(e){return Object.keys(e).reduce((r,i)=>{let n=e[i];return Array.isArray(n)?n=n.map(a=>C1(a,this.opt)?this.mapRow(a):a):C1(n,this.opt)&&(n=this.mapRow(n)),r[this.camelCase(i)]=n,r},{})}snakeCase(e){return this.#t(e)}camelCase(e){return this.#e(e)}};Bm.CamelCasePlugin=hE;function C1(t,e){return(0,j6.isPlainObject)(t)&&!e?.maintainNestedObjectKeys}});var P1=d(km=>{"use strict";o();s();Object.defineProperty(km,"__esModule",{value:!0});km.DeduplicateJoinsTransformer=void 0;var M6=ao(),fE=g(),mE=class extends M6.OperationNodeTransformer{transformSelectQuery(e){return this.#e(super.transformSelectQuery(e))}transformUpdateQuery(e){return this.#e(super.transformUpdateQuery(e))}transformDeleteQuery(e){return this.#e(super.transformDeleteQuery(e))}#e(e){return!e.joins||e.joins.length===0?e:(0,fE.freeze)({...e,joins:this.#t(e.joins)})}#t(e){let r=[];for(let i=0;i<e.length;++i){let n=!1;for(let a=0;a<r.length;++a)if((0,fE.compare)(e[i],r[a])){n=!0;break}n||r.push(e[i])}return(0,fE.freeze)(r)}};km.DeduplicateJoinsTransformer=mE});var j1=d(Um=>{"use strict";o();s();Object.defineProperty(Um,"__esModule",{value:!0});Um.DeduplicateJoinsPlugin=void 0;var W6=P1(),yE=class{#e=new W6.DeduplicateJoinsTransformer;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}};Um.DeduplicateJoinsPlugin=yE});var W1=d(Fm=>{"use strict";o();s();Object.defineProperty(Fm,"__esModule",{value:!0});Fm.ParseJSONResultsPlugin=void 0;var D1=g(),NE=class{opt;#e;constructor(e={}){this.opt=e,this.#e=e.objectStrategy||"in-place"}transformQuery(e){return e.node}async transformResult(e){return{...e.result,rows:M1(e.result.rows,this.#e)}}};Fm.ParseJSONResultsPlugin=NE;function M1(t,e){let r=e==="create"?new Array(t.length):t;for(let i=0;i<t.length;++i)r[i]=_E(t[i],e);return r}function _E(t,e){return(0,D1.isString)(t)?L6(t):Array.isArray(t)?M1(t,e):(0,D1.isPlainObject)(t)?k6(t,e):t}function L6(t){if(B6(t))try{return _E(JSON.parse(t),"in-place")}catch{}return t}function B6(t){return t.match(/^[\[\{]/)!=null}function k6(t,e){let r=e==="create"?{}:t;for(let i in t)r[i]=_E(t[i],e);return r}});var B1=d(L1=>{"use strict";o();s();Object.defineProperty(L1,"__esModule",{value:!0})});var k1=d(zm=>{"use strict";o();s();Object.defineProperty(zm,"__esModule",{value:!0});zm.ListNode=void 0;var wE=g();zm.ListNode=(0,wE.freeze)({is(t){return t.kind==="ListNode"},create(t){return(0,wE.freeze)({kind:"ListNode",items:(0,wE.freeze)(t)})}})});var F1=d(U1=>{"use strict";o();s();Object.defineProperty(U1,"__esModule",{value:!0})});var Q1=d(z1=>{"use strict";o();s();Object.defineProperty(z1,"__esModule",{value:!0})});var V1=d($1=>{"use strict";o();s();Object.defineProperty($1,"__esModule",{value:!0})});var J1=d(G1=>{"use strict";o();s();Object.defineProperty(G1,"__esModule",{value:!0})});var K1=d(H1=>{"use strict";o();s();Object.defineProperty(H1,"__esModule",{value:!0})});var X1=d(Y1=>{"use strict";o();s();Object.defineProperty(Y1,"__esModule",{value:!0})});var on=d(f=>{"use strict";o();s();var U6=f&&f.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),m=f&&f.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&U6(e,t,r)};Object.defineProperty(f,"__esModule",{value:!0});f.logOnce=f.expressionBuilder=void 0;m(mC(),f);m(Gp(),f);m(V_(),f);var F6=$i();Object.defineProperty(f,"expressionBuilder",{enumerable:!0,get:function(){return F6.expressionBuilder}});m(mo(),f);m(NC(),f);m(wC(),f);m(bC(),f);m(EC(),f);m(pu(),f);m(Vw(),f);m(Ep(),f);m(Hw(),f);m(kn(),f);m(bw(),f);m(ph(),f);m(Bw(),f);m(Jw(),f);m(Yw(),f);m(Fw(),f);m(Mg(),f);m(wh(),f);m($g(),f);m(Eg(),f);m(Og(),f);m(cO(),f);m(sn(),f);m(xC(),f);m(Yb(),f);m(co(),f);m(TC(),f);m(Zn(),f);m(xo(),f);m($b(),f);m(qb(),f);m(Bb(),f);m(Cb(),f);m(Ub(),f);m(Sb(),f);m(Ab(),f);m(vb(),f);m(Tb(),f);m(Lh(),f);m(zh(),f);m(bb(),f);m(jb(),f);m(Wb(),f);m(mb(),f);m(Gb(),f);m(rO(),f);m(PC(),f);m(DC(),f);m(Hb(),f);m(tO(),f);m(MC(),f);m(LC(),f);m(kC(),f);m(Ao(),f);m(FC(),f);m(VC(),f);m(JC(),f);m(OO(),f);m(PO(),f);m(MO(),f);m(LO(),f);m(i1(),f);m(s1(),f);m(zO(),f);m($O(),f);m(GO(),f);m(HO(),f);m(ZO(),f);m(c1(),f);m(l1(),f);m(SO(),f);m(xO(),f);m(TO(),f);m(rE(),f);m(p1(),f);m(_1(),f);m(sE(),f);m(aE(),f);m(cE(),f);m(Zn(),f);m(g1(),f);m(es(),f);m(E1(),f);m(v1(),f);m(R1(),f);m(j1(),f);m(Qn(),f);m(W1(),f);m(tb(),f);m($h(),f);m(cf(),f);m(uh(),f);m(Wr(),f);m(fb(),f);m(Tn(),f);m(Fi(),f);m(Kl(),f);m(yu(),f);m(Kg(),f);m(Eu(),f);m(Ou(),f);m(Nt(),f);m(Mw(),f);m(eg(),f);m(Ip(),f);m(B1(),f);m(Cl(),f);m(Pl(),f);m(Hs(),f);m(Uf(),f);m(Cu(),f);m(Jg(),f);m(qw(),f);m(ab(),f);m(ru(),f);m(rb(),f);m(Hh(),f);m(Ba(),f);m(Wl(),f);m(Bl(),f);m($f(),f);m(Wf(),f);m(Pw(),f);m(Rg(),f);m(Iu(),f);m(Xa(),f);m(Dg(),f);m(ob(),f);m(xg(),f);m(yw(),f);m(_w(),f);m(Pe(),f);m(Wn(),f);m(ka(),f);m(ud(),f);m(zg(),f);m(Va(),f);m(od(),f);m(au(),f);m(k1(),f);m(hg(),f);m(no(),f);m(db(),f);m(qg(),f);m(sp(),f);m(Ww(),f);m(K_(),f);m(zt(),f);m(ao(),f);m(dO(),f);m(F1(),f);m(Pn(),f);m(Cn(),f);m(ew(),f);m(eo(),f);m(Dw(),f);m(vd(),f);m(Zs(),f);m(Ow(),f);m(mw(),f);m(of(),f);m(hd(),f);m(hi(),f);m(di(),f);m(ed(),f);m(vu(),f);m(ib(),f);m(Rw(),f);m(Ui(),f);m(Ua(),f);m(J_(),f);m(zi(),f);m(Sw(),f);m(Yp(),f);m(Q1(),f);m(Ks(),f);m(zw(),f);m(Gg(),f);m(kg(),f);m(qu(),f);m(to(),f);m(Tw(),f);m(Ja(),f);m(pi(),f);m(Iw(),f);m(io(),f);m(iu(),f);m(ig(),f);m(V1(),f);m(oO(),f);m(J1(),f);m(K1(),f);m(nO(),f);m(X1(),f);var z6=_g();Object.defineProperty(f,"logOnce",{enumerable:!0,get:function(){return z6.logOnce}})});var an=d(Qm=>{"use strict";o();s();Object.defineProperty(Qm,"__esModule",{value:!0});Qm.IntrospectorDialect=void 0;var gE=class{};Qm.IntrospectorDialect=gE});var un=d($m=>{"use strict";o();s();Object.defineProperty($m,"__esModule",{value:!0});$m.EnumCollection=void 0;var bE=class{constructor(e={}){this.enums={},this.enums=Object.fromEntries(Object.entries(e).map(([r,i])=>[r.toLowerCase(),i]))}add(e,r){var i,n;((i=this.enums)[n=e.toLowerCase()]??(i[n]=[])).push(r)}get(e){return this.enums[e.toLowerCase()]?.sort((r,i)=>r.localeCompare(i))??null}has(e){return!!this.enums[e.toLowerCase()]}set(e,r){this.enums[e.toLowerCase()]=r}};$m.EnumCollection=bE});var tR=d((Z1,eR)=>{"use strict";o();s();Object.defineProperty(Z1,"__esModule",{value:!0});eR.exports=Q6;function Q6(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}});var rR=d(se=>{"use strict";o();s();Object.defineProperty(se,"__esModule",{value:!0});se.isUndefined=se.isSymbol=se.isString=se.isRegExp=se.isPrimitive=se.isObject=se.isNumber=se.isNullOrUndefined=se.isNull=se.isFunction=se.isError=se.isDeepStrictEqual=se.isDate=se.isBuffer=se.isBoolean=se.isArray=void 0;var $6=t=>t instanceof RegExp;se.isRegExp=$6;var V6=t=>t instanceof Date;se.isDate=V6;var G6=t=>Array.isArray(t);se.isArray=G6;var J6=t=>typeof t=="boolean";se.isBoolean=J6;var H6=t=>t===null;se.isNull=H6;var K6=t=>t==null;se.isNullOrUndefined=K6;var Y6=t=>typeof t=="number";se.isNumber=Y6;var X6=t=>typeof t=="string";se.isString=X6;var Z6=t=>typeof t=="symbol";se.isSymbol=Z6;var e3=t=>t===void 0;se.isUndefined=e3;var t3=t=>typeof t=="function";se.isFunction=t3;var r3=t=>t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function";se.isBuffer=r3;var i3=(t,e)=>JSON.stringify(t)===JSON.stringify(e);se.isDeepStrictEqual=i3;var n3=t=>t!==null&&typeof t=="object"&&Object.getPrototypeOf(t).isPrototypeOf(Object);se.isObject=n3;var s3=t=>t instanceof Error;se.isError=s3;var o3=t=>typeof t=="object"?t===null:typeof t!="function";se.isPrimitive=o3});var sR=d(jt=>{"use strict";o();s();Object.defineProperty(jt,"__esModule",{value:!0});jt.log=jt.inspect=jt.formatWithOptions=jt.format=jt.debuglog=jt.debug=void 0;var a3=(...t)=>{console.log(...t)};jt.log=a3;var iR=(t,e)=>{let r=(i,...n)=>{r.enabled&&console.debug(`[${t}] ${i}`,...n)};return r.enabled=!0,r};jt.debuglog=iR;var iDe=jt.debug=iR,u3=t=>JSON.stringify(t,null,2);jt.inspect=u3;var c3=(...t)=>nR(...t);jt.format=c3;var l3=(t,...e)=>nR(...e);jt.formatWithOptions=l3;function nR(t,...e){let r=/(%?)(%([djos]))/g;return e.length>0&&(t=t.replace(r,(i,n,a,u)=>{let l=e.shift();switch(u){case"o":if(Array.isArray(l)){l=JSON.stringify(l);break}break;case"s":l=""+l;break;case"d":l=Number(l);break;case"j":l=JSON.stringify(l);break}return n?(e.unshift(l),i):l})),e.length>0&&(t+=" "+e.join(" ")),t=t.replace(/%{2}/g,"%"),""+t}});var oR=d(C=>{"use strict";o();s();Object.defineProperty(C,"__esModule",{value:!0});C.isWeakSet=C.isWeakMap=C.isUint8ClampedArray=C.isUint8Array=C.isUint32Array=C.isUint16Array=C.isTypedArray=C.isSymbolObject=C.isStringObject=C.isSharedArrayBuffer=C.isSetIterator=C.isSet=C.isRegExp=C.isProxy=C.isPromise=C.isNumberObject=C.isNativeError=C.isModuleNamespaceObject=C.isMapIterator=C.isMap=C.isKeyObject=C.isInt8Array=C.isInt32Array=C.isInt16Array=C.isGeneratorObject=C.isGeneratorFunction=C.isFloat64Array=C.isFloat32Array=C.isExternal=C.isDate=C.isDataView=C.isCryptoKey=C.isBoxedPrimitive=C.isBooleanObject=C.isBigUint64Array=C.isBigIntObject=C.isBigInt64Array=C.isAsyncFunction=C.isArrayBufferView=C.isArrayBuffer=C.isArgumentsObject=C.isAnyArrayBuffer=void 0;var Ee=In(),aDe=C.isExternal=(0,Ee.notImplemented)("util.types.isExternal"),d3=t=>t instanceof Date;C.isDate=d3;var uDe=C.isArgumentsObject=(0,Ee.notImplemented)("util.types.isArgumentsObject"),p3=t=>t instanceof BigInt;C.isBigIntObject=p3;var h3=t=>t instanceof Boolean;C.isBooleanObject=h3;var f3=t=>t instanceof Number;C.isNumberObject=f3;var m3=t=>t instanceof String;C.isStringObject=m3;var y3=t=>t instanceof Symbol;C.isSymbolObject=y3;var cDe=C.isNativeError=(0,Ee.notImplemented)("util.types.isNativeError"),N3=t=>t instanceof RegExp;C.isRegExp=N3;var lDe=C.isAsyncFunction=(0,Ee.notImplemented)("util.types.isAsyncFunction"),dDe=C.isGeneratorFunction=(0,Ee.notImplemented)("util.types.isGeneratorFunction"),pDe=C.isGeneratorObject=(0,Ee.notImplemented)("util.types.isGeneratorObject"),_3=t=>t instanceof Promise;C.isPromise=_3;var w3=t=>t instanceof Map;C.isMap=w3;var g3=t=>t instanceof Set;C.isSet=g3;var hDe=C.isMapIterator=(0,Ee.notImplemented)("util.types.isMapIterator"),fDe=C.isSetIterator=(0,Ee.notImplemented)("util.types.isSetIterator"),b3=t=>t instanceof WeakMap;C.isWeakMap=b3;var O3=t=>t instanceof WeakSet;C.isWeakSet=O3;var E3=t=>t instanceof ArrayBuffer;C.isArrayBuffer=E3;var S3=t=>t instanceof DataView;C.isDataView=S3;var v3=t=>t instanceof SharedArrayBuffer;C.isSharedArrayBuffer=v3;var mDe=C.isProxy=(0,Ee.notImplemented)("util.types.isProxy"),yDe=C.isModuleNamespaceObject=(0,Ee.notImplemented)("util.types.isModuleNamespaceObject"),NDe=C.isAnyArrayBuffer=(0,Ee.notImplemented)("util.types.isAnyArrayBuffer"),_De=C.isBoxedPrimitive=(0,Ee.notImplemented)("util.types.isBoxedPrimitive"),wDe=C.isArrayBufferView=(0,Ee.notImplemented)("util.types.isArrayBufferView"),gDe=C.isTypedArray=(0,Ee.notImplemented)("util.types.isTypedArray"),bDe=C.isUint8Array=(0,Ee.notImplemented)("util.types.isUint8Array"),ODe=C.isUint8ClampedArray=(0,Ee.notImplemented)("util.types.isUint8ClampedArray"),EDe=C.isUint16Array=(0,Ee.notImplemented)("util.types.isUint16Array"),SDe=C.isUint32Array=(0,Ee.notImplemented)("util.types.isUint32Array"),vDe=C.isInt8Array=(0,Ee.notImplemented)("util.types.isInt8Array"),IDe=C.isInt16Array=(0,Ee.notImplemented)("util.types.isInt16Array"),qDe=C.isInt32Array=(0,Ee.notImplemented)("util.types.isInt32Array"),xDe=C.isFloat32Array=(0,Ee.notImplemented)("util.types.isFloat32Array"),ADe=C.isFloat64Array=(0,Ee.notImplemented)("util.types.isFloat64Array"),TDe=C.isBigInt64Array=(0,Ee.notImplemented)("util.types.isBigInt64Array"),CDe=C.isBigUint64Array=(0,Ee.notImplemented)("util.types.isBigUint64Array"),RDe=C.isKeyObject=(0,Ee.notImplemented)("util.types.isKeyObject"),PDe=C.isCryptoKey=(0,Ee.notImplemented)("util.types.isCryptoKey")});var cR=d((ku,uR)=>{"use strict";o();s();Object.defineProperty(ku,"__esModule",{value:!0});var I3={},Vm=q3(oR());Object.keys(Vm).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(I3,t)||t in ku&&ku[t]===Vm[t]||Object.defineProperty(ku,t,{enumerable:!0,get:function(){return Vm[t]}})});function aR(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(aR=function(i){return i?r:e})(t)}function q3(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=aR(e);if(r&&r.has(t))return r.get(t);var i={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&{}.hasOwnProperty.call(t,a)){var u=n?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=t[a]}return i.default=t,r&&r.set(t,i),i}uR.exports=Vm});var dR=d(Gm=>{"use strict";o();s();Object.defineProperty(Gm,"__esModule",{value:!0});Gm.promisify=void 0;var OE=Symbol("customPromisify");function lR(t){return t[OE]?t[OE]:function(...e){return new Promise((r,i)=>{try{t.call(this,...e,(n,a)=>{if(n)return i(n);r(a)})}catch(n){i(n)}})}}lR.custom=OE;var BDe=Gm.promisify=lR});var pR=d(To=>{"use strict";o();s();Object.defineProperty(To,"__esModule",{value:!0});To.MIMEType=To.MIMEParams=void 0;var EE=class{__unenv__=!0;params=new Uu;type;subtype;constructor(e){let[r="",...i]=String(e).split(";"),[n="",a=""]=r.split("/");this.type=n,this.subtype=a,this.params=new Uu;for(let u of i){let[l,h]=u.split("=");this.params.set(l,h)}}get essence(){return this.type+"/"+this.subtype}toString(){let e=this.params.toString();return this.essence+(e?`;${e}`:"")}};To.MIMEType=EE;var Uu=class extends Map{__unenv__=!0;get(e){return super.get(e)||null}toString(){return[...this.entries()].map(([e,r])=>`${e}=${r}`).join("&")}};To.MIMEParams=Uu});var Ym=d((K,wR)=>{"use strict";o();s();Object.defineProperty(K,"__esModule",{value:!0});var SE={TextDecoder:!0,TextEncoder:!0,deprecate:!0,_errnoException:!0,_exceptionWithHostPort:!0,_extend:!0,aborted:!0,callbackify:!0,getSystemErrorMap:!0,getSystemErrorName:!0,toUSVString:!0,stripVTControlCharacters:!0,transferableAbortController:!0,transferableAbortSignal:!0,parseArgs:!0,inherits:!0,types:!0,promisify:!0};K.getSystemErrorName=K.getSystemErrorMap=K.deprecate=K.default=K.callbackify=K.aborted=K._extend=K._exceptionWithHostPort=K._errnoException=K.TextEncoder=K.TextDecoder=void 0;Object.defineProperty(K,"inherits",{enumerable:!0,get:function(){return hR.default}});K.parseArgs=void 0;Object.defineProperty(K,"promisify",{enumerable:!0,get:function(){return mR.promisify}});K.transferableAbortSignal=K.transferableAbortController=K.toUSVString=K.stripVTControlCharacters=void 0;Object.defineProperty(K,"types",{enumerable:!0,get:function(){return fR.default}});var nr=In(),hR=NR(tR()),Jm=vE(rR());Object.keys(Jm).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(SE,t)||t in K&&K[t]===Jm[t]||Object.defineProperty(K,t,{enumerable:!0,get:function(){return Jm[t]}})});var Hm=vE(sR());Object.keys(Hm).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(SE,t)||t in K&&K[t]===Hm[t]||Object.defineProperty(K,t,{enumerable:!0,get:function(){return Hm[t]}})});var fR=NR(cR()),mR=dR(),Km=vE(pR());Object.keys(Km).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(SE,t)||t in K&&K[t]===Km[t]||Object.defineProperty(K,t,{enumerable:!0,get:function(){return Km[t]}})});function yR(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(yR=function(i){return i?r:e})(t)}function vE(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=yR(e);if(r&&r.has(t))return r.get(t);var i={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&{}.hasOwnProperty.call(t,a)){var u=n?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=t[a]}return i.default=t,r&&r.set(t,i),i}function NR(t){return t&&t.__esModule?t:{default:t}}var x3=K.TextDecoder=globalThis.TextDecoder,A3=K.TextEncoder=globalThis.TextEncoder,_R=t=>t;K.deprecate=_R;var T3=K._errnoException=(0,nr.notImplemented)("util._errnoException"),C3=K._exceptionWithHostPort=(0,nr.notImplemented)("util._exceptionWithHostPort"),R3=K._extend=(0,nr.notImplemented)("util._extend"),P3=K.aborted=(0,nr.notImplemented)("util.aborted"),j3=K.callbackify=(0,nr.notImplemented)("util.callbackify"),D3=K.getSystemErrorMap=(0,nr.notImplemented)("util.getSystemErrorMap"),M3=K.getSystemErrorName=(0,nr.notImplemented)("util.getSystemErrorName"),W3=K.toUSVString=(0,nr.notImplemented)("util.toUSVString"),L3=K.stripVTControlCharacters=(0,nr.notImplemented)("util.stripVTControlCharacters"),B3=K.transferableAbortController=(0,nr.notImplemented)("util.transferableAbortController"),k3=K.transferableAbortSignal=(0,nr.notImplemented)("util.transferableAbortSignal"),U3=K.parseArgs=(0,nr.notImplemented)("util.parseArgs");wR.exports={_errnoException:T3,_exceptionWithHostPort:C3,_extend:R3,aborted:P3,callbackify:j3,deprecate:_R,getSystemErrorMap:D3,getSystemErrorName:M3,inherits:hR.default,promisify:mR.promisify,stripVTControlCharacters:L3,toUSVString:W3,TextDecoder:x3,TextEncoder:A3,types:fR.default,transferableAbortController:B3,transferableAbortSignal:k3,parseArgs:U3,...Km,...Hm,...Jm}});var Xm=d(sr=>{"use strict";o();s();sr.isInteger=t=>typeof t=="number"?Number.isInteger(t):typeof t=="string"&&t.trim()!==""?Number.isInteger(Number(t)):!1;sr.find=(t,e)=>t.nodes.find(r=>r.type===e);sr.exceedsLimit=(t,e,r=1,i)=>i===!1||!sr.isInteger(t)||!sr.isInteger(e)?!1:(Number(e)-Number(t))/Number(r)>=i;sr.escapeNode=(t,e=0,r)=>{let i=t.nodes[e];i&&(r&&i.type===r||i.type==="open"||i.type==="close")&&i.escaped!==!0&&(i.value="\\"+i.value,i.escaped=!0)};sr.encloseBrace=t=>t.type!=="brace"?!1:t.commas>>0+t.ranges>>0===0?(t.invalid=!0,!0):!1;sr.isInvalidBrace=t=>t.type!=="brace"?!1:t.invalid===!0||t.dollar?!0:t.commas>>0+t.ranges>>0===0||t.open!==!0||t.close!==!0?(t.invalid=!0,!0):!1;sr.isOpenOrClose=t=>t.type==="open"||t.type==="close"?!0:t.open===!0||t.close===!0;sr.reduce=t=>t.reduce((e,r)=>(r.type==="text"&&e.push(r.value),r.type==="range"&&(r.type="text"),e),[]);sr.flatten=(...t)=>{let e=[],r=i=>{for(let n=0;n<i.length;n++){let a=i[n];if(Array.isArray(a)){r(a);continue}a!==void 0&&e.push(a)}return e};return r(t),e}});var Zm=d((YDe,bR)=>{"use strict";o();s();var gR=Xm();bR.exports=(t,e={})=>{let r=(i,n={})=>{let a=e.escapeInvalid&&gR.isInvalidBrace(n),u=i.invalid===!0&&e.escapeInvalid===!0,l="";if(i.value)return(a||u)&&gR.isOpenOrClose(i)?"\\"+i.value:i.value;if(i.value)return i.value;if(i.nodes)for(let h of i.nodes)l+=r(h);return l};return r(t)}});var ER=d((eMe,OR)=>{"use strict";o();s();OR.exports=function(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1}});var RR=d((iMe,CR)=>{"use strict";o();s();var SR=ER(),ts=(t,e,r)=>{if(SR(t)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||t===e)return String(t);if(SR(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let i={relaxZeros:!0,...r};typeof i.strictZeros=="boolean"&&(i.relaxZeros=i.strictZeros===!1);let n=String(i.relaxZeros),a=String(i.shorthand),u=String(i.capture),l=String(i.wrap),h=t+":"+e+"="+n+a+u+l;if(ts.cache.hasOwnProperty(h))return ts.cache[h].result;let y=Math.min(t,e),_=Math.max(t,e);if(Math.abs(y-_)===1){let A=t+"|"+e;return i.capture?`(${A})`:i.wrap===!1?A:`(?:${A})`}let b=TR(t)||TR(e),w={min:t,max:e,a:y,b:_},E=[],v=[];if(b&&(w.isPadded=b,w.maxLen=String(w.max).length),y<0){let A=_<0?Math.abs(_):1;v=vR(A,Math.abs(y),w,i),y=w.a=0}return _>=0&&(E=vR(y,_,w,i)),w.negatives=v,w.positives=E,w.result=F3(v,E,i),i.capture===!0?w.result=`(${w.result})`:i.wrap!==!1&&E.length+v.length>1&&(w.result=`(?:${w.result})`),ts.cache[h]=w,w.result};function F3(t,e,r){let i=IE(t,e,"-",!1,r)||[],n=IE(e,t,"",!1,r)||[],a=IE(t,e,"-?",!0,r)||[];return i.concat(a).concat(n).join("|")}function z3(t,e){let r=1,i=1,n=qR(t,r),a=new Set([e]);for(;t<=n&&n<=e;)a.add(n),r+=1,n=qR(t,r);for(n=xR(e+1,i)-1;t<n&&n<=e;)a.add(n),i+=1,n=xR(e+1,i)-1;return a=[...a],a.sort(V3),a}function Q3(t,e,r){if(t===e)return{pattern:t,count:[],digits:0};let i=$3(t,e),n=i.length,a="",u=0;for(let l=0;l<n;l++){let[h,y]=i[l];h===y?a+=h:h!=="0"||y!=="9"?a+=G3(h,y,r):u++}return u&&(a+=r.shorthand===!0?"\\d":"[0-9]"),{pattern:a,count:[u],digits:n}}function vR(t,e,r,i){let n=z3(t,e),a=[],u=t,l;for(let h=0;h<n.length;h++){let y=n[h],_=Q3(String(u),String(y),i),b="";if(!r.isPadded&&l&&l.pattern===_.pattern){l.count.length>1&&l.count.pop(),l.count.push(_.count[0]),l.string=l.pattern+AR(l.count),u=y+1;continue}r.isPadded&&(b=J3(y,r,i)),_.string=b+_.pattern+AR(_.count),a.push(_),u=y+1,l=_}return a}function IE(t,e,r,i,n){let a=[];for(let u of t){let{string:l}=u;!i&&!IR(e,"string",l)&&a.push(r+l),i&&IR(e,"string",l)&&a.push(r+l)}return a}function $3(t,e){let r=[];for(let i=0;i<t.length;i++)r.push([t[i],e[i]]);return r}function V3(t,e){return t>e?1:e>t?-1:0}function IR(t,e,r){return t.some(i=>i[e]===r)}function qR(t,e){return Number(String(t).slice(0,-e)+"9".repeat(e))}function xR(t,e){return t-t%Math.pow(10,e)}function AR(t){let[e=0,r=""]=t;return r||e>1?`{${e+(r?","+r:"")}}`:""}function G3(t,e,r){return`[${t}${e-t===1?"":"-"}${e}]`}function TR(t){return/^-?(0+)\d/.test(t)}function J3(t,e,r){if(!e.isPadded)return t;let i=Math.abs(e.maxLen-String(t).length),n=r.relaxZeros!==!1;switch(i){case 0:return"";case 1:return n?"0?":"0";case 2:return n?"0{0,2}":"00";default:return n?`0{0,${i}}`:`0{${i}}`}}ts.cache={};ts.clearCache=()=>ts.cache={};CR.exports=ts});var AE=d((oMe,BR)=>{"use strict";o();s();var H3=Ym(),jR=RR(),PR=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),K3=t=>e=>t===!0?Number(e):String(e),qE=t=>typeof t=="number"||typeof t=="string"&&t!=="",Fu=t=>Number.isInteger(+t),xE=t=>{let e=`${t}`,r=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++r]==="0";);return r>0},Y3=(t,e,r)=>typeof t=="string"||typeof e=="string"?!0:r.stringify===!0,X3=(t,e,r)=>{if(e>0){let i=t[0]==="-"?"-":"";i&&(t=t.slice(1)),t=i+t.padStart(i?e-1:e,"0")}return r===!1?String(t):t},ty=(t,e)=>{let r=t[0]==="-"?"-":"";for(r&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return r?"-"+t:t},Z3=(t,e,r)=>{t.negatives.sort((l,h)=>l<h?-1:l>h?1:0),t.positives.sort((l,h)=>l<h?-1:l>h?1:0);let i=e.capture?"":"?:",n="",a="",u;return t.positives.length&&(n=t.positives.map(l=>ty(String(l),r)).join("|")),t.negatives.length&&(a=`-(${i}${t.negatives.map(l=>ty(String(l),r)).join("|")})`),n&&a?u=`${n}|${a}`:u=n||a,e.wrap?`(${i}${u})`:u},DR=(t,e,r,i)=>{if(r)return jR(t,e,{wrap:!1,...i});let n=String.fromCharCode(t);if(t===e)return n;let a=String.fromCharCode(e);return`[${n}-${a}]`},MR=(t,e,r)=>{if(Array.isArray(t)){let i=r.wrap===!0,n=r.capture?"":"?:";return i?`(${n}${t.join("|")})`:t.join("|")}return jR(t,e,r)},WR=(...t)=>new RangeError("Invalid range arguments: "+H3.inspect(...t)),LR=(t,e,r)=>{if(r.strictRanges===!0)throw WR([t,e]);return[]},e4=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},t4=(t,e,r=1,i={})=>{let n=Number(t),a=Number(e);if(!Number.isInteger(n)||!Number.isInteger(a)){if(i.strictRanges===!0)throw WR([t,e]);return[]}n===0&&(n=0),a===0&&(a=0);let u=n>a,l=String(t),h=String(e),y=String(r);r=Math.max(Math.abs(r),1);let _=xE(l)||xE(h)||xE(y),b=_?Math.max(l.length,h.length,y.length):0,w=_===!1&&Y3(t,e,i)===!1,E=i.transform||K3(w);if(i.toRegex&&r===1)return DR(ty(t,b),ty(e,b),!0,i);let v={negatives:[],positives:[]},A=he=>v[he<0?"negatives":"positives"].push(Math.abs(he)),V=[],z=0;for(;u?n>=a:n<=a;)i.toRegex===!0&&r>1?A(n):V.push(X3(E(n,z),b,w)),n=u?n-r:n+r,z++;return i.toRegex===!0?r>1?Z3(v,i,b):MR(V,null,{wrap:!1,...i}):V},r4=(t,e,r=1,i={})=>{if(!Fu(t)&&t.length>1||!Fu(e)&&e.length>1)return LR(t,e,i);let n=i.transform||(w=>String.fromCharCode(w)),a=`${t}`.charCodeAt(0),u=`${e}`.charCodeAt(0),l=a>u,h=Math.min(a,u),y=Math.max(a,u);if(i.toRegex&&r===1)return DR(h,y,!1,i);let _=[],b=0;for(;l?a>=u:a<=u;)_.push(n(a,b)),a=l?a-r:a+r,b++;return i.toRegex===!0?MR(_,null,{wrap:!1,options:i}):_},ey=(t,e,r,i={})=>{if(e==null&&qE(t))return[t];if(!qE(t)||!qE(e))return LR(t,e,i);if(typeof r=="function")return ey(t,e,1,{transform:r});if(PR(r))return ey(t,e,0,r);let n={...i};return n.capture===!0&&(n.wrap=!0),r=r||n.step||1,Fu(r)?Fu(t)&&Fu(e)?t4(t,e,r,n):r4(t,e,Math.max(Math.abs(r),1),n):r!=null&&!PR(r)?e4(r,n):ey(t,e,1,r)};BR.exports=ey});var FR=d((cMe,UR)=>{"use strict";o();s();var i4=AE(),kR=Xm(),n4=(t,e={})=>{let r=(i,n={})=>{let a=kR.isInvalidBrace(n),u=i.invalid===!0&&e.escapeInvalid===!0,l=a===!0||u===!0,h=e.escapeInvalid===!0?"\\":"",y="";if(i.isOpen===!0)return h+i.value;if(i.isClose===!0)return console.log("node.isClose",h,i.value),h+i.value;if(i.type==="open")return l?h+i.value:"(";if(i.type==="close")return l?h+i.value:")";if(i.type==="comma")return i.prev.type==="comma"?"":l?i.value:"|";if(i.value)return i.value;if(i.nodes&&i.ranges>0){let _=kR.reduce(i.nodes),b=i4(..._,{...e,wrap:!1,toRegex:!0,strictZeros:!0});if(b.length!==0)return _.length>1&&b.length>1?`(${b})`:b}if(i.nodes)for(let _ of i.nodes)y+=r(_,i);return y};return r(t)};UR.exports=n4});var $R=d((pMe,QR)=>{"use strict";o();s();var s4=AE(),zR=Zm(),Co=Xm(),rs=(t="",e="",r=!1)=>{let i=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return r?Co.flatten(e).map(n=>`{${n}}`):e;for(let n of t)if(Array.isArray(n))for(let a of n)i.push(rs(a,e,r));else for(let a of e)r===!0&&typeof a=="string"&&(a=`{${a}}`),i.push(Array.isArray(a)?rs(n,a,r):n+a);return Co.flatten(i)},o4=(t,e={})=>{let r=e.rangeLimit===void 0?1e3:e.rangeLimit,i=(n,a={})=>{n.queue=[];let u=a,l=a.queue;for(;u.type!=="brace"&&u.type!=="root"&&u.parent;)u=u.parent,l=u.queue;if(n.invalid||n.dollar){l.push(rs(l.pop(),zR(n,e)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){l.push(rs(l.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){let b=Co.reduce(n.nodes);if(Co.exceedsLimit(...b,e.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let w=s4(...b,e);w.length===0&&(w=zR(n,e)),l.push(rs(l.pop(),w)),n.nodes=[];return}let h=Co.encloseBrace(n),y=n.queue,_=n;for(;_.type!=="brace"&&_.type!=="root"&&_.parent;)_=_.parent,y=_.queue;for(let b=0;b<n.nodes.length;b++){let w=n.nodes[b];if(w.type==="comma"&&n.type==="brace"){b===1&&y.push(""),y.push("");continue}if(w.type==="close"){l.push(rs(l.pop(),y,h));continue}if(w.value&&w.type!=="open"){y.push(rs(y.pop(),w.value));continue}w.nodes&&i(w,n)}return y};return Co.flatten(i(t))};QR.exports=o4});var GR=d((mMe,VR)=>{"use strict";o();s();VR.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var XR=d((_Me,YR)=>{"use strict";o();s();var a4=Zm(),{MAX_LENGTH:JR,CHAR_BACKSLASH:TE,CHAR_BACKTICK:u4,CHAR_COMMA:c4,CHAR_DOT:l4,CHAR_LEFT_PARENTHESES:d4,CHAR_RIGHT_PARENTHESES:p4,CHAR_LEFT_CURLY_BRACE:h4,CHAR_RIGHT_CURLY_BRACE:f4,CHAR_LEFT_SQUARE_BRACKET:HR,CHAR_RIGHT_SQUARE_BRACKET:KR,CHAR_DOUBLE_QUOTE:m4,CHAR_SINGLE_QUOTE:y4,CHAR_NO_BREAK_SPACE:N4,CHAR_ZERO_WIDTH_NOBREAK_SPACE:_4}=GR(),w4=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let r=e||{},i=typeof r.maxLength=="number"?Math.min(JR,r.maxLength):JR;if(t.length>i)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${i})`);let n={type:"root",input:t,nodes:[]},a=[n],u=n,l=n,h=0,y=t.length,_=0,b=0,w,E=()=>t[_++],v=A=>{if(A.type==="text"&&l.type==="dot"&&(l.type="text"),l&&l.type==="text"&&A.type==="text"){l.value+=A.value;return}return u.nodes.push(A),A.parent=u,A.prev=l,l=A,A};for(v({type:"bos"});_<y;)if(u=a[a.length-1],w=E(),!(w===_4||w===N4)){if(w===TE){v({type:"text",value:(e.keepEscaping?w:"")+E()});continue}if(w===KR){v({type:"text",value:"\\"+w});continue}if(w===HR){h++;let A;for(;_<y&&(A=E());){if(w+=A,A===HR){h++;continue}if(A===TE){w+=E();continue}if(A===KR&&(h--,h===0))break}v({type:"text",value:w});continue}if(w===d4){u=v({type:"paren",nodes:[]}),a.push(u),v({type:"text",value:w});continue}if(w===p4){if(u.type!=="paren"){v({type:"text",value:w});continue}u=a.pop(),v({type:"text",value:w}),u=a[a.length-1];continue}if(w===m4||w===y4||w===u4){let A=w,V;for(e.keepQuotes!==!0&&(w="");_<y&&(V=E());){if(V===TE){w+=V+E();continue}if(V===A){e.keepQuotes===!0&&(w+=V);break}w+=V}v({type:"text",value:w});continue}if(w===h4){b++;let V={type:"brace",open:!0,close:!1,dollar:l.value&&l.value.slice(-1)==="$"||u.dollar===!0,depth:b,commas:0,ranges:0,nodes:[]};u=v(V),a.push(u),v({type:"open",value:w});continue}if(w===f4){if(u.type!=="brace"){v({type:"text",value:w});continue}let A="close";u=a.pop(),u.close=!0,v({type:A,value:w}),b--,u=a[a.length-1];continue}if(w===c4&&b>0){if(u.ranges>0){u.ranges=0;let A=u.nodes.shift();u.nodes=[A,{type:"text",value:a4(u)}]}v({type:"comma",value:w}),u.commas++;continue}if(w===l4&&b>0&&u.commas===0){let A=u.nodes;if(b===0||A.length===0){v({type:"text",value:w});continue}if(l.type==="dot"){if(u.range=[],l.value+=w,l.type="range",u.nodes.length!==3&&u.nodes.length!==5){u.invalid=!0,u.ranges=0,l.type="text";continue}u.ranges++,u.args=[];continue}if(l.type==="range"){A.pop();let V=A[A.length-1];V.value+=l.value+w,l=V,u.ranges--;continue}v({type:"dot",value:w});continue}v({type:"text",value:w})}do if(u=a.pop(),u.type!=="root"){u.nodes.forEach(z=>{z.nodes||(z.type==="open"&&(z.isOpen=!0),z.type==="close"&&(z.isClose=!0),z.nodes||(z.type="text"),z.invalid=!0)});let A=a[a.length-1],V=A.nodes.indexOf(u);A.nodes.splice(V,1,...u.nodes)}while(a.length>0);return v({type:"eos"}),n};YR.exports=w4});var tP=d((bMe,eP)=>{"use strict";o();s();var ZR=Zm(),g4=FR(),b4=$R(),O4=XR(),Vt=(t,e={})=>{let r=[];if(Array.isArray(t))for(let i of t){let n=Vt.create(i,e);Array.isArray(n)?r.push(...n):r.push(n)}else r=[].concat(Vt.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(r=[...new Set(r)]),r};Vt.parse=(t,e={})=>O4(t,e);Vt.stringify=(t,e={})=>ZR(typeof t=="string"?Vt.parse(t,e):t,e);Vt.compile=(t,e={})=>(typeof t=="string"&&(t=Vt.parse(t,e)),g4(t,e));Vt.expand=(t,e={})=>{typeof t=="string"&&(t=Vt.parse(t,e));let r=b4(t,e);return e.noempty===!0&&(r=r.filter(Boolean)),e.nodupes===!0&&(r=[...new Set(r)]),r};Vt.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Vt.compile(t,e):Vt.expand(t,e);eP.exports=Vt});var zu=d((SMe,oP)=>{"use strict";o();s();var E4=An(),$r="\\\\/",rP=`[^${$r}]`,wi="\\.",S4="\\+",v4="\\?",ry="\\/",I4="(?=.)",iP="[^/]",CE=`(?:${ry}|$)`,nP=`(?:^|${ry})`,RE=`${wi}{1,2}${CE}`,q4=`(?!${wi})`,x4=`(?!${nP}${RE})`,A4=`(?!${wi}{0,1}${CE})`,T4=`(?!${RE})`,C4=`[^.${ry}]`,R4=`${iP}*?`,sP={DOT_LITERAL:wi,PLUS_LITERAL:S4,QMARK_LITERAL:v4,SLASH_LITERAL:ry,ONE_CHAR:I4,QMARK:iP,END_ANCHOR:CE,DOTS_SLASH:RE,NO_DOT:q4,NO_DOTS:x4,NO_DOT_SLASH:A4,NO_DOTS_SLASH:T4,QMARK_NO_DOT:C4,STAR:R4,START_ANCHOR:nP},P4={...sP,SLASH_LITERAL:`[${$r}]`,QMARK:rP,STAR:`${rP}*?`,DOTS_SLASH:`${wi}{1,2}(?:[${$r}]|$)`,NO_DOT:`(?!${wi})`,NO_DOTS:`(?!(?:^|[${$r}])${wi}{1,2}(?:[${$r}]|$))`,NO_DOT_SLASH:`(?!${wi}{0,1}(?:[${$r}]|$))`,NO_DOTS_SLASH:`(?!${wi}{1,2}(?:[${$r}]|$))`,QMARK_NO_DOT:`[^.${$r}]`,START_ANCHOR:`(?:^|[${$r}])`,END_ANCHOR:`(?:[${$r}]|$)`},j4={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};oP.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:j4,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:E4.sep,extglobChars(t){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${t.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(t){return t===!0?P4:sP}}});var Qu=d(Dt=>{"use strict";o();s();var D4=An(),M4=process.platform==="win32",{REGEX_BACKSLASH:W4,REGEX_REMOVE_BACKSLASH:L4,REGEX_SPECIAL_CHARS:B4,REGEX_SPECIAL_CHARS_GLOBAL:k4}=zu();Dt.isObject=t=>t!==null&&typeof t=="object"&&!Array.isArray(t);Dt.hasRegexChars=t=>B4.test(t);Dt.isRegexChar=t=>t.length===1&&Dt.hasRegexChars(t);Dt.escapeRegex=t=>t.replace(k4,"\\$1");Dt.toPosixSlashes=t=>t.replace(W4,"/");Dt.removeBackslashes=t=>t.replace(L4,e=>e==="\\"?"":e);Dt.supportsLookbehinds=()=>{let t=process.version.slice(1).split(".").map(Number);return t.length===3&&t[0]>=9||t[0]===8&&t[1]>=10};Dt.isWindows=t=>t&&typeof t.windows=="boolean"?t.windows:M4===!0||D4.sep==="\\";Dt.escapeLast=(t,e,r)=>{let i=t.lastIndexOf(e,r);return i===-1?t:t[i-1]==="\\"?Dt.escapeLast(t,e,i-1):`${t.slice(0,i)}\\${t.slice(i)}`};Dt.removePrefix=(t,e={})=>{let r=t;return r.startsWith("./")&&(r=r.slice(2),e.prefix="./"),r};Dt.wrapOutput=(t,e={},r={})=>{let i=r.contains?"":"^",n=r.contains?"":"$",a=`${i}(?:${t})${n}`;return e.negated===!0&&(a=`(?:^(?!${a}).*$)`),a}});var fP=d((TMe,hP)=>{"use strict";o();s();var aP=Qu(),{CHAR_ASTERISK:PE,CHAR_AT:U4,CHAR_BACKWARD_SLASH:$u,CHAR_COMMA:F4,CHAR_DOT:jE,CHAR_EXCLAMATION_MARK:DE,CHAR_FORWARD_SLASH:pP,CHAR_LEFT_CURLY_BRACE:ME,CHAR_LEFT_PARENTHESES:WE,CHAR_LEFT_SQUARE_BRACKET:z4,CHAR_PLUS:Q4,CHAR_QUESTION_MARK:uP,CHAR_RIGHT_CURLY_BRACE:$4,CHAR_RIGHT_PARENTHESES:cP,CHAR_RIGHT_SQUARE_BRACKET:V4}=zu(),lP=t=>t===pP||t===$u,dP=t=>{t.isPrefix!==!0&&(t.depth=t.isGlobstar?1/0:1)},G4=(t,e)=>{let r=e||{},i=t.length-1,n=r.parts===!0||r.scanToEnd===!0,a=[],u=[],l=[],h=t,y=-1,_=0,b=0,w=!1,E=!1,v=!1,A=!1,V=!1,z=!1,he=!1,Z=!1,U=!1,X=!1,Ve=0,J,F,Y={value:"",depth:0,isGlob:!1},oe=()=>y>=i,x=()=>h.charCodeAt(y+1),Te=()=>(J=F,h.charCodeAt(++y));for(;y<i;){F=Te();let wt;if(F===$u){he=Y.backslashes=!0,F=Te(),F===ME&&(z=!0);continue}if(z===!0||F===ME){for(Ve++;oe()!==!0&&(F=Te());){if(F===$u){he=Y.backslashes=!0,Te();continue}if(F===ME){Ve++;continue}if(z!==!0&&F===jE&&(F=Te())===jE){if(w=Y.isBrace=!0,v=Y.isGlob=!0,X=!0,n===!0)continue;break}if(z!==!0&&F===F4){if(w=Y.isBrace=!0,v=Y.isGlob=!0,X=!0,n===!0)continue;break}if(F===$4&&(Ve--,Ve===0)){z=!1,w=Y.isBrace=!0,X=!0;break}}if(n===!0)continue;break}if(F===pP){if(a.push(y),u.push(Y),Y={value:"",depth:0,isGlob:!1},X===!0)continue;if(J===jE&&y===_+1){_+=2;continue}b=y+1;continue}if(r.noext!==!0&&(F===Q4||F===U4||F===PE||F===uP||F===DE)===!0&&x()===WE){if(v=Y.isGlob=!0,A=Y.isExtglob=!0,X=!0,F===DE&&y===_&&(U=!0),n===!0){for(;oe()!==!0&&(F=Te());){if(F===$u){he=Y.backslashes=!0,F=Te();continue}if(F===cP){v=Y.isGlob=!0,X=!0;break}}continue}break}if(F===PE){if(J===PE&&(V=Y.isGlobstar=!0),v=Y.isGlob=!0,X=!0,n===!0)continue;break}if(F===uP){if(v=Y.isGlob=!0,X=!0,n===!0)continue;break}if(F===z4){for(;oe()!==!0&&(wt=Te());){if(wt===$u){he=Y.backslashes=!0,Te();continue}if(wt===V4){E=Y.isBracket=!0,v=Y.isGlob=!0,X=!0;break}}if(n===!0)continue;break}if(r.nonegate!==!0&&F===DE&&y===_){Z=Y.negated=!0,_++;continue}if(r.noparen!==!0&&F===WE){if(v=Y.isGlob=!0,n===!0){for(;oe()!==!0&&(F=Te());){if(F===WE){he=Y.backslashes=!0,F=Te();continue}if(F===cP){X=!0;break}}continue}break}if(v===!0){if(X=!0,n===!0)continue;break}}r.noext===!0&&(A=!1,v=!1);let Ie=h,vi="",I="";_>0&&(vi=h.slice(0,_),h=h.slice(_),b-=_),Ie&&v===!0&&b>0?(Ie=h.slice(0,b),I=h.slice(b)):v===!0?(Ie="",I=h):Ie=h,Ie&&Ie!==""&&Ie!=="/"&&Ie!==h&&lP(Ie.charCodeAt(Ie.length-1))&&(Ie=Ie.slice(0,-1)),r.unescape===!0&&(I&&(I=aP.removeBackslashes(I)),Ie&&he===!0&&(Ie=aP.removeBackslashes(Ie)));let q={prefix:vi,input:t,start:_,base:Ie,glob:I,isBrace:w,isBracket:E,isGlob:v,isExtglob:A,isGlobstar:V,negated:Z,negatedExtglob:U};if(r.tokens===!0&&(q.maxDepth=0,lP(F)||u.push(Y),q.tokens=u),r.parts===!0||r.tokens===!0){let wt;for(let ce=0;ce<a.length;ce++){let Or=wt?wt+1:_,Er=a[ce],Lt=t.slice(Or,Er);r.tokens&&(ce===0&&_!==0?(u[ce].isPrefix=!0,u[ce].value=vi):u[ce].value=Lt,dP(u[ce]),q.maxDepth+=u[ce].depth),(ce!==0||Lt!=="")&&l.push(Lt),wt=Er}if(wt&&wt+1<t.length){let ce=t.slice(wt+1);l.push(ce),r.tokens&&(u[u.length-1].value=ce,dP(u[u.length-1]),q.maxDepth+=u[u.length-1].depth)}q.slashes=a,q.parts=l}return q};hP.exports=G4});var NP=d((PMe,yP)=>{"use strict";o();s();var iy=zu(),Gt=Qu(),{MAX_LENGTH:ny,POSIX_REGEX_SOURCE:J4,REGEX_NON_SPECIAL_CHARS:H4,REGEX_SPECIAL_CHARS_BACKREF:K4,REPLACEMENTS:mP}=iy,Y4=(t,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...t,e);t.sort();let r=`[${t.join("-")}]`;try{new RegExp(r)}catch{return t.map(n=>Gt.escapeRegex(n)).join("..")}return r},Ro=(t,e)=>`Missing ${t}: "${e}" - use "\\\\${e}" to match literal characters`,LE=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");t=mP[t]||t;let r={...e},i=typeof r.maxLength=="number"?Math.min(ny,r.maxLength):ny,n=t.length;if(n>i)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${i}`);let a={type:"bos",value:"",output:r.prepend||""},u=[a],l=r.capture?"":"?:",h=Gt.isWindows(e),y=iy.globChars(h),_=iy.extglobChars(y),{DOT_LITERAL:b,PLUS_LITERAL:w,SLASH_LITERAL:E,ONE_CHAR:v,DOTS_SLASH:A,NO_DOT:V,NO_DOT_SLASH:z,NO_DOTS_SLASH:he,QMARK:Z,QMARK_NO_DOT:U,STAR:X,START_ANCHOR:Ve}=y,J=M=>`(${l}(?:(?!${Ve}${M.dot?A:b}).)*?)`,F=r.dot?"":V,Y=r.dot?Z:U,oe=r.bash===!0?J(r):X;r.capture&&(oe=`(${oe})`),typeof r.noext=="boolean"&&(r.noextglob=r.noext);let x={input:t,index:-1,start:0,dot:r.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:u};t=Gt.removePrefix(t,x),n=t.length;let Te=[],Ie=[],vi=[],I=a,q,wt=()=>x.index===n-1,ce=x.peek=(M=1)=>t[x.index+M],Or=x.advance=()=>t[++x.index]||"",Er=()=>t.slice(x.index+1),Lt=(M="",qe=0)=>{x.consumed+=M,x.index+=qe},pc=M=>{x.output+=M.output!=null?M.output:M.value,Lt(M.value)},vD=()=>{let M=1;for(;ce()==="!"&&(ce(2)!=="("||ce(3)==="?");)Or(),x.start++,M++;return M%2===0?!1:(x.negated=!0,x.start++,!0)},hc=M=>{x[M]++,vi.push(M)},fn=M=>{x[M]--,vi.pop()},re=M=>{if(I.type==="globstar"){let qe=x.braces>0&&(M.type==="comma"||M.type==="brace"),R=M.extglob===!0||Te.length&&(M.type==="pipe"||M.type==="paren");M.type!=="slash"&&M.type!=="paren"&&!qe&&!R&&(x.output=x.output.slice(0,-I.output.length),I.type="star",I.value="*",I.output=oe,x.output+=I.output)}if(Te.length&&M.type!=="paren"&&(Te[Te.length-1].inner+=M.value),(M.value||M.output)&&pc(M),I&&I.type==="text"&&M.type==="text"){I.value+=M.value,I.output=(I.output||"")+M.value;return}M.prev=I,u.push(M),I=M},fc=(M,qe)=>{let R={..._[qe],conditions:1,inner:""};R.prev=I,R.parens=x.parens,R.output=x.output;let te=(r.capture?"(":"")+R.open;hc("parens"),re({type:M,value:qe,output:x.output?"":v}),re({type:"paren",extglob:!0,value:Or(),output:te}),Te.push(R)},ID=M=>{let qe=M.close+(r.capture?")":""),R;if(M.type==="negate"){let te=oe;if(M.inner&&M.inner.length>1&&M.inner.includes("/")&&(te=J(r)),(te!==oe||wt()||/^\)+$/.test(Er()))&&(qe=M.close=`)$))${te}`),M.inner.includes("*")&&(R=Er())&&/^\.[^\\/.]+$/.test(R)){let je=LE(R,{...e,fastpaths:!1}).output;qe=M.close=`)${je})${te})`}M.prev.type==="bos"&&(x.negatedExtglob=!0)}re({type:"paren",extglob:!0,value:q,output:qe}),fn("parens")};if(r.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(t)){let M=!1,qe=t.replace(K4,(R,te,je,gt,Je,bN)=>gt==="\\"?(M=!0,R):gt==="?"?te?te+gt+(Je?Z.repeat(Je.length):""):bN===0?Y+(Je?Z.repeat(Je.length):""):Z.repeat(je.length):gt==="."?b.repeat(je.length):gt==="*"?te?te+gt+(Je?oe:""):oe:te?R:`\\${R}`);return M===!0&&(r.unescape===!0?qe=qe.replace(/\\/g,""):qe=qe.replace(/\\+/g,R=>R.length%2===0?"\\\\":R?"\\":"")),qe===t&&r.contains===!0?(x.output=t,x):(x.output=Gt.wrapOutput(qe,x,e),x)}for(;!wt();){if(q=Or(),q==="\0")continue;if(q==="\\"){let R=ce();if(R==="/"&&r.bash!==!0||R==="."||R===";")continue;if(!R){q+="\\",re({type:"text",value:q});continue}let te=/^\\+/.exec(Er()),je=0;if(te&&te[0].length>2&&(je=te[0].length,x.index+=je,je%2!==0&&(q+="\\")),r.unescape===!0?q=Or():q+=Or(),x.brackets===0){re({type:"text",value:q});continue}}if(x.brackets>0&&(q!=="]"||I.value==="["||I.value==="[^")){if(r.posix!==!1&&q===":"){let R=I.value.slice(1);if(R.includes("[")&&(I.posix=!0,R.includes(":"))){let te=I.value.lastIndexOf("["),je=I.value.slice(0,te),gt=I.value.slice(te+2),Je=J4[gt];if(Je){I.value=je+Je,x.backtrack=!0,Or(),!a.output&&u.indexOf(I)===1&&(a.output=v);continue}}}(q==="["&&ce()!==":"||q==="-"&&ce()==="]")&&(q=`\\${q}`),q==="]"&&(I.value==="["||I.value==="[^")&&(q=`\\${q}`),r.posix===!0&&q==="!"&&I.value==="["&&(q="^"),I.value+=q,pc({value:q});continue}if(x.quotes===1&&q!=='"'){q=Gt.escapeRegex(q),I.value+=q,pc({value:q});continue}if(q==='"'){x.quotes=x.quotes===1?0:1,r.keepQuotes===!0&&re({type:"text",value:q});continue}if(q==="("){hc("parens"),re({type:"paren",value:q});continue}if(q===")"){if(x.parens===0&&r.strictBrackets===!0)throw new SyntaxError(Ro("opening","("));let R=Te[Te.length-1];if(R&&x.parens===R.parens+1){ID(Te.pop());continue}re({type:"paren",value:q,output:x.parens?")":"\\)"}),fn("parens");continue}if(q==="["){if(r.nobracket===!0||!Er().includes("]")){if(r.nobracket!==!0&&r.strictBrackets===!0)throw new SyntaxError(Ro("closing","]"));q=`\\${q}`}else hc("brackets");re({type:"bracket",value:q});continue}if(q==="]"){if(r.nobracket===!0||I&&I.type==="bracket"&&I.value.length===1){re({type:"text",value:q,output:`\\${q}`});continue}if(x.brackets===0){if(r.strictBrackets===!0)throw new SyntaxError(Ro("opening","["));re({type:"text",value:q,output:`\\${q}`});continue}fn("brackets");let R=I.value.slice(1);if(I.posix!==!0&&R[0]==="^"&&!R.includes("/")&&(q=`/${q}`),I.value+=q,pc({value:q}),r.literalBrackets===!1||Gt.hasRegexChars(R))continue;let te=Gt.escapeRegex(I.value);if(x.output=x.output.slice(0,-I.value.length),r.literalBrackets===!0){x.output+=te,I.value=te;continue}I.value=`(${l}${te}|${I.value})`,x.output+=I.value;continue}if(q==="{"&&r.nobrace!==!0){hc("braces");let R={type:"brace",value:q,output:"(",outputIndex:x.output.length,tokensIndex:x.tokens.length};Ie.push(R),re(R);continue}if(q==="}"){let R=Ie[Ie.length-1];if(r.nobrace===!0||!R){re({type:"text",value:q,output:q});continue}let te=")";if(R.dots===!0){let je=u.slice(),gt=[];for(let Je=je.length-1;Je>=0&&(u.pop(),je[Je].type!=="brace");Je--)je[Je].type!=="dots"&&gt.unshift(je[Je].value);te=Y4(gt,r),x.backtrack=!0}if(R.comma!==!0&&R.dots!==!0){let je=x.output.slice(0,R.outputIndex),gt=x.tokens.slice(R.tokensIndex);R.value=R.output="\\{",q=te="\\}",x.output=je;for(let Je of gt)x.output+=Je.output||Je.value}re({type:"brace",value:q,output:te}),fn("braces"),Ie.pop();continue}if(q==="|"){Te.length>0&&Te[Te.length-1].conditions++,re({type:"text",value:q});continue}if(q===","){let R=q,te=Ie[Ie.length-1];te&&vi[vi.length-1]==="braces"&&(te.comma=!0,R="|"),re({type:"comma",value:q,output:R});continue}if(q==="/"){if(I.type==="dot"&&x.index===x.start+1){x.start=x.index+1,x.consumed="",x.output="",u.pop(),I=a;continue}re({type:"slash",value:q,output:E});continue}if(q==="."){if(x.braces>0&&I.type==="dot"){I.value==="."&&(I.output=b);let R=Ie[Ie.length-1];I.type="dots",I.output+=q,I.value+=q,R.dots=!0;continue}if(x.braces+x.parens===0&&I.type!=="bos"&&I.type!=="slash"){re({type:"text",value:q,output:b});continue}re({type:"dot",value:q,output:b});continue}if(q==="?"){if(!(I&&I.value==="(")&&r.noextglob!==!0&&ce()==="("&&ce(2)!=="?"){fc("qmark",q);continue}if(I&&I.type==="paren"){let te=ce(),je=q;if(te==="<"&&!Gt.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(I.value==="("&&!/[!=<:]/.test(te)||te==="<"&&!/<([!=]|\w+>)/.test(Er()))&&(je=`\\${q}`),re({type:"text",value:q,output:je});continue}if(r.dot!==!0&&(I.type==="slash"||I.type==="bos")){re({type:"qmark",value:q,output:U});continue}re({type:"qmark",value:q,output:Z});continue}if(q==="!"){if(r.noextglob!==!0&&ce()==="("&&(ce(2)!=="?"||!/[!=<:]/.test(ce(3)))){fc("negate",q);continue}if(r.nonegate!==!0&&x.index===0){vD();continue}}if(q==="+"){if(r.noextglob!==!0&&ce()==="("&&ce(2)!=="?"){fc("plus",q);continue}if(I&&I.value==="("||r.regex===!1){re({type:"plus",value:q,output:w});continue}if(I&&(I.type==="bracket"||I.type==="paren"||I.type==="brace")||x.parens>0){re({type:"plus",value:q});continue}re({type:"plus",value:w});continue}if(q==="@"){if(r.noextglob!==!0&&ce()==="("&&ce(2)!=="?"){re({type:"at",extglob:!0,value:q,output:""});continue}re({type:"text",value:q});continue}if(q!=="*"){(q==="$"||q==="^")&&(q=`\\${q}`);let R=H4.exec(Er());R&&(q+=R[0],x.index+=R[0].length),re({type:"text",value:q});continue}if(I&&(I.type==="globstar"||I.star===!0)){I.type="star",I.star=!0,I.value+=q,I.output=oe,x.backtrack=!0,x.globstar=!0,Lt(q);continue}let M=Er();if(r.noextglob!==!0&&/^\([^?]/.test(M)){fc("star",q);continue}if(I.type==="star"){if(r.noglobstar===!0){Lt(q);continue}let R=I.prev,te=R.prev,je=R.type==="slash"||R.type==="bos",gt=te&&(te.type==="star"||te.type==="globstar");if(r.bash===!0&&(!je||M[0]&&M[0]!=="/")){re({type:"star",value:q,output:""});continue}let Je=x.braces>0&&(R.type==="comma"||R.type==="brace"),bN=Te.length&&(R.type==="pipe"||R.type==="paren");if(!je&&R.type!=="paren"&&!Je&&!bN){re({type:"star",value:q,output:""});continue}for(;M.slice(0,3)==="/**";){let mc=t[x.index+4];if(mc&&mc!=="/")break;M=M.slice(3),Lt("/**",3)}if(R.type==="bos"&&wt()){I.type="globstar",I.value+=q,I.output=J(r),x.output=I.output,x.globstar=!0,Lt(q);continue}if(R.type==="slash"&&R.prev.type!=="bos"&&!gt&&wt()){x.output=x.output.slice(0,-(R.output+I.output).length),R.output=`(?:${R.output}`,I.type="globstar",I.output=J(r)+(r.strictSlashes?")":"|$)"),I.value+=q,x.globstar=!0,x.output+=R.output+I.output,Lt(q);continue}if(R.type==="slash"&&R.prev.type!=="bos"&&M[0]==="/"){let mc=M[1]!==void 0?"|$":"";x.output=x.output.slice(0,-(R.output+I.output).length),R.output=`(?:${R.output}`,I.type="globstar",I.output=`${J(r)}${E}|${E}${mc})`,I.value+=q,x.output+=R.output+I.output,x.globstar=!0,Lt(q+Or()),re({type:"slash",value:"/",output:""});continue}if(R.type==="bos"&&M[0]==="/"){I.type="globstar",I.value+=q,I.output=`(?:^|${E}|${J(r)}${E})`,x.output=I.output,x.globstar=!0,Lt(q+Or()),re({type:"slash",value:"/",output:""});continue}x.output=x.output.slice(0,-I.output.length),I.type="globstar",I.output=J(r),I.value+=q,x.output+=I.output,x.globstar=!0,Lt(q);continue}let qe={type:"star",value:q,output:oe};if(r.bash===!0){qe.output=".*?",(I.type==="bos"||I.type==="slash")&&(qe.output=F+qe.output),re(qe);continue}if(I&&(I.type==="bracket"||I.type==="paren")&&r.regex===!0){qe.output=q,re(qe);continue}(x.index===x.start||I.type==="slash"||I.type==="dot")&&(I.type==="dot"?(x.output+=z,I.output+=z):r.dot===!0?(x.output+=he,I.output+=he):(x.output+=F,I.output+=F),ce()!=="*"&&(x.output+=v,I.output+=v)),re(qe)}for(;x.brackets>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ro("closing","]"));x.output=Gt.escapeLast(x.output,"["),fn("brackets")}for(;x.parens>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ro("closing",")"));x.output=Gt.escapeLast(x.output,"("),fn("parens")}for(;x.braces>0;){if(r.strictBrackets===!0)throw new SyntaxError(Ro("closing","}"));x.output=Gt.escapeLast(x.output,"{"),fn("braces")}if(r.strictSlashes!==!0&&(I.type==="star"||I.type==="bracket")&&re({type:"maybe_slash",value:"",output:`${E}?`}),x.backtrack===!0){x.output="";for(let M of x.tokens)x.output+=M.output!=null?M.output:M.value,M.suffix&&(x.output+=M.suffix)}return x};LE.fastpaths=(t,e)=>{let r={...e},i=typeof r.maxLength=="number"?Math.min(ny,r.maxLength):ny,n=t.length;if(n>i)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${i}`);t=mP[t]||t;let a=Gt.isWindows(e),{DOT_LITERAL:u,SLASH_LITERAL:l,ONE_CHAR:h,DOTS_SLASH:y,NO_DOT:_,NO_DOTS:b,NO_DOTS_SLASH:w,STAR:E,START_ANCHOR:v}=iy.globChars(a),A=r.dot?b:_,V=r.dot?w:_,z=r.capture?"":"?:",he={negated:!1,prefix:""},Z=r.bash===!0?".*?":E;r.capture&&(Z=`(${Z})`);let U=F=>F.noglobstar===!0?Z:`(${z}(?:(?!${v}${F.dot?y:u}).)*?)`,X=F=>{switch(F){case"*":return`${A}${h}${Z}`;case".*":return`${u}${h}${Z}`;case"*.*":return`${A}${Z}${u}${h}${Z}`;case"*/*":return`${A}${Z}${l}${h}${V}${Z}`;case"**":return A+U(r);case"**/*":return`(?:${A}${U(r)}${l})?${V}${h}${Z}`;case"**/*.*":return`(?:${A}${U(r)}${l})?${V}${Z}${u}${h}${Z}`;case"**/.*":return`(?:${A}${U(r)}${l})?${u}${h}${Z}`;default:{let Y=/^(.*?)\.(\w+)$/.exec(F);if(!Y)return;let oe=X(Y[1]);return oe?oe+u+Y[2]:void 0}}},Ve=Gt.removePrefix(t,he),J=X(Ve);return J&&r.strictSlashes!==!0&&(J+=`${l}?`),J};yP.exports=LE});var wP=d((MMe,_P)=>{"use strict";o();s();var X4=An(),Z4=fP(),BE=NP(),kE=Qu(),eJ=zu(),tJ=t=>t&&typeof t=="object"&&!Array.isArray(t),$e=(t,e,r=!1)=>{if(Array.isArray(t)){let _=t.map(w=>$e(w,e,r));return w=>{for(let E of _){let v=E(w);if(v)return v}return!1}}let i=tJ(t)&&t.tokens&&t.input;if(t===""||typeof t!="string"&&!i)throw new TypeError("Expected pattern to be a non-empty string");let n=e||{},a=kE.isWindows(e),u=i?$e.compileRe(t,e):$e.makeRe(t,e,!1,!0),l=u.state;delete u.state;let h=()=>!1;if(n.ignore){let _={...e,ignore:null,onMatch:null,onResult:null};h=$e(n.ignore,_,r)}let y=(_,b=!1)=>{let{isMatch:w,match:E,output:v}=$e.test(_,u,e,{glob:t,posix:a}),A={glob:t,state:l,regex:u,posix:a,input:_,output:v,match:E,isMatch:w};return typeof n.onResult=="function"&&n.onResult(A),w===!1?(A.isMatch=!1,b?A:!1):h(_)?(typeof n.onIgnore=="function"&&n.onIgnore(A),A.isMatch=!1,b?A:!1):(typeof n.onMatch=="function"&&n.onMatch(A),b?A:!0)};return r&&(y.state=l),y};$e.test=(t,e,r,{glob:i,posix:n}={})=>{if(typeof t!="string")throw new TypeError("Expected input to be a string");if(t==="")return{isMatch:!1,output:""};let a=r||{},u=a.format||(n?kE.toPosixSlashes:null),l=t===i,h=l&&u?u(t):t;return l===!1&&(h=u?u(t):t,l=h===i),(l===!1||a.capture===!0)&&(a.matchBase===!0||a.basename===!0?l=$e.matchBase(t,e,r,n):l=e.exec(h)),{isMatch:!!l,match:l,output:h}};$e.matchBase=(t,e,r,i=kE.isWindows(r))=>(e instanceof RegExp?e:$e.makeRe(e,r)).test(X4.basename(t));$e.isMatch=(t,e,r)=>$e(e,r)(t);$e.parse=(t,e)=>Array.isArray(t)?t.map(r=>$e.parse(r,e)):BE(t,{...e,fastpaths:!1});$e.scan=(t,e)=>Z4(t,e);$e.compileRe=(t,e,r=!1,i=!1)=>{if(r===!0)return t.output;let n=e||{},a=n.contains?"":"^",u=n.contains?"":"$",l=`${a}(?:${t.output})${u}`;t&&t.negated===!0&&(l=`^(?!${l}).*$`);let h=$e.toRegex(l,e);return i===!0&&(h.state=t),h};$e.makeRe=(t,e={},r=!1,i=!1)=>{if(!t||typeof t!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(t[0]==="."||t[0]==="*")&&(n.output=BE.fastpaths(t,e)),n.output||(n=BE(t,e)),$e.compileRe(n,e,r,i)};$e.toRegex=(t,e)=>{try{let r=e||{};return new RegExp(t,r.flags||(r.nocase?"i":""))}catch(r){if(e&&e.debug===!0)throw r;return/$^/}};$e.constants=eJ;_P.exports=$e});var bP=d((BMe,gP)=>{"use strict";o();s();gP.exports=wP()});var qP=d((FMe,IP)=>{"use strict";o();s();var EP=Ym(),SP=tP(),Vr=bP(),UE=Qu(),OP=t=>t===""||t==="./",vP=t=>{let e=t.indexOf("{");return e>-1&&t.indexOf("}",e)>-1},Ae=(t,e,r)=>{e=[].concat(e),t=[].concat(t);let i=new Set,n=new Set,a=new Set,u=0,l=_=>{a.add(_.output),r&&r.onResult&&r.onResult(_)};for(let _=0;_<e.length;_++){let b=Vr(String(e[_]),{...r,onResult:l},!0),w=b.state.negated||b.state.negatedExtglob;w&&u++;for(let E of t){let v=b(E,!0);(w?!v.isMatch:v.isMatch)&&(w?i.add(v.output):(i.delete(v.output),n.add(v.output)))}}let y=(u===e.length?[...a]:[...n]).filter(_=>!i.has(_));if(r&&y.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${e.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?e.map(_=>_.replace(/\\/g,"")):e}return y};Ae.match=Ae;Ae.matcher=(t,e)=>Vr(t,e);Ae.isMatch=(t,e,r)=>Vr(e,r)(t);Ae.any=Ae.isMatch;Ae.not=(t,e,r={})=>{e=[].concat(e).map(String);let i=new Set,n=[],a=l=>{r.onResult&&r.onResult(l),n.push(l.output)},u=new Set(Ae(t,e,{...r,onResult:a}));for(let l of n)u.has(l)||i.add(l);return[...i]};Ae.contains=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${EP.inspect(t)}"`);if(Array.isArray(e))return e.some(i=>Ae.contains(t,i,r));if(typeof e=="string"){if(OP(t)||OP(e))return!1;if(t.includes(e)||t.startsWith("./")&&t.slice(2).includes(e))return!0}return Ae.isMatch(t,e,{...r,contains:!0})};Ae.matchKeys=(t,e,r)=>{if(!UE.isObject(t))throw new TypeError("Expected the first argument to be an object");let i=Ae(Object.keys(t),e,r),n={};for(let a of i)n[a]=t[a];return n};Ae.some=(t,e,r)=>{let i=[].concat(t);for(let n of[].concat(e)){let a=Vr(String(n),r);if(i.some(u=>a(u)))return!0}return!1};Ae.every=(t,e,r)=>{let i=[].concat(t);for(let n of[].concat(e)){let a=Vr(String(n),r);if(!i.every(u=>a(u)))return!1}return!0};Ae.all=(t,e,r)=>{if(typeof t!="string")throw new TypeError(`Expected a string: "${EP.inspect(t)}"`);return[].concat(e).every(i=>Vr(i,r)(t))};Ae.capture=(t,e,r)=>{let i=UE.isWindows(r),a=Vr.makeRe(String(t),{...r,capture:!0}).exec(i?UE.toPosixSlashes(e):e);if(a)return a.slice(1).map(u=>u===void 0?"":u)};Ae.makeRe=(...t)=>Vr.makeRe(...t);Ae.scan=(...t)=>Vr.scan(...t);Ae.parse=(t,e)=>{let r=[];for(let i of[].concat(t||[]))for(let n of SP(String(i),e))r.push(Vr.parse(n,e));return r};Ae.braces=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return e&&e.nobrace===!0||!vP(t)?[t]:SP(t,e)};Ae.braceExpand=(t,e)=>{if(typeof t!="string")throw new TypeError("Expected a string");return Ae.braces(t,{...e,expand:!0})};Ae.hasBraces=vP;IP.exports=Ae});var zE=d(sy=>{"use strict";o();s();Object.defineProperty(sy,"__esModule",{value:!0});sy.TableMatcher=void 0;var rJ=qP(),FE=class{constructor(e){this.isMatch=(0,rJ.matcher)(e,{nocase:!0}),this.isSimpleGlob=!e.includes(".")}match(e,r){let i=this.isSimpleGlob?r:`${e??"*"}.${r}`;return this.isMatch(i)}};sy.TableMatcher=FE});var is=d(oy=>{"use strict";o();s();Object.defineProperty(oy,"__esModule",{value:!0});oy.Introspector=void 0;var xP=on(),AP=zE(),QE=class{async establishDatabaseConnection(e){return await(0,xP.sql)`SELECT 1;`.execute(e)}async connect(e){for(let r of[!0,!1])try{let i=await e.dialect.createKyselyDialect({connectionString:e.connectionString,ssl:r}),n=new xP.Kysely({dialect:i});return await this.establishDatabaseConnection(n),n}catch(i){let n=i instanceof Error&&/\bSSL\b/.test(i.message);if(!r||!n)throw i}throw new Error("Failed to connect to database.")}async getTables(e){let r=await e.db.introspection.getTables();if(e.includePattern){let i=new AP.TableMatcher(e.includePattern);r=r.filter(({name:n,schema:a})=>i.match(a,n))}if(e.excludePattern){let i=new AP.TableMatcher(e.excludePattern);r=r.filter(({name:n,schema:a})=>!i.match(a,n))}return r}};oy.Introspector=QE});var VE=d(ay=>{"use strict";o();s();Object.defineProperty(ay,"__esModule",{value:!0});ay.ColumnMetadata=void 0;var $E=class{constructor(e){this.comment=e.comment??null,this.dataType=e.dataType,this.dataTypeSchema=e.dataTypeSchema,this.enumValues=e.enumValues??null,this.hasDefaultValue=e.hasDefaultValue??!1,this.isArray=e.isArray??!1,this.isAutoIncrementing=e.isAutoIncrementing??!1,this.isNullable=e.isNullable??!1,this.name=e.name}};ay.ColumnMetadata=$E});var JE=d(uy=>{"use strict";o();s();Object.defineProperty(uy,"__esModule",{value:!0});uy.TableMetadata=void 0;var iJ=VE(),GE=class{constructor(e){this.columns=e.columns.map(r=>new iJ.ColumnMetadata(r)),this.isPartition=!!e.isPartition,this.isView=!!e.isView,this.name=e.name,this.schema=e.schema}};uy.TableMetadata=GE});var ns=d(cy=>{"use strict";o();s();Object.defineProperty(cy,"__esModule",{value:!0});cy.DatabaseMetadata=void 0;var nJ=un(),sJ=JE(),HE=class{constructor({enums:e,tables:r}){this.enums=e??new nJ.EnumCollection,this.tables=r.map(i=>new sJ.TableMetadata(i))}};cy.DatabaseMetadata=HE});var YE=d(ly=>{"use strict";o();s();Object.defineProperty(ly,"__esModule",{value:!0});ly.SqliteIntrospector=void 0;var oJ=un(),aJ=is(),uJ=ns(),KE=class extends aJ.Introspector{async introspect(e){let r=await this.getTables(e),i=new oJ.EnumCollection;return new uJ.DatabaseMetadata({enums:i,tables:r})}};ly.SqliteIntrospector=KE});var Vu=d(Gr=>{"use strict";o();s();var cJ=Gr&&Gr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),lJ=Gr&&Gr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dJ=Gr&&Gr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cJ(e,t,r);return lJ(e,t),e};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.SqliteIntrospectorDialect=void 0;var pJ=on(),hJ=an(),fJ=YE(),XE=class extends hJ.IntrospectorDialect{constructor(){super(...arguments),this.introspector=new fJ.SqliteIntrospector}async createKyselyDialect(e){let{default:r}=await Promise.resolve().then(()=>dJ(Ht("better-sqlite3")));return new pJ.SqliteDialect({database:new r(e.connectionString)})}};Gr.SqliteIntrospectorDialect=XE});var Be=d(dy=>{"use strict";o();s();Object.defineProperty(dy,"__esModule",{value:!0});dy.NodeType=void 0;var TP;(function(t){t.ALIAS_DECLARATION="AliasDeclaration",t.ARRAY_EXPRESSION="ArrayExpression",t.EXPORT_STATEMENT="ExportStatement",t.EXTENDS_CLAUSE="ExtendsClause",t.GENERIC_EXPRESSION="GenericExpression",t.IDENTIFIER="Identifier",t.IMPORT_CLAUSE="ImportClause",t.IMPORT_STATEMENT="ImportStatement",t.INFER_CLAUSE="InferClause",t.INTERFACE_DECLARATION="InterfaceDeclaration",t.LITERAL="Literal",t.MAPPED_TYPE="MappedType",t.MODULE_REFERENCE="ModuleReference",t.OBJECT_EXPRESSION="ObjectExpression",t.PROPERTY="Property",t.RAW_EXPRESSION="RawExpression",t.RUNTIME_ENUM_DECLARATION="RuntimeEnumDeclaration",t.TEMPLATE="Template",t.UNION_EXPRESSION="UnionExpression"})(TP||(dy.NodeType=TP={}))});var gi=d(py=>{"use strict";o();s();Object.defineProperty(py,"__esModule",{value:!0});py.IdentifierNode=void 0;var mJ=Be(),ZE=class{constructor(e){this.type=mJ.NodeType.IDENTIFIER,this.name=e}};py.IdentifierNode=ZE});var Po=d(hy=>{"use strict";o();s();Object.defineProperty(hy,"__esModule",{value:!0});hy.Adapter=void 0;var yJ=gi(),e0=class{constructor(){this.defaultScalar=new yJ.IdentifierNode("unknown"),this.defaultSchemas=[],this.definitions={},this.imports={},this.scalars={}}};hy.Adapter=e0});var jo=d(fy=>{"use strict";o();s();Object.defineProperty(fy,"__esModule",{value:!0});fy.SqliteAdapter=void 0;var NJ=Po(),cn=gi(),t0=class extends NJ.Adapter{constructor(){super(...arguments),this.defaultScalar=new cn.IdentifierNode("string"),this.scalars={any:new cn.IdentifierNode("unknown"),blob:new cn.IdentifierNode("Buffer"),boolean:new cn.IdentifierNode("number"),integer:new cn.IdentifierNode("number"),numeric:new cn.IdentifierNode("number"),real:new cn.IdentifierNode("number"),text:new cn.IdentifierNode("string")}}};fy.SqliteAdapter=t0});var i0=d(my=>{"use strict";o();s();Object.defineProperty(my,"__esModule",{value:!0});my.KyselyBunSqliteDialect=void 0;var _J=Vu(),wJ=jo(),r0=class extends _J.SqliteIntrospectorDialect{constructor(){super(...arguments),this.adapter=new wJ.SqliteAdapter}};my.KyselyBunSqliteDialect=r0});var s0=d(yy=>{"use strict";o();s();Object.defineProperty(yy,"__esModule",{value:!0});yy.LibsqlIntrospector=void 0;var gJ=un(),bJ=is(),OJ=ns(),n0=class extends bJ.Introspector{async introspect(e){let r=await this.getTables(e),i=new gJ.EnumCollection;return new OJ.DatabaseMetadata({enums:i,tables:r})}};yy.LibsqlIntrospector=n0});var a0=d(Jr=>{"use strict";o();s();var EJ=Jr&&Jr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),SJ=Jr&&Jr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vJ=Jr&&Jr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&EJ(e,t,r);return SJ(e,t),e};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.LibsqlIntrospectorDialect=void 0;var IJ=an(),qJ=s0(),o0=class extends IJ.IntrospectorDialect{constructor(){super(...arguments),this.introspector=new qJ.LibsqlIntrospector}async createKyselyDialect(e){let{LibsqlDialect:r}=await Promise.resolve().then(()=>vJ(Ht("@libsql/kysely-libsql"))),i=new URL(e.connectionString);if(i.username){let n=i.username;return i.username="",new r({authToken:n,url:i.toString()})}return new r({url:e.connectionString})}};Jr.LibsqlIntrospectorDialect=o0});var c0=d(Ny=>{"use strict";o();s();Object.defineProperty(Ny,"__esModule",{value:!0});Ny.LibsqlAdapter=void 0;var xJ=jo(),u0=class extends xJ.SqliteAdapter{};Ny.LibsqlAdapter=u0});var d0=d(_y=>{"use strict";o();s();Object.defineProperty(_y,"__esModule",{value:!0});_y.LibsqlDialect=void 0;var AJ=a0(),TJ=c0(),l0=class extends AJ.LibsqlIntrospectorDialect{constructor(){super(...arguments),this.adapter=new TJ.LibsqlAdapter}};_y.LibsqlDialect=l0});var h0=d(wy=>{"use strict";o();s();Object.defineProperty(wy,"__esModule",{value:!0});wy.MssqlIntrospector=void 0;var CJ=un(),RJ=is(),PJ=ns(),p0=class extends RJ.Introspector{async introspect(e){let r=await this.getTables(e),i=new CJ.EnumCollection;return new PJ.DatabaseMetadata({enums:i,tables:r})}};wy.MssqlIntrospector=p0});var N0=d(or=>{"use strict";o();s();var jJ=or&&or.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),DJ=or&&or.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),f0=or&&or.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&jJ(e,t,r);return DJ(e,t),e},MJ=or&&or.__classPrivateFieldGet||function(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)},m0,CP;Object.defineProperty(or,"__esModule",{value:!0});or.MssqlIntrospectorDialect=void 0;var WJ=on(),LJ=an(),BJ=h0(),kJ=1433,y0=class extends LJ.IntrospectorDialect{constructor(){super(...arguments),m0.add(this),this.introspector=new BJ.MssqlIntrospector}async createKyselyDialect(e){let r=await Promise.resolve().then(()=>f0(Ht("tarn"))),i=await Promise.resolve().then(()=>f0(Ht("tedious"))),{database:n,instanceName:a,password:u,port:l,server:h,userName:y}=await MJ(this,m0,"m",CP).call(this,e.connectionString);return new WJ.MssqlDialect({tarn:{...r,options:{min:0,max:1}},tedious:{...i,connectionFactory:()=>new i.Connection({authentication:{options:{password:u,userName:y},type:"default"},options:{database:n,encrypt:e.ssl??!0,instanceName:a,port:l,trustServerCertificate:!0},server:h})}})}};or.MssqlIntrospectorDialect=y0;m0=new WeakSet,CP=async function(e){let{parseConnectionString:r}=await Promise.resolve().then(()=>f0(Ht("@tediousjs/connection-string"))),i=r(e),n=i.server.split(","),a=n[0].split("\\"),u=a[0],l=a[1],h=l===void 0?n[1]?Number.parseInt(n[1],10):kJ:void 0;return{database:i.database,instanceName:l,password:i.password,port:h,server:u,userName:i["user id"]}}});var RP=d(gy=>{"use strict";o();s();Object.defineProperty(gy,"__esModule",{value:!0});gy.MssqlAdapter=void 0;var UJ=Po(),ye=gi(),_0=class extends UJ.Adapter{constructor(){super(...arguments),this.scalars={bigint:new ye.IdentifierNode("number"),binary:new ye.IdentifierNode("Buffer"),bit:new ye.IdentifierNode("boolean"),char:new ye.IdentifierNode("string"),date:new ye.IdentifierNode("Date"),datetime:new ye.IdentifierNode("Date"),datetime2:new ye.IdentifierNode("Date"),datetimeoffset:new ye.IdentifierNode("Date"),decimal:new ye.IdentifierNode("number"),double:new ye.IdentifierNode("number"),float:new ye.IdentifierNode("number"),image:new ye.IdentifierNode("Buffer"),int:new ye.IdentifierNode("number"),money:new ye.IdentifierNode("number"),nchar:new ye.IdentifierNode("string"),ntext:new ye.IdentifierNode("string"),number:new ye.IdentifierNode("number"),numeric:new ye.IdentifierNode("number"),nvarchar:new ye.IdentifierNode("string"),real:new ye.IdentifierNode("number"),smalldatetime:new ye.IdentifierNode("Date"),smallint:new ye.IdentifierNode("number"),smallmoney:new ye.IdentifierNode("number"),text:new ye.IdentifierNode("string"),time:new ye.IdentifierNode("Date"),tinyint:new ye.IdentifierNode("number"),tvp:new ye.IdentifierNode("unknown"),uniqueidentifier:new ye.IdentifierNode("string"),varbinary:new ye.IdentifierNode("Buffer"),varchar:new ye.IdentifierNode("string")}}};gy.MssqlAdapter=_0});var jP=d(Hr=>{"use strict";o();s();var FJ=Hr&&Hr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),zJ=Hr&&Hr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),QJ=Hr&&Hr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&FJ(e,t,r);return zJ(e,t),e},PP,$J;Object.defineProperty(Hr,"__esModule",{value:!0});Hr.MssqlDialect=void 0;var VJ=N0(),GJ=RP(),JJ=1433,w0=class extends VJ.MssqlIntrospectorDialect{constructor(){super(...arguments),PP.add(this),this.adapter=new GJ.MssqlAdapter}};Hr.MssqlDialect=w0;PP=new WeakSet,$J=async function(e){let{parseConnectionString:r}=await Promise.resolve().then(()=>QJ(Ht("@tediousjs/connection-string"))),i=r(e),n=i.server.split(","),a=n[0],u=n[1]?Number.parseInt(n[1],10):JJ;return{database:i.database,password:i.password,port:u,server:a,userName:i["user id"]}}});var b0=d(Do=>{"use strict";o();s();var gr=Do&&Do.__classPrivateFieldGet||function(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)},Jt,bi,DP,WP,MP;Object.defineProperty(Do,"__esModule",{value:!0});Do.MysqlParser=void 0;var g0=class{constructor(e){Jt.add(this),this.data="",this.index=0,this.data=e}parseEnum(){gr(this,Jt,"m",bi).call(this,"e"),gr(this,Jt,"m",bi).call(this,"n"),gr(this,Jt,"m",bi).call(this,"u"),gr(this,Jt,"m",bi).call(this,"m"),gr(this,Jt,"m",bi).call(this,"(");let e=gr(this,Jt,"m",WP).call(this);return gr(this,Jt,"m",bi).call(this,")"),e}};Do.MysqlParser=g0;Jt=new WeakSet,bi=function(e){if(this.data[this.index]!==e)throw gr(this,Jt,"m",DP).call(this);this.index++},DP=function(){let e=JSON.stringify(this.data[this.index])??"EOF";return new SyntaxError(`Unexpected character ${e} at index ${this.index}`)},WP=function(){let e=[];for(;this.index<this.data.length&&this.data[this.index]!==")";){e.length>0&&gr(this,Jt,"m",bi).call(this,",");let r=gr(this,Jt,"m",MP).call(this);e.push(r)}return e},MP=function(){let e="";for(gr(this,Jt,"m",bi).call(this,"'");this.index<this.data.length;)if(this.data[this.index]==="'")if(this.index++,this.data[this.index]==="'")e+=this.data[this.index++];else break;else e+=this.data[this.index++];return e}});var E0=d(Mo=>{"use strict";o();s();var LP=Mo&&Mo.__classPrivateFieldGet||function(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)},by,BP,kP;Object.defineProperty(Mo,"__esModule",{value:!0});Mo.MysqlIntrospector=void 0;var HJ=un(),KJ=is(),YJ=ns(),XJ=b0(),ZJ=/^enum\(.*\)$/,O0=class extends KJ.Introspector{constructor(){super(...arguments),by.add(this)}async introspect(e){let r=await this.getTables(e),i=await LP(this,by,"m",kP).call(this,e.db);return LP(this,by,"m",BP).call(this,{enums:i,tables:r})}};Mo.MysqlIntrospector=O0;by=new WeakSet,BP=function({enums:e,tables:r}){let i=r.map(n=>({...n,columns:n.columns.map(a=>({...a,enumValues:a.dataType==="enum"?e.get(`${n.schema??""}.${n.name}.${a.name}`):null}))}));return new YJ.DatabaseMetadata({tables:i})},kP=async function(e){let r=new HJ.EnumCollection,i=await e.withoutPlugins().selectFrom("information_schema.COLUMNS").select(["COLUMN_NAME","COLUMN_TYPE","TABLE_NAME","TABLE_SCHEMA"]).execute();for(let n of i)if(ZJ.test(n.COLUMN_TYPE)){let a=`${n.TABLE_SCHEMA}.${n.TABLE_NAME}.${n.COLUMN_NAME}`,l=new XJ.MysqlParser(n.COLUMN_TYPE).parseEnum();r.set(a,l)}return r}});var v0=d(Kr=>{"use strict";o();s();var eH=Kr&&Kr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),tH=Kr&&Kr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rH=Kr&&Kr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&eH(e,t,r);return tH(e,t),e};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.MysqlIntrospectorDialect=void 0;var iH=on(),nH=an(),sH=E0(),S0=class extends nH.IntrospectorDialect{constructor(){super(...arguments),this.introspector=new sH.MysqlIntrospector}async createKyselyDialect(e){let{createPool:r}=await Promise.resolve().then(()=>rH(Ht("mysql2")));return new iH.MysqlDialect({pool:r({uri:e.connectionString})})}};Kr.MysqlIntrospectorDialect=S0});var Gu=d(Oy=>{"use strict";o();s();Object.defineProperty(Oy,"__esModule",{value:!0});Oy.ArrayExpressionNode=void 0;var oH=Be(),I0=class{constructor(e){this.type=oH.NodeType.ARRAY_EXPRESSION,this.values=e}};Oy.ArrayExpressionNode=I0});var Wo=d(Ey=>{"use strict";o();s();Object.defineProperty(Ey,"__esModule",{value:!0});Ey.GenericExpressionNode=void 0;var aH=Be(),q0=class{constructor(e,r){this.type=aH.NodeType.GENERIC_EXPRESSION,this.name=e,this.args=r}};Ey.GenericExpressionNode=q0});var Ju=d(Sy=>{"use strict";o();s();Object.defineProperty(Sy,"__esModule",{value:!0});Sy.ColumnTypeNode=void 0;var uH=Wo(),x0=class extends uH.GenericExpressionNode{constructor(e,...r){super("ColumnType",[e,...r])}};Sy.ColumnTypeNode=x0});var Hu=d(vy=>{"use strict";o();s();Object.defineProperty(vy,"__esModule",{value:!0});vy.ObjectExpressionNode=void 0;var cH=Be(),A0=class{constructor(e){this.type=cH.NodeType.OBJECT_EXPRESSION,this.properties=e}};vy.ObjectExpressionNode=A0});var Ku=d(Iy=>{"use strict";o();s();Object.defineProperty(Iy,"__esModule",{value:!0});Iy.PropertyNode=void 0;var lH=Be(),T0=class{constructor(e,r,i=null){this.type=lH.NodeType.PROPERTY,this.comment=i,this.key=e,this.value=r}};Iy.PropertyNode=T0});var Lo=d(qy=>{"use strict";o();s();Object.defineProperty(qy,"__esModule",{value:!0});qy.UnionExpressionNode=void 0;var dH=Be(),C0=class{constructor(e){this.type=dH.NodeType.UNION_EXPRESSION,this.args=e}};qy.UnionExpressionNode=C0});var P0=d(xy=>{"use strict";o();s();Object.defineProperty(xy,"__esModule",{value:!0});xy.ExtendsClauseNode=void 0;var pH=Be(),R0=class{constructor(e,r,i,n){this.type=pH.NodeType.EXTENDS_CLAUSE,this.checkType=e,this.extendsType=r,this.trueType=i,this.falseType=n}};xy.ExtendsClauseNode=R0});var D0=d(Ay=>{"use strict";o();s();Object.defineProperty(Ay,"__esModule",{value:!0});Ay.InferClauseNode=void 0;var hH=Be(),j0=class{constructor(e){this.type=hH.NodeType.INFER_CLAUSE,this.name=e}};Ay.InferClauseNode=j0});var W0=d(Ty=>{"use strict";o();s();Object.defineProperty(Ty,"__esModule",{value:!0});Ty.MappedTypeNode=void 0;var fH=Be(),M0=class{constructor(e){this.type=fH.NodeType.MAPPED_TYPE,this.value=e}};Ty.MappedTypeNode=M0});var B0=d(Cy=>{"use strict";o();s();Object.defineProperty(Cy,"__esModule",{value:!0});Cy.TemplateNode=void 0;var mH=Be(),L0=class{constructor(e,r){this.type=mH.NodeType.TEMPLATE,this.params=e,this.expression=r}};Cy.TemplateNode=L0});var Xu=d(Mt=>{"use strict";o();s();Object.defineProperty(Mt,"__esModule",{value:!0});Mt.JSON_DEFINITION=Mt.JSON_VALUE_DEFINITION=Mt.JSON_PRIMITIVE_DEFINITION=Mt.JSON_OBJECT_DEFINITION=Mt.JSON_ARRAY_DEFINITION=Mt.GLOBAL_DEFINITIONS=void 0;var os=Gu(),Yu=Ju(),k0=P0(),UP=Wo(),Se=gi(),ss=D0(),yH=W0(),U0=B0(),Ry=Lo();Mt.GLOBAL_DEFINITIONS={ArrayType:new U0.TemplateNode(["T"],new k0.ExtendsClauseNode(new UP.GenericExpressionNode("ArrayTypeImpl",[new Se.IdentifierNode("T")]),new os.ArrayExpressionNode(new ss.InferClauseNode("U")),new os.ArrayExpressionNode(new Se.IdentifierNode("U")),new UP.GenericExpressionNode("ArrayTypeImpl",[new Se.IdentifierNode("T")]))),ArrayTypeImpl:new U0.TemplateNode(["T"],new k0.ExtendsClauseNode(new Se.IdentifierNode("T"),new Yu.ColumnTypeNode(new ss.InferClauseNode("S"),new ss.InferClauseNode("I"),new ss.InferClauseNode("U")),new Yu.ColumnTypeNode(new os.ArrayExpressionNode(new Se.IdentifierNode("S")),new os.ArrayExpressionNode(new Se.IdentifierNode("I")),new os.ArrayExpressionNode(new Se.IdentifierNode("U"))),new os.ArrayExpressionNode(new Se.IdentifierNode("T")))),Generated:new U0.TemplateNode(["T"],new k0.ExtendsClauseNode(new Se.IdentifierNode("T"),new Yu.ColumnTypeNode(new ss.InferClauseNode("S"),new ss.InferClauseNode("I"),new ss.InferClauseNode("U")),new Yu.ColumnTypeNode(new Se.IdentifierNode("S"),new Ry.UnionExpressionNode([new Se.IdentifierNode("I"),new Se.IdentifierNode("undefined")]),new Se.IdentifierNode("U")),new Yu.ColumnTypeNode(new Se.IdentifierNode("T"),new Ry.UnionExpressionNode([new Se.IdentifierNode("T"),new Se.IdentifierNode("undefined")]),new Se.IdentifierNode("T"))))};Mt.JSON_ARRAY_DEFINITION=new os.ArrayExpressionNode(new Se.IdentifierNode("JsonValue"));Mt.JSON_OBJECT_DEFINITION=new yH.MappedTypeNode(new Se.IdentifierNode("JsonValue"));Mt.JSON_PRIMITIVE_DEFINITION=new Ry.UnionExpressionNode([new Se.IdentifierNode("boolean"),new Se.IdentifierNode("null"),new Se.IdentifierNode("number"),new Se.IdentifierNode("string")]);Mt.JSON_VALUE_DEFINITION=new Ry.UnionExpressionNode([new Se.IdentifierNode("JsonArray"),new Se.IdentifierNode("JsonObject"),new Se.IdentifierNode("JsonPrimitive")]);Mt.JSON_DEFINITION=new Se.IdentifierNode("JsonValue")});var z0=d(jy=>{"use strict";o();s();Object.defineProperty(jy,"__esModule",{value:!0});jy.MysqlAdapter=void 0;var NH=Po(),as=Gu(),FP=Ju(),$=gi(),_H=Hu(),zP=Ku(),QP=Lo(),Py=Xu(),F0=class extends NH.Adapter{constructor(){super(...arguments),this.definitions={Decimal:new FP.ColumnTypeNode(new $.IdentifierNode("string"),new QP.UnionExpressionNode([new $.IdentifierNode("string"),new $.IdentifierNode("number")])),Geometry:new QP.UnionExpressionNode([new $.IdentifierNode("LineString"),new $.IdentifierNode("Point"),new $.IdentifierNode("Polygon"),new as.ArrayExpressionNode(new $.IdentifierNode("Geometry"))]),Json:new FP.ColumnTypeNode(new $.IdentifierNode("JsonValue"),new $.IdentifierNode("string"),new $.IdentifierNode("string")),JsonArray:Py.JSON_ARRAY_DEFINITION,JsonObject:Py.JSON_OBJECT_DEFINITION,JsonPrimitive:Py.JSON_PRIMITIVE_DEFINITION,JsonValue:Py.JSON_VALUE_DEFINITION,LineString:new as.ArrayExpressionNode(new $.IdentifierNode("Point")),Point:new _H.ObjectExpressionNode([new zP.PropertyNode("x",new $.IdentifierNode("number")),new zP.PropertyNode("y",new $.IdentifierNode("number"))]),Polygon:new as.ArrayExpressionNode(new $.IdentifierNode("LineString"))},this.scalars={bigint:new $.IdentifierNode("number"),binary:new $.IdentifierNode("Buffer"),bit:new $.IdentifierNode("Buffer"),blob:new $.IdentifierNode("Buffer"),char:new $.IdentifierNode("string"),date:new $.IdentifierNode("Date"),datetime:new $.IdentifierNode("Date"),decimal:new $.IdentifierNode("Decimal"),double:new $.IdentifierNode("number"),float:new $.IdentifierNode("number"),geomcollection:new as.ArrayExpressionNode(new $.IdentifierNode("Geometry")),geometry:new $.IdentifierNode("Geometry"),int:new $.IdentifierNode("number"),json:new $.IdentifierNode("Json"),linestring:new $.IdentifierNode("LineString"),longblob:new $.IdentifierNode("Buffer"),longtext:new $.IdentifierNode("string"),mediumblob:new $.IdentifierNode("Buffer"),mediumint:new $.IdentifierNode("number"),mediumtext:new $.IdentifierNode("string"),multilinestring:new as.ArrayExpressionNode(new $.IdentifierNode("LineString")),multipoint:new as.ArrayExpressionNode(new $.IdentifierNode("Point")),multipolygon:new as.ArrayExpressionNode(new $.IdentifierNode("Polygon")),point:new $.IdentifierNode("Point"),polygon:new $.IdentifierNode("Polygon"),set:new $.IdentifierNode("unknown"),smallint:new $.IdentifierNode("number"),text:new $.IdentifierNode("string"),time:new $.IdentifierNode("string"),timestamp:new $.IdentifierNode("Date"),tinyblob:new $.IdentifierNode("Buffer"),tinyint:new $.IdentifierNode("number"),tinytext:new $.IdentifierNode("string"),varbinary:new $.IdentifierNode("Buffer"),varchar:new $.IdentifierNode("string"),year:new $.IdentifierNode("number")}}};jy.MysqlAdapter=F0});var $0=d(Dy=>{"use strict";o();s();Object.defineProperty(Dy,"__esModule",{value:!0});Dy.MysqlDialect=void 0;var wH=v0(),gH=z0(),Q0=class extends wH.MysqlIntrospectorDialect{constructor(){super(...arguments),this.adapter=new gH.MysqlAdapter}};Dy.MysqlDialect=Q0});var Zu=d(Bo=>{"use strict";o();s();Object.defineProperty(Bo,"__esModule",{value:!0});Bo.DEFAULT_DATE_PARSER=Bo.DateParser=void 0;var V0;(function(t){t.STRING="string",t.TIMESTAMP="timestamp"})(V0||(Bo.DateParser=V0={}));Bo.DEFAULT_DATE_PARSER=V0.TIMESTAMP});var ec=d(ko=>{"use strict";o();s();Object.defineProperty(ko,"__esModule",{value:!0});ko.DEFAULT_NUMERIC_PARSER=ko.NumericParser=void 0;var G0;(function(t){t.NUMBER="number",t.NUMBER_OR_STRING="number-or-string",t.STRING="string"})(G0||(ko.NumericParser=G0={}));ko.DEFAULT_NUMERIC_PARSER=G0.STRING});var H0=d(Uo=>{"use strict";o();s();var tc=Uo&&Uo.__classPrivateFieldGet||function(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)},us,GP,$P,JP,HP,KP;Object.defineProperty(Uo,"__esModule",{value:!0});Uo.PostgresIntrospector=void 0;var VP=on(),bH=un(),OH=is(),EH=ns(),J0=class extends OH.Introspector{constructor(e){super(),us.add(this),this.options={defaultSchemas:e?.defaultSchemas&&e.defaultSchemas.length>0?e.defaultSchemas:["public"],domains:e?.domains??!0,partitions:e?.partitions}}async introspect(e){let r=await this.getTables(e),[i,n,a]=await Promise.all([tc(this,us,"m",JP).call(this,e.db),tc(this,us,"m",HP).call(this,e.db),tc(this,us,"m",KP).call(this,e.db)]);return tc(this,us,"m",GP).call(this,{enums:n,domains:i,partitions:a,tables:r})}};Uo.PostgresIntrospector=J0;us=new WeakSet,GP=function({domains:e,enums:r,partitions:i,tables:n}){let a=n.map(u=>{let l=u.columns.map(y=>{let _=tc(this,us,"m",$P).call(this,y,e),b=r.get(`${y.dataTypeSchema??this.options.defaultSchemas}.${_}`),w=_.startsWith("_");return{comment:y.comment??null,dataType:w?_.slice(1):_,dataTypeSchema:y.dataTypeSchema,enumValues:b,hasDefaultValue:y.hasDefaultValue,isArray:w,isAutoIncrementing:y.isAutoIncrementing,isNullable:y.isNullable,name:y.name}}),h=i.some(y=>y.schema===u.schema&&y.name===u.name);return{columns:l,isPartition:h,isView:u.isView,name:u.name,schema:u.schema}}).filter(u=>this.options.partitions?!0:!u.isPartition);return new EH.DatabaseMetadata({enums:r,tables:a})},$P=function(e,r){return r.find(n=>n.typeName===e.dataType&&n.typeSchema===e.dataTypeSchema)?.rootType??e.dataType},JP=async function(e){return this.options.domains?(await(0,VP.sql)`
      with recursive domain_hierarchy as (
        select oid, typbasetype
        from pg_type
        where typtype = 'd'
        and 'information_schema'::regnamespace::oid <> typnamespace

        union all

        select dh.oid, t.typbasetype
        from domain_hierarchy as dh
        join pg_type as t ON t.oid = dh.typbasetype
      )

      select
        t.typname as "typeName",
        t.typnamespace::regnamespace::text as "typeSchema",
        bt.typname as "rootType"
      from domain_hierarchy as dh
      join pg_type as t on dh.oid = t.oid
      join pg_type as bt on dh.typbasetype = bt.oid
      where bt.typbasetype = 0;
    `.execute(e)).rows:[]},HP=async function(e){let r=new bH.EnumCollection,i=await e.withoutPlugins().selectFrom("pg_type as type").innerJoin("pg_enum as enum","type.oid","enum.enumtypid").innerJoin("pg_catalog.pg_namespace as namespace","namespace.oid","type.typnamespace").select(["namespace.nspname as schemaName","type.typname as enumName","enum.enumlabel as enumValue"]).execute();for(let n of i)r.add(`${n.schemaName}.${n.enumName}`,n.enumValue);return r},KP=async function(e){return(await(0,VP.sql)`
      select pg_namespace.nspname as schema, pg_class.relname as name
      from pg_inherits
      join pg_class on pg_inherits.inhrelid = pg_class.oid
      join pg_namespace on pg_namespace.oid = pg_class.relnamespace;
    `.execute(e)).rows}});var X0=d(Yr=>{"use strict";o();s();var SH=Yr&&Yr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),vH=Yr&&Yr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),IH=Yr&&Yr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&SH(e,t,r);return vH(e,t),e};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.PostgresIntrospectorDialect=void 0;var qH=on(),xH=an(),YP=Zu(),K0=ec(),AH=H0(),Y0=class extends xH.IntrospectorDialect{constructor(e){super(),this.introspector=new AH.PostgresIntrospector({defaultSchemas:e?.defaultSchemas,domains:e?.domains,partitions:e?.partitions}),this.options={dateParser:e?.dateParser??YP.DEFAULT_DATE_PARSER,defaultSchemas:e?.defaultSchemas,domains:e?.domains??!0,numericParser:e?.numericParser??K0.DEFAULT_NUMERIC_PARSER}}async createKyselyDialect(e){let{default:r}=await Promise.resolve().then(()=>IH(Ht("pg")));return this.options.dateParser===YP.DateParser.STRING&&r.types.setTypeParser(1082,i=>i),this.options.numericParser===K0.NumericParser.NUMBER?r.types.setTypeParser(1700,Number):this.options.numericParser===K0.NumericParser.NUMBER_OR_STRING&&r.types.setTypeParser(1700,i=>{let n=Number(i);return n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER?i:n}),new qH.PostgresDialect({pool:new r.Pool({connectionString:e.connectionString,ssl:e.ssl?{rejectUnauthorized:!1}:!1})})}};Yr.PostgresIntrospectorDialect=Y0});var Wy=d(My=>{"use strict";o();s();Object.defineProperty(My,"__esModule",{value:!0});My.ModuleReferenceNode=void 0;var TH=Be(),Z0=class{constructor(e){this.type=TH.NodeType.MODULE_REFERENCE,this.name=e}};My.ModuleReferenceNode=Z0});var tS=d(Ly=>{"use strict";o();s();Object.defineProperty(Ly,"__esModule",{value:!0});Ly.PostgresAdapter=void 0;var CH=Zu(),XP=ec(),RH=Po(),Fo=Ju(),P=gi(),PH=Wy(),ZP=Hu(),rc=Ku(),br=Lo(),ic=Xu(),eS=class extends RH.Adapter{constructor(e){super(),this.defaultScalar=new P.IdentifierNode("string"),this.defaultSchemas=["public"],this.definitions={Circle:new ZP.ObjectExpressionNode([new rc.PropertyNode("x",new P.IdentifierNode("number")),new rc.PropertyNode("y",new P.IdentifierNode("number")),new rc.PropertyNode("radius",new P.IdentifierNode("number"))]),Int8:new Fo.ColumnTypeNode(new P.IdentifierNode("string"),new br.UnionExpressionNode([new P.IdentifierNode("string"),new P.IdentifierNode("number"),new P.IdentifierNode("bigint")]),new br.UnionExpressionNode([new P.IdentifierNode("string"),new P.IdentifierNode("number"),new P.IdentifierNode("bigint")])),Interval:new Fo.ColumnTypeNode(new P.IdentifierNode("IPostgresInterval"),new br.UnionExpressionNode([new P.IdentifierNode("IPostgresInterval"),new P.IdentifierNode("number"),new P.IdentifierNode("string")]),new br.UnionExpressionNode([new P.IdentifierNode("IPostgresInterval"),new P.IdentifierNode("number"),new P.IdentifierNode("string")])),Json:ic.JSON_DEFINITION,JsonArray:ic.JSON_ARRAY_DEFINITION,JsonObject:ic.JSON_OBJECT_DEFINITION,JsonPrimitive:ic.JSON_PRIMITIVE_DEFINITION,JsonValue:ic.JSON_VALUE_DEFINITION,Numeric:new Fo.ColumnTypeNode(new P.IdentifierNode("string"),new br.UnionExpressionNode([new P.IdentifierNode("number"),new P.IdentifierNode("string")]),new br.UnionExpressionNode([new P.IdentifierNode("number"),new P.IdentifierNode("string")])),Point:new ZP.ObjectExpressionNode([new rc.PropertyNode("x",new P.IdentifierNode("number")),new rc.PropertyNode("y",new P.IdentifierNode("number"))]),Timestamp:new Fo.ColumnTypeNode(new P.IdentifierNode("Date"),new br.UnionExpressionNode([new P.IdentifierNode("Date"),new P.IdentifierNode("string")]),new br.UnionExpressionNode([new P.IdentifierNode("Date"),new P.IdentifierNode("string")]))},this.imports={IPostgresInterval:new PH.ModuleReferenceNode("postgres-interval")},this.scalars={bit:new P.IdentifierNode("string"),bool:new P.IdentifierNode("boolean"),box:new P.IdentifierNode("string"),bpchar:new P.IdentifierNode("string"),bytea:new P.IdentifierNode("Buffer"),cidr:new P.IdentifierNode("string"),circle:new P.IdentifierNode("Circle"),date:new P.IdentifierNode("Timestamp"),float4:new P.IdentifierNode("number"),float8:new P.IdentifierNode("number"),inet:new P.IdentifierNode("string"),int2:new P.IdentifierNode("number"),int4:new P.IdentifierNode("number"),int8:new P.IdentifierNode("Int8"),interval:new P.IdentifierNode("Interval"),json:new P.IdentifierNode("Json"),jsonb:new P.IdentifierNode("Json"),line:new P.IdentifierNode("string"),lseg:new P.IdentifierNode("string"),macaddr:new P.IdentifierNode("string"),money:new P.IdentifierNode("string"),numeric:new P.IdentifierNode("Numeric"),oid:new P.IdentifierNode("number"),path:new P.IdentifierNode("string"),point:new P.IdentifierNode("Point"),polygon:new P.IdentifierNode("string"),text:new P.IdentifierNode("string"),time:new P.IdentifierNode("string"),timestamp:new P.IdentifierNode("Timestamp"),timestamptz:new P.IdentifierNode("Timestamp"),tsquery:new P.IdentifierNode("string"),tsvector:new P.IdentifierNode("string"),txid_snapshot:new P.IdentifierNode("string"),uuid:new P.IdentifierNode("string"),varbit:new P.IdentifierNode("string"),varchar:new P.IdentifierNode("string"),xml:new P.IdentifierNode("string")},e?.dateParser===CH.DateParser.STRING?this.scalars.date=new P.IdentifierNode("string"):this.scalars.date=new P.IdentifierNode("Timestamp"),e?.numericParser===XP.NumericParser.NUMBER?this.definitions.Numeric=new Fo.ColumnTypeNode(new P.IdentifierNode("number"),new br.UnionExpressionNode([new P.IdentifierNode("number"),new P.IdentifierNode("string")]),new br.UnionExpressionNode([new P.IdentifierNode("number"),new P.IdentifierNode("string")])):e?.numericParser===XP.NumericParser.NUMBER_OR_STRING&&(this.definitions.Numeric=new Fo.ColumnTypeNode(new br.UnionExpressionNode([new P.IdentifierNode("number"),new P.IdentifierNode("string")])))}};Ly.PostgresAdapter=eS});var iS=d(By=>{"use strict";o();s();Object.defineProperty(By,"__esModule",{value:!0});By.PostgresDialect=void 0;var jH=X0(),DH=tS(),rS=class extends jH.PostgresIntrospectorDialect{constructor(e){super(e),this.adapter=new DH.PostgresAdapter({dateParser:this.options.dateParser,numericParser:this.options.numericParser})}};By.PostgresDialect=rS});var sS=d(ky=>{"use strict";o();s();Object.defineProperty(ky,"__esModule",{value:!0});ky.SqliteDialect=void 0;var MH=Vu(),WH=jo(),nS=class extends MH.SqliteIntrospectorDialect{constructor(){super(...arguments),this.adapter=new WH.SqliteAdapter}};ky.SqliteDialect=nS});var aS=d(Uy=>{"use strict";o();s();Object.defineProperty(Uy,"__esModule",{value:!0});Uy.WorkerBunSqliteDialect=void 0;var LH=Vu(),BH=jo(),oS=class extends LH.SqliteIntrospectorDialect{constructor(){super(...arguments),this.adapter=new BH.SqliteAdapter}};Uy.WorkerBunSqliteDialect=oS});var cS=d(ln=>{"use strict";o();s();var kH=ln&&ln.__classPrivateFieldSet||function(t,e,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(t,r):n?n.value=r:e.set(t,r),r},UH=ln&&ln.__classPrivateFieldGet||function(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)},Fy;Object.defineProperty(ln,"__esModule",{value:!0});ln.DialectManager=void 0;var FH=i0(),zH=d0(),QH=jP(),$H=$0(),VH=iS(),GH=sS(),JH=aS(),uS=class{constructor(e){Fy.set(this,void 0),kH(this,Fy,e,"f")}getDialect(e){switch(e){case"kysely-bun-sqlite":return new FH.KyselyBunSqliteDialect;case"libsql":return new zH.LibsqlDialect;case"mssql":return new QH.MssqlDialect;case"mysql":return new $H.MysqlDialect;case"postgres":return new VH.PostgresDialect(UH(this,Fy,"f"));case"bun-sqlite":case"worker-bun-sqlite":return new JH.WorkerBunSqliteDialect;default:return new GH.SqliteDialect}}};ln.DialectManager=uS;Fy=new WeakMap});var dS=d(zy=>{"use strict";o();s();Object.defineProperty(zy,"__esModule",{value:!0});zy.AliasDeclarationNode=void 0;var HH=Be(),lS=class{constructor(e,r){this.type=HH.NodeType.ALIAS_DECLARATION,this.name=e,this.body=r}};zy.AliasDeclarationNode=lS});var hS=d(Qy=>{"use strict";o();s();Object.defineProperty(Qy,"__esModule",{value:!0});Qy.ExportStatementNode=void 0;var KH=Be(),pS=class{constructor(e){this.type=KH.NodeType.EXPORT_STATEMENT,this.argument=e}};Qy.ExportStatementNode=pS});var mS=d($y=>{"use strict";o();s();Object.defineProperty($y,"__esModule",{value:!0});$y.ImportClauseNode=void 0;var YH=Be(),fS=class{constructor(e,r=null){this.type=YH.NodeType.IMPORT_CLAUSE,this.name=e,this.alias=r}};$y.ImportClauseNode=fS});var NS=d(Vy=>{"use strict";o();s();Object.defineProperty(Vy,"__esModule",{value:!0});Vy.ImportStatementNode=void 0;var XH=Be(),yS=class{constructor(e,r){this.type=XH.NodeType.IMPORT_STATEMENT,this.moduleName=e,this.imports=r}};Vy.ImportStatementNode=yS});var wS=d(Gy=>{"use strict";o();s();Object.defineProperty(Gy,"__esModule",{value:!0});Gy.InterfaceDeclarationNode=void 0;var ZH=Be(),_S=class{constructor(e,r){this.type=ZH.NodeType.INTERFACE_DECLARATION,this.name=e,this.body=r}};Gy.InterfaceDeclarationNode=_S});var Hy=d(Jy=>{"use strict";o();s();Object.defineProperty(Jy,"__esModule",{value:!0});Jy.LiteralNode=void 0;var eK=Be(),gS=class{constructor(e){this.type=eK.NodeType.LITERAL,this.value=e}};Jy.LiteralNode=gS});var OS=d(Ky=>{"use strict";o();s();Object.defineProperty(Ky,"__esModule",{value:!0});Ky.RawExpressionNode=void 0;var tK=Be(),bS=class{constructor(e){this.type=tK.NodeType.RAW_EXPRESSION,this.expression=e}};Ky.RawExpressionNode=bS});var nc=d(qt=>{"use strict";o();s();Object.defineProperty(qt,"__esModule",{value:!0});qt.toWords=qt.toScreamingSnakeCase=qt.toPascalCase=qt.toKyselyPascalCase=qt.toKyselyCamelCase=void 0;var rK=on(),ES=class extends rK.CamelCasePlugin{toCamelCase(e){return this.camelCase(e)}},ej=t=>`${t.slice(0,1).toUpperCase()}${t.slice(1)}`,iK=t=>new ES().toCamelCase(t);qt.toKyselyCamelCase=iK;var nK=t=>ej((0,qt.toKyselyCamelCase)(t));qt.toKyselyPascalCase=nK;var sK=t=>(0,qt.toWords)(t).map(e=>ej(e.toLowerCase())).join("");qt.toPascalCase=sK;var oK=t=>(0,qt.toWords)(t).map((e,r)=>`${r?"_":""}${e.toUpperCase()}`).join("");qt.toScreamingSnakeCase=oK;var aK=t=>t.match(/(?:\p{Lu}(?!\p{Ll}))+|\p{L}\p{Ll}*|\d+/gu)?.slice()??[];qt.toWords=aK});var Xy=d(Yy=>{"use strict";o();s();Object.defineProperty(Yy,"__esModule",{value:!0});Yy.IdentifierStyle=void 0;var tj;(function(t){t[t.KYSELY_PASCAL_CASE=0]="KYSELY_PASCAL_CASE",t[t.SCREAMING_SNAKE_CASE=1]="SCREAMING_SNAKE_CASE"})(tj||(Yy.IdentifierStyle=tj={}))});var Zy=d(zo=>{"use strict";o();s();Object.defineProperty(zo,"__esModule",{value:!0});zo.SymbolCollection=zo.SymbolType=void 0;var rj=nc(),ij=Xy(),nj;(function(t){t.DEFINITION="Definition",t.MODULE_REFERENCE="ModuleReference",t.RUNTIME_ENUM_DEFINITION="RuntimeEnumDefinition",t.RUNTIME_ENUM_MEMBER="RuntimeEnumMember",t.TABLE="Table"})(nj||(zo.SymbolType=nj={}));var SS=class{constructor(e){this.symbolNames={},this.symbols={},this.identifierStyle=e?.identifierStyle??ij.IdentifierStyle.KYSELY_PASCAL_CASE;let r=e?.entries?.sort(([i],[n])=>i.localeCompare(n))??[];for(let[i,n]of r)this.set(i,n)}entries(){return Object.entries(this.symbols).sort(([e],[r])=>e.localeCompare(r)).map(([e,r])=>({id:e,name:this.symbolNames[e],symbol:r}))}get(e){return this.symbols[e]}getName(e){return this.symbolNames[e]}has(e){return this.symbols[e]!==void 0}set(e,r){let i=this.symbolNames[e];if(i)return i;let n=new Set(Object.values(this.symbolNames));if(i=(this.identifierStyle===ij.IdentifierStyle.SCREAMING_SNAKE_CASE?rj.toScreamingSnakeCase:rj.toKyselyPascalCase)(e.replaceAll(/[^\w$]/g,"_")),n.has(i)){let u=2;for(;n.has(`${i}${u}`);)u++;i+=u}return/^\d/.test(i)&&(i=`_${i}`),this.symbols[e]=r,this.symbolNames[e]=i,i}};zo.SymbolCollection=SS});var qS=d(eN=>{"use strict";o();s();Object.defineProperty(eN,"__esModule",{value:!0});eN.RuntimeEnumDeclarationNode=void 0;var vS=Zy(),uK=Hy(),cK=Be(),IS=class{constructor(e,r,i){this.type=cK.NodeType.RUNTIME_ENUM_DECLARATION,this.members=[],this.name=e;let n=new vS.SymbolCollection({entries:r.map(a=>[a,{node:new uK.LiteralNode(a),type:vS.SymbolType.RUNTIME_ENUM_MEMBER}]),identifierStyle:i?.identifierStyle});for(let{id:a,symbol:u}of n.entries())u.type===vS.SymbolType.RUNTIME_ENUM_MEMBER&&this.members.push([a,u.node])}};eN.RuntimeEnumDeclarationNode=IS});var Qo=d(tN=>{"use strict";o();s();Object.defineProperty(tN,"__esModule",{value:!0});tN.RuntimeEnumsStyle=void 0;var sj;(function(t){t.PASCAL_CASE="pascal-case",t.SCREAMING_SNAKE_CASE="screaming-snake-case"})(sj||(tN.RuntimeEnumsStyle=sj={}))});var xS=d(rN=>{"use strict";o();s();Object.defineProperty(rN,"__esModule",{value:!0});rN.GLOBAL_IMPORTS=void 0;var oj=Wy();rN.GLOBAL_IMPORTS={ColumnType:new oj.ModuleReferenceNode("kysely"),JSONColumnType:new oj.ModuleReferenceNode("kysely")}});var CS=d(nN=>{"use strict";o();s();Object.defineProperty(nN,"__esModule",{value:!0});nN.transform=void 0;var lK=dS(),dK=Gu(),iN=hS(),aj=Wo(),cs=gi(),pK=mS(),hK=NS(),lj=wS(),fK=Hy(),ar=Be(),dj=Hu(),pj=Ku(),mK=OS(),yK=qS(),NK=Lo(),_K=Qo(),wK=nc(),gK=Xu(),uj=Xy(),bK=xS(),Oi=Zy(),AS=(t,e)=>{let r=e.definitions[t];if(r){if(e.symbols.has(t))return;e.symbols.set(t,{node:r,type:Oi.SymbolType.DEFINITION}),ur(r,e);return}let i=e.imports[t];if(i){if(e.symbols.has(t))return;e.symbols.set(t,{node:i,type:Oi.SymbolType.MODULE_REFERENCE})}},ur=(t,e)=>{switch(t.type){case ar.NodeType.ARRAY_EXPRESSION:ur(t.values,e);break;case ar.NodeType.EXTENDS_CLAUSE:ur(t.extendsType,e),ur(t.trueType,e),ur(t.falseType,e);break;case ar.NodeType.GENERIC_EXPRESSION:{AS(t.name,e);for(let r of t.args)ur(r,e);break}case ar.NodeType.IDENTIFIER:AS(t.name,e);break;case ar.NodeType.INFER_CLAUSE:break;case ar.NodeType.LITERAL:break;case ar.NodeType.MAPPED_TYPE:ur(t.value,e);break;case ar.NodeType.OBJECT_EXPRESSION:for(let r of t.properties)ur(r.value,e);break;case ar.NodeType.RAW_EXPRESSION:AS(t.expression,e);break;case ar.NodeType.TEMPLATE:ur(t.expression,e);break;case ar.NodeType.UNION_EXPRESSION:for(let r of t.args)ur(r,e);break}},OK=t=>({camelCase:!!t.camelCase,defaultScalar:t.dialect.adapter.defaultScalar??new cs.IdentifierNode("unknown"),defaultSchemas:t.defaultSchemas&&t.defaultSchemas.length>0?t.defaultSchemas:t.dialect.adapter.defaultSchemas,definitions:{...gK.GLOBAL_DEFINITIONS,...t.dialect.adapter.definitions},enums:t.metadata.enums,imports:{...bK.GLOBAL_IMPORTS,...t.dialect.adapter.imports},metadata:t.metadata,overrides:t.overrides,runtimeEnums:!!t.runtimeEnums,runtimeEnumsStyle:t.runtimeEnumsStyle,scalars:{...t.dialect.adapter.scalars},symbols:new Oi.SymbolCollection}),EK=t=>{let e=[];for(let n of t.metadata.tables){let a=hj(n,t),u=t.symbols.getName(a);if(u){let l=new cs.IdentifierNode(u),h=new pj.PropertyNode(a,l);e.push(h)}}e.sort((n,a)=>n.key.localeCompare(a.key));let r=new dj.ObjectExpressionNode(e),i=new lj.InterfaceDeclarationNode("DB",r);return new iN.ExportStatementNode(i)},SK=t=>{let e=[];for(let{symbol:r}of t.symbols.entries()){if(r.type!==Oi.SymbolType.RUNTIME_ENUM_DEFINITION)continue;let i=new iN.ExportStatementNode(r.node);e.push(i)}return e.sort((r,i)=>r.argument.name.localeCompare(i.argument.name))},vK=t=>{let e=[];for(let{name:r,symbol:i}of t.symbols.entries()){if(i.type!==Oi.SymbolType.DEFINITION)continue;let n=new lK.AliasDeclarationNode(r,i.node),a=new iN.ExportStatementNode(n);e.push(a)}return e.sort((r,i)=>r.argument.name.localeCompare(i.argument.name))},IK=t=>{var e;let r={},i=[];for(let{id:n,name:a,symbol:u}of t.symbols.entries())u.type===Oi.SymbolType.MODULE_REFERENCE&&(r[e=u.node.name]??(r[e]=[])).push(new pK.ImportClauseNode(n,a===n?null:a));for(let[n,a]of Object.entries(r))i.push(new hK.ImportStatementNode(n,a));return i.sort((n,a)=>n.moduleName.localeCompare(a.moduleName))},hj=(t,e)=>{let r=t.schema&&e.defaultSchemas.length>0&&!e.defaultSchemas.includes(t.schema)?`${t.schema}.${t.name}`:t.name;return fj(r,e)},qK=(t,e,r)=>{let i=`${r}.${t.name}`,n=e.overrides?.columns?.[i];if(n!==void 0){let h=typeof n=="string"?new mK.RawExpressionNode(n):n;return ur(h,e),h}let a=xK(t,e);if(t.isArray){let h=TS(a);a=h.type===ar.NodeType.IDENTIFIER&&["boolean","number","string"].includes(h.name)?[new dK.ArrayExpressionNode(h)]:[new aj.GenericExpressionNode("ArrayType",[h])]}t.isNullable&&a.push(new cs.IdentifierNode("null"));let u=TS(a);return(t.hasDefaultValue||t.isAutoIncrementing)&&(u=new aj.GenericExpressionNode("Generated",[u])),ur(u,e),u},xK=(t,e)=>{let r=t.dataType.toLowerCase(),i=e.scalars[r];if(i)return[i];let n=`${t.dataTypeSchema??e.defaultSchemas}.${r}`,a=t.dataTypeSchema&&e.defaultSchemas.length>0&&!e.defaultSchemas.includes(t.dataTypeSchema)?`${t.dataTypeSchema}.${r}`:r,u=e.enums.get(n);if(u){if(e.runtimeEnums){let _={node:new yK.RuntimeEnumDeclarationNode(a,u,{identifierStyle:e.runtimeEnumsStyle===_K.RuntimeEnumsStyle.SCREAMING_SNAKE_CASE?uj.IdentifierStyle.SCREAMING_SNAKE_CASE:uj.IdentifierStyle.KYSELY_PASCAL_CASE}),type:Oi.SymbolType.RUNTIME_ENUM_DEFINITION};return _.node.name=e.symbols.set(a,_),[new cs.IdentifierNode(_.node.name)]}let h=e.symbols.set(a,{node:TS(cj(u)),type:Oi.SymbolType.DEFINITION});return[new cs.IdentifierNode(h)]}let l=e.symbols.getName(a);return l?[new cs.IdentifierNode(l??"unknown")]:t.enumValues?cj(t.enumValues):[e.defaultScalar]},cj=t=>t.map(e=>new fK.LiteralNode(e)),fj=(t,e)=>e.camelCase?(0,wK.toKyselyCamelCase)(t):t,AK=t=>{let e=[];for(let r of t.metadata.tables){let i=[];for(let h of r.columns){let y=fj(h.name,t),_=qK(h,t,r.name),b=h.comment,w=new pj.PropertyNode(y,_,b);i.push(w)}let n=new dj.ObjectExpressionNode(i),a=hj(r,t),u=t.symbols.set(a,{type:Oi.SymbolType.TABLE}),l=new iN.ExportStatementNode(new lj.InterfaceDeclarationNode(u,n));e.push(l)}return e.sort((r,i)=>r.argument.name.localeCompare(i.argument.name)),e},TS=t=>{switch(t.length){case 0:return new cs.IdentifierNode("never");case 1:return t[0];default:return new NK.UnionExpressionNode(t)}},TK=t=>{let e=OK(t),r=AK(e),i=IK(e),n=SK(e),a=vK(e),u=EK(e);return[...i,...n,...a,...r,u]};nN.transform=TK});var mj={};RD(mj,{default:()=>CK});var CK,yj=Kt(()=>{o();s();CK=null});var jS=d(dn=>{"use strict";o();s();var Nj=dn&&dn.__classPrivateFieldGet||function(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)},RK=dn&&dn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},sN,RS;Object.defineProperty(dn,"__esModule",{value:!0});dn.DiffChecker=void 0;var PK=RK((yj(),jD(mj))),PS=class{constructor(){sN.add(this)}diff(e,r){return(0,PK.default)(Nj(this,sN,"m",RS).call(this,e),Nj(this,sN,"m",RS).call(this,r))}};dn.DiffChecker=PS;sN=new WeakSet,RS=function(e){return`${e.trim()}
`}});var _j=d((DS,MS)=>{o();s();(function(t,e){typeof Ht=="function"&&typeof DS=="object"&&typeof MS=="object"?MS.exports=e():typeof define=="function"&&define.amd?define(function(){return e()}):t.pluralize=e()})(DS,function(){var t=[],e=[],r={},i={},n={};function a(E){return typeof E=="string"?new RegExp("^"+E+"$","i"):E}function u(E,v){return E===v?v:E===E.toLowerCase()?v.toLowerCase():E===E.toUpperCase()?v.toUpperCase():E[0]===E[0].toUpperCase()?v.charAt(0).toUpperCase()+v.substr(1).toLowerCase():v.toLowerCase()}function l(E,v){return E.replace(/\$(\d{1,2})/g,function(A,V){return v[V]||""})}function h(E,v){return E.replace(v[0],function(A,V){var z=l(v[1],arguments);return u(A===""?E[V-1]:A,z)})}function y(E,v,A){if(!E.length||r.hasOwnProperty(E))return v;for(var V=A.length;V--;){var z=A[V];if(z[0].test(v))return h(v,z)}return v}function _(E,v,A){return function(V){var z=V.toLowerCase();return v.hasOwnProperty(z)?u(V,z):E.hasOwnProperty(z)?u(V,E[z]):y(z,V,A)}}function b(E,v,A,V){return function(z){var he=z.toLowerCase();return v.hasOwnProperty(he)?!0:E.hasOwnProperty(he)?!1:y(he,he,A)===he}}function w(E,v,A){var V=v===1?w.singular(E):w.plural(E);return(A?v+" ":"")+V}return w.plural=_(n,i,t),w.isPlural=b(n,i,t),w.singular=_(i,n,e),w.isSingular=b(i,n,e),w.addPluralRule=function(E,v){t.push([a(E),v])},w.addSingularRule=function(E,v){e.push([a(E),v])},w.addUncountableRule=function(E){if(typeof E=="string"){r[E.toLowerCase()]=!0;return}w.addPluralRule(E,"$0"),w.addSingularRule(E,"$0")},w.addIrregularRule=function(E,v){v=v.toLowerCase(),E=E.toLowerCase(),n[E]=v,i[v]=E},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(E){return w.addIrregularRule(E[0],E[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(E){return w.addPluralRule(E[0],E[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(E){return w.addSingularRule(E[0],E[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(w.addUncountableRule),w})});var LS=d(oN=>{"use strict";o();s();Object.defineProperty(oN,"__esModule",{value:!0});oN.Serializer=void 0;var wj=_j(),Fe=Be(),gj=nc(),jK=Qo(),DK=/^[$A-Z_a-z][\w$]*$/,WS=class{constructor(e={}){this.camelCase=e.camelCase??!1,this.runtimeEnumsStyle=e.runtimeEnumsStyle,this.singular=e.singular??!1,this.typeOnlyImports=e.typeOnlyImports??!0}serializeAliasDeclaration(e){let r=e.body.type===Fe.NodeType.TEMPLATE?e.body.expression:e.body,i="";if(i+="type ",i+=e.name,e.body.type===Fe.NodeType.TEMPLATE){i+="<";for(let n=0;n<e.body.params.length;n++)n>=1&&(i+=", "),i+=e.body.params[n];i+=">"}return i+=" = ",i+=this.serializeExpression(r),i+=";",i}serializeArrayExpression(e){let r=e.values.type===Fe.NodeType.INFER_CLAUSE||e.values.type===Fe.NodeType.UNION_EXPRESSION&&e.values.args.length>=2,i="";return r&&(i+="("),i+=this.serializeExpression(e.values),r&&(i+=")"),i+="[]",i}serializeExportStatement(e){let r="";switch(r+="export ",e.argument.type){case Fe.NodeType.ALIAS_DECLARATION:r+=this.serializeAliasDeclaration(e.argument);break;case Fe.NodeType.INTERFACE_DECLARATION:r+=this.serializeInterfaceDeclaration(e.argument);break;case Fe.NodeType.RUNTIME_ENUM_DECLARATION:r+=this.serializeRuntimeEnum(e.argument);break}return r}serializeExpression(e){switch(e.type){case Fe.NodeType.ARRAY_EXPRESSION:return this.serializeArrayExpression(e);case Fe.NodeType.EXTENDS_CLAUSE:return this.serializeExtendsClause(e);case Fe.NodeType.GENERIC_EXPRESSION:return this.serializeGenericExpression(e);case Fe.NodeType.IDENTIFIER:return this.serializeIdentifier(e);case Fe.NodeType.INFER_CLAUSE:return this.serializeInferClause(e);case Fe.NodeType.LITERAL:return this.serializeLiteral(e);case Fe.NodeType.MAPPED_TYPE:return this.serializeMappedType(e);case Fe.NodeType.OBJECT_EXPRESSION:return this.serializeObjectExpression(e);case Fe.NodeType.RAW_EXPRESSION:return this.serializeRawExpression(e);case Fe.NodeType.UNION_EXPRESSION:return this.serializeUnionExpression(e)}}serializeExtendsClause(e){let r="";return r+=this.serializeExpression(e.checkType),r+=" extends ",r+=this.serializeExpression(e.extendsType),r+=`
  ? `,r+=this.serializeExpression(e.trueType),r+=`
  : `,r+=this.serializeExpression(e.falseType),r}serializeFile(e){let r="";return r+=`/**
`,r+=` * This file was generated by kysely-codegen.
`,r+=` * Please do not edit it manually.
`,r+=` */

`,r+=this.serializeStatements(e),r}serializeGenericExpression(e){let r="";r+=e.name,r+="<";for(let i=0;i<e.args.length;i++)i>=1&&(r+=", "),r+=this.serializeExpression(e.args[i]);return r+=">",r}serializeIdentifier(e){return e.name.length<=1?e.name:this.singular?(0,wj.singular)(e.name):e.name}serializeImportClause(e){let r="";return r+=e.name,e.alias&&(r+=" as ",r+=e.alias),r}serializeImportStatement(e){let r="",i=0;r+="import ",this.typeOnlyImports&&(r+="type "),r+="{";for(let n of e.imports)i>=1&&(r+=","),r+=" ",r+=this.serializeImportClause(n),i++;return r+=" } from ",r+=JSON.stringify(e.moduleName),r+=";",r}serializeInferClause(e){let r="";return r+="infer ",r+=e.name,r}serializeInterfaceDeclaration(e){let r="";return r+="interface ",r+=this.singular?(0,wj.singular)(e.name):e.name,r+=" ",r+=this.serializeObjectExpression(e.body),r}serializeLiteral(e){return JSON.stringify(e.value)}serializeKey(e){return DK.test(e)?e:JSON.stringify(e)}serializeMappedType(e){let r="";return r+=`{
  [x: string]: `,r+=this.serializeExpression(e.value),r+=` | undefined;
}`,r}serializeObjectExpression(e){let r="";if(r+="{",e.properties.length>0){r+=`
`;let i=[...e.properties].sort((n,a)=>n.key.localeCompare(a.key));for(let n of i)r+="  ",r+=this.serializeProperty(n)}return r+="}",r}serializeProperty(e){let r="";if(e.comment){r+=`/**
`;for(let i of e.comment.split(/\r?\n/))r+=`   *${i?` ${i}`:""}
`;r+=`   */
  `}return r+=this.serializeKey(e.key),r+=": ",r+=this.serializeExpression(e.value),r+=`;
`,r}serializeRawExpression(e){return e.expression}serializeRuntimeEnum(e){let r="enum ";r+=e.name,r+=` {
`;let i=[...e.members].sort(([n],[a])=>n.localeCompare(a));for(let n of i)r+="  ",this.runtimeEnumsStyle===jK.RuntimeEnumsStyle.PASCAL_CASE?r+=(0,gj.toPascalCase)(n[0]):r+=(0,gj.toScreamingSnakeCase)(n[0]),r+=" = ",r+=this.serializeLiteral(n[1]),r+=",",r+=`
`;return r+="}",r}serializeStatements(e){let r="",i=0;for(let n of e){switch(i>=1&&(r+=`
`,n.type!==Fe.NodeType.IMPORT_STATEMENT&&(r+=`
`)),n.type){case Fe.NodeType.EXPORT_STATEMENT:r+=this.serializeExportStatement(n);break;case Fe.NodeType.IMPORT_STATEMENT:r+=this.serializeImportStatement(n);break}i++}return r+=`
`,r}serializeUnionExpression(e){let r="",i=0,n=[...e.args].sort((a,u)=>a.type!==Fe.NodeType.IDENTIFIER||u.type!==Fe.NodeType.IDENTIFIER?0:a.name===void 0||a.name==="undefined"?1:u.name===void 0||u.name==="undefined"?-1:a.name===null||a.name==="null"?1:u.name===null||u.name==="null"||a.name<u.name?-1:a.name>u.name?1:0);for(let a of n)i>=1&&(r+=" | "),r+=this.serializeExpression(a),i++;return r}};oN.Serializer=WS});var FS=d(aN=>{"use strict";o();s();Object.defineProperty(aN,"__esModule",{value:!0});aN.generate=void 0;var BS=O_(),kS=An(),US=__(),MK=CS(),WK=jS(),LK=LS(),BK=async t=>{let e=US.performance.now();t.logger?.info("Introspecting database...");let r=await t.dialect.introspector.introspect({db:t.db,excludePattern:t.excludePattern,includePattern:t.includePattern,partitions:!!t.partitions});t.logger?.debug(),t.logger?.debug(`Found ${r.tables.length} public tables:`);for(let l of r.tables)t.logger?.debug(` - ${l.name}`);t.logger?.debug();let i=(0,MK.transform)({camelCase:!!t.camelCase,defaultSchemas:t.schemas,dialect:t.dialect,metadata:r,overrides:t.overrides,runtimeEnums:!!t.runtimeEnums,runtimeEnumsStyle:t.runtimeEnumsStyle}),a=(t.serializer??new LK.Serializer({camelCase:t.camelCase,runtimeEnumsStyle:t.runtimeEnumsStyle,singular:t.singular,typeOnlyImports:t.typeOnlyImports})).serializeFile(i),u=t.outFile?`.${kS.sep}${(0,kS.relative)(process.cwd(),t.outFile)}`:null;if(t.print)console.info(),console.info(a);else if(u)if(t.verify){let l;try{l=await BS.promises.readFile(u,"utf8")}catch(w){throw t.logger?.error(w),new Error("Failed to load existing types")}let y=new WK.DiffChecker().diff(a,l);if(y)throw t.logger?.error(y),new Error("Generated types are not up-to-date! Use '--log-level=error' option to view the diff.");let _=US.performance.now(),b=Math.round(_-e);t.logger?.success(`Generated types are up-to-date! (${b}ms)`)}else{let l=(0,kS.parse)(u).dir;await BS.promises.mkdir(l,{recursive:!0}),await BS.promises.writeFile(u,a);let h=US.performance.now(),y=Math.round(h-e),_=r.tables.length,b=_===1?"":"s";t.logger?.success(`Introspected ${_} table${b} and generated ${u} in ${y}ms.
`)}return a};aN.generate=BK});var sc=d(uN=>{"use strict";o();s();Object.defineProperty(uN,"__esModule",{value:!0});uN.LogLevel=void 0;var bj;(function(t){t[t.SILENT=0]="SILENT",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t[t.DEBUG=4]="DEBUG"})(bj||(uN.LogLevel=bj={}))});var Ej=d((Ike,Oj)=>{"use strict";o();s();Oj.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var zS=d((Ake,vj)=>{o();s();var oc=Ej(),Sj={};for(let t of Object.keys(oc))Sj[oc[t]]=t;var B={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};vj.exports=B;for(let t of Object.keys(B)){if(!("channels"in B[t]))throw new Error("missing channels property: "+t);if(!("labels"in B[t]))throw new Error("missing channel labels property: "+t);if(B[t].labels.length!==B[t].channels)throw new Error("channel and label counts mismatch: "+t);let{channels:e,labels:r}=B[t];delete B[t].channels,delete B[t].labels,Object.defineProperty(B[t],"channels",{value:e}),Object.defineProperty(B[t],"labels",{value:r})}B.rgb.hsl=function(t){let e=t[0]/255,r=t[1]/255,i=t[2]/255,n=Math.min(e,r,i),a=Math.max(e,r,i),u=a-n,l,h;a===n?l=0:e===a?l=(r-i)/u:r===a?l=2+(i-e)/u:i===a&&(l=4+(e-r)/u),l=Math.min(l*60,360),l<0&&(l+=360);let y=(n+a)/2;return a===n?h=0:y<=.5?h=u/(a+n):h=u/(2-a-n),[l,h*100,y*100]};B.rgb.hsv=function(t){let e,r,i,n,a,u=t[0]/255,l=t[1]/255,h=t[2]/255,y=Math.max(u,l,h),_=y-Math.min(u,l,h),b=function(w){return(y-w)/6/_+1/2};return _===0?(n=0,a=0):(a=_/y,e=b(u),r=b(l),i=b(h),u===y?n=i-r:l===y?n=1/3+e-i:h===y&&(n=2/3+r-e),n<0?n+=1:n>1&&(n-=1)),[n*360,a*100,y*100]};B.rgb.hwb=function(t){let e=t[0],r=t[1],i=t[2],n=B.rgb.hsl(t)[0],a=1/255*Math.min(e,Math.min(r,i));return i=1-1/255*Math.max(e,Math.max(r,i)),[n,a*100,i*100]};B.rgb.cmyk=function(t){let e=t[0]/255,r=t[1]/255,i=t[2]/255,n=Math.min(1-e,1-r,1-i),a=(1-e-n)/(1-n)||0,u=(1-r-n)/(1-n)||0,l=(1-i-n)/(1-n)||0;return[a*100,u*100,l*100,n*100]};function kK(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}B.rgb.keyword=function(t){let e=Sj[t];if(e)return e;let r=1/0,i;for(let n of Object.keys(oc)){let a=oc[n],u=kK(t,a);u<r&&(r=u,i=n)}return i};B.keyword.rgb=function(t){return oc[t]};B.rgb.xyz=function(t){let e=t[0]/255,r=t[1]/255,i=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;let n=e*.4124+r*.3576+i*.1805,a=e*.2126+r*.7152+i*.0722,u=e*.0193+r*.1192+i*.9505;return[n*100,a*100,u*100]};B.rgb.lab=function(t){let e=B.rgb.xyz(t),r=e[0],i=e[1],n=e[2];r/=95.047,i/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let a=116*i-16,u=500*(r-i),l=200*(i-n);return[a,u,l]};B.hsl.rgb=function(t){let e=t[0]/360,r=t[1]/100,i=t[2]/100,n,a,u;if(r===0)return u=i*255,[u,u,u];i<.5?n=i*(1+r):n=i+r-i*r;let l=2*i-n,h=[0,0,0];for(let y=0;y<3;y++)a=e+1/3*-(y-1),a<0&&a++,a>1&&a--,6*a<1?u=l+(n-l)*6*a:2*a<1?u=n:3*a<2?u=l+(n-l)*(2/3-a)*6:u=l,h[y]=u*255;return h};B.hsl.hsv=function(t){let e=t[0],r=t[1]/100,i=t[2]/100,n=r,a=Math.max(i,.01);i*=2,r*=i<=1?i:2-i,n*=a<=1?a:2-a;let u=(i+r)/2,l=i===0?2*n/(a+n):2*r/(i+r);return[e,l*100,u*100]};B.hsv.rgb=function(t){let e=t[0]/60,r=t[1]/100,i=t[2]/100,n=Math.floor(e)%6,a=e-Math.floor(e),u=255*i*(1-r),l=255*i*(1-r*a),h=255*i*(1-r*(1-a));switch(i*=255,n){case 0:return[i,h,u];case 1:return[l,i,u];case 2:return[u,i,h];case 3:return[u,l,i];case 4:return[h,u,i];case 5:return[i,u,l]}};B.hsv.hsl=function(t){let e=t[0],r=t[1]/100,i=t[2]/100,n=Math.max(i,.01),a,u;u=(2-r)*i;let l=(2-r)*n;return a=r*n,a/=l<=1?l:2-l,a=a||0,u/=2,[e,a*100,u*100]};B.hwb.rgb=function(t){let e=t[0]/360,r=t[1]/100,i=t[2]/100,n=r+i,a;n>1&&(r/=n,i/=n);let u=Math.floor(6*e),l=1-i;a=6*e-u,(u&1)!==0&&(a=1-a);let h=r+a*(l-r),y,_,b;switch(u){default:case 6:case 0:y=l,_=h,b=r;break;case 1:y=h,_=l,b=r;break;case 2:y=r,_=l,b=h;break;case 3:y=r,_=h,b=l;break;case 4:y=h,_=r,b=l;break;case 5:y=l,_=r,b=h;break}return[y*255,_*255,b*255]};B.cmyk.rgb=function(t){let e=t[0]/100,r=t[1]/100,i=t[2]/100,n=t[3]/100,a=1-Math.min(1,e*(1-n)+n),u=1-Math.min(1,r*(1-n)+n),l=1-Math.min(1,i*(1-n)+n);return[a*255,u*255,l*255]};B.xyz.rgb=function(t){let e=t[0]/100,r=t[1]/100,i=t[2]/100,n,a,u;return n=e*3.2406+r*-1.5372+i*-.4986,a=e*-.9689+r*1.8758+i*.0415,u=e*.0557+r*-.204+i*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,u=u>.0031308?1.055*u**(1/2.4)-.055:u*12.92,n=Math.min(Math.max(0,n),1),a=Math.min(Math.max(0,a),1),u=Math.min(Math.max(0,u),1),[n*255,a*255,u*255]};B.xyz.lab=function(t){let e=t[0],r=t[1],i=t[2];e/=95.047,r/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let n=116*r-16,a=500*(e-r),u=200*(r-i);return[n,a,u]};B.lab.xyz=function(t){let e=t[0],r=t[1],i=t[2],n,a,u;a=(e+16)/116,n=r/500+a,u=a-i/200;let l=a**3,h=n**3,y=u**3;return a=l>.008856?l:(a-16/116)/7.787,n=h>.008856?h:(n-16/116)/7.787,u=y>.008856?y:(u-16/116)/7.787,n*=95.047,a*=100,u*=108.883,[n,a,u]};B.lab.lch=function(t){let e=t[0],r=t[1],i=t[2],n;n=Math.atan2(i,r)*360/2/Math.PI,n<0&&(n+=360);let u=Math.sqrt(r*r+i*i);return[e,u,n]};B.lch.lab=function(t){let e=t[0],r=t[1],n=t[2]/360*2*Math.PI,a=r*Math.cos(n),u=r*Math.sin(n);return[e,a,u]};B.rgb.ansi16=function(t,e=null){let[r,i,n]=t,a=e===null?B.rgb.hsv(t)[2]:e;if(a=Math.round(a/50),a===0)return 30;let u=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(r/255));return a===2&&(u+=60),u};B.hsv.ansi16=function(t){return B.rgb.ansi16(B.hsv.rgb(t),t[2])};B.rgb.ansi256=function(t){let e=t[0],r=t[1],i=t[2];return e===r&&r===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(i/255*5)};B.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let r=(~~(t>50)+1)*.5,i=(e&1)*r*255,n=(e>>1&1)*r*255,a=(e>>2&1)*r*255;return[i,n,a]};B.ansi256.rgb=function(t){if(t>=232){let a=(t-232)*10+8;return[a,a,a]}t-=16;let e,r=Math.floor(t/36)/5*255,i=Math.floor((e=t%36)/6)/5*255,n=e%6/5*255;return[r,i,n]};B.rgb.hex=function(t){let r=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};B.hex.rgb=function(t){let e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let r=e[0];e[0].length===3&&(r=r.split("").map(l=>l+l).join(""));let i=parseInt(r,16),n=i>>16&255,a=i>>8&255,u=i&255;return[n,a,u]};B.rgb.hcg=function(t){let e=t[0]/255,r=t[1]/255,i=t[2]/255,n=Math.max(Math.max(e,r),i),a=Math.min(Math.min(e,r),i),u=n-a,l,h;return u<1?l=a/(1-u):l=0,u<=0?h=0:n===e?h=(r-i)/u%6:n===r?h=2+(i-e)/u:h=4+(e-r)/u,h/=6,h%=1,[h*360,u*100,l*100]};B.hsl.hcg=function(t){let e=t[1]/100,r=t[2]/100,i=r<.5?2*e*r:2*e*(1-r),n=0;return i<1&&(n=(r-.5*i)/(1-i)),[t[0],i*100,n*100]};B.hsv.hcg=function(t){let e=t[1]/100,r=t[2]/100,i=e*r,n=0;return i<1&&(n=(r-i)/(1-i)),[t[0],i*100,n*100]};B.hcg.rgb=function(t){let e=t[0]/360,r=t[1]/100,i=t[2]/100;if(r===0)return[i*255,i*255,i*255];let n=[0,0,0],a=e%1*6,u=a%1,l=1-u,h=0;switch(Math.floor(a)){case 0:n[0]=1,n[1]=u,n[2]=0;break;case 1:n[0]=l,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=u;break;case 3:n[0]=0,n[1]=l,n[2]=1;break;case 4:n[0]=u,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=l}return h=(1-r)*i,[(r*n[0]+h)*255,(r*n[1]+h)*255,(r*n[2]+h)*255]};B.hcg.hsv=function(t){let e=t[1]/100,r=t[2]/100,i=e+r*(1-e),n=0;return i>0&&(n=e/i),[t[0],n*100,i*100]};B.hcg.hsl=function(t){let e=t[1]/100,i=t[2]/100*(1-e)+.5*e,n=0;return i>0&&i<.5?n=e/(2*i):i>=.5&&i<1&&(n=e/(2*(1-i))),[t[0],n*100,i*100]};B.hcg.hwb=function(t){let e=t[1]/100,r=t[2]/100,i=e+r*(1-e);return[t[0],(i-e)*100,(1-i)*100]};B.hwb.hcg=function(t){let e=t[1]/100,i=1-t[2]/100,n=i-e,a=0;return n<1&&(a=(i-n)/(1-n)),[t[0],n*100,a*100]};B.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};B.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};B.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};B.gray.hsl=function(t){return[0,0,t[0]]};B.gray.hsv=B.gray.hsl;B.gray.hwb=function(t){return[0,100,t[0]]};B.gray.cmyk=function(t){return[0,0,0,t[0]]};B.gray.lab=function(t){return[t[0],0,0]};B.gray.hex=function(t){let e=Math.round(t[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i};B.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}});var qj=d((Rke,Ij)=>{o();s();var cN=zS();function UK(){let t={},e=Object.keys(cN);for(let r=e.length,i=0;i<r;i++)t[e[i]]={distance:-1,parent:null};return t}function FK(t){let e=UK(),r=[t];for(e[t].distance=0;r.length;){let i=r.pop(),n=Object.keys(cN[i]);for(let a=n.length,u=0;u<a;u++){let l=n[u],h=e[l];h.distance===-1&&(h.distance=e[i].distance+1,h.parent=i,r.unshift(l))}}return e}function zK(t,e){return function(r){return e(t(r))}}function QK(t,e){let r=[e[t].parent,t],i=cN[e[t].parent][t],n=e[t].parent;for(;e[n].parent;)r.unshift(e[n].parent),i=zK(cN[e[n].parent][n],i),n=e[n].parent;return i.conversion=r,i}Ij.exports=function(t){let e=FK(t),r={},i=Object.keys(e);for(let n=i.length,a=0;a<n;a++){let u=i[a];e[u].parent!==null&&(r[u]=QK(u,e))}return r}});var Aj=d((Dke,xj)=>{o();s();var QS=zS(),$K=qj(),$o={},VK=Object.keys(QS);function GK(t){let e=function(...r){let i=r[0];return i==null?i:(i.length>1&&(r=i),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function JK(t){let e=function(...r){let i=r[0];if(i==null)return i;i.length>1&&(r=i);let n=t(r);if(typeof n=="object")for(let a=n.length,u=0;u<a;u++)n[u]=Math.round(n[u]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}VK.forEach(t=>{$o[t]={},Object.defineProperty($o[t],"channels",{value:QS[t].channels}),Object.defineProperty($o[t],"labels",{value:QS[t].labels});let e=$K(t);Object.keys(e).forEach(i=>{let n=e[i];$o[t][i]=JK(n),$o[t][i].raw=GK(n)})});xj.exports=$o});var Dj=d((Lke,jj)=>{"use strict";o();s();var Tj=(t,e)=>(...r)=>`\x1B[${t(...r)+e}m`,Cj=(t,e)=>(...r)=>{let i=t(...r);return`\x1B[${38+e};5;${i}m`},Rj=(t,e)=>(...r)=>{let i=t(...r);return`\x1B[${38+e};2;${i[0]};${i[1]};${i[2]}m`},lN=t=>t,Pj=(t,e,r)=>[t,e,r],Vo=(t,e,r)=>{Object.defineProperty(t,e,{get:()=>{let i=r();return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0}),i},enumerable:!0,configurable:!0})},$S,Go=(t,e,r,i)=>{$S===void 0&&($S=Aj());let n=i?10:0,a={};for(let[u,l]of Object.entries($S)){let h=u==="ansi16"?"ansi":u;u===e?a[h]=t(r,n):typeof l=="object"&&(a[h]=t(l[e],n))}return a};function HK(){let t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[r,i]of Object.entries(e)){for(let[n,a]of Object.entries(i))e[n]={open:`\x1B[${a[0]}m`,close:`\x1B[${a[1]}m`},i[n]=e[n],t.set(a[0],a[1]);Object.defineProperty(e,r,{value:i,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",Vo(e.color,"ansi",()=>Go(Tj,"ansi16",lN,!1)),Vo(e.color,"ansi256",()=>Go(Cj,"ansi256",lN,!1)),Vo(e.color,"ansi16m",()=>Go(Rj,"rgb",Pj,!1)),Vo(e.bgColor,"ansi",()=>Go(Tj,"ansi16",lN,!0)),Vo(e.bgColor,"ansi256",()=>Go(Cj,"ansi256",lN,!0)),Vo(e.bgColor,"ansi16m",()=>Go(Rj,"rgb",Pj,!0)),e}Object.defineProperty(jj,"exports",{enumerable:!0,get:HK})});var Wj=d((Uke,Mj)=>{"use strict";o();s();Mj.exports={stdout:!1,stderr:!1}});var Bj=d((Qke,Lj)=>{"use strict";o();s();var KK=(t,e,r)=>{let i=t.indexOf(e);if(i===-1)return t;let n=e.length,a=0,u="";do u+=t.substr(a,i-a)+e+r,a=i+n,i=t.indexOf(e,a);while(i!==-1);return u+=t.substr(a),u},YK=(t,e,r,i)=>{let n=0,a="";do{let u=t[i-1]==="\r";a+=t.substr(n,(u?i-1:i)-n)+e+(u?`\r
`:`
`)+r,n=i+1,i=t.indexOf(`
`,n)}while(i!==-1);return a+=t.substr(n),a};Lj.exports={stringReplaceAll:KK,stringEncaseCRLFWithFirstIndex:YK}});var Qj=d((Gke,zj)=>{"use strict";o();s();var XK=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,kj=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,ZK=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,e8=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,t8=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function Fj(t){let e=t[0]==="u",r=t[1]==="{";return e&&!r&&t.length===5||t[0]==="x"&&t.length===3?String.fromCharCode(parseInt(t.slice(1),16)):e&&r?String.fromCodePoint(parseInt(t.slice(2,-1),16)):t8.get(t)||t}function r8(t,e){let r=[],i=e.trim().split(/\s*,\s*/g),n;for(let a of i){let u=Number(a);if(!Number.isNaN(u))r.push(u);else if(n=a.match(ZK))r.push(n[2].replace(e8,(l,h,y)=>h?Fj(h):y));else throw new Error(`Invalid Chalk template style argument: ${a} (in style '${t}')`)}return r}function i8(t){kj.lastIndex=0;let e=[],r;for(;(r=kj.exec(t))!==null;){let i=r[1];if(r[2]){let n=r8(i,r[2]);e.push([i].concat(n))}else e.push([i])}return e}function Uj(t,e){let r={};for(let n of e)for(let a of n.styles)r[a[0]]=n.inverse?null:a.slice(1);let i=t;for(let[n,a]of Object.entries(r))if(Array.isArray(a)){if(!(n in i))throw new Error(`Unknown Chalk style: ${n}`);i=a.length>0?i[n](...a):i[n]}return i}zj.exports=(t,e)=>{let r=[],i=[],n=[];if(e.replace(XK,(a,u,l,h,y,_)=>{if(u)n.push(Fj(u));else if(h){let b=n.join("");n=[],i.push(r.length===0?b:Uj(t,r)(b)),r.push({inverse:l,styles:i8(h)})}else if(y){if(r.length===0)throw new Error("Found extraneous } in Chalk template literal");i.push(Uj(t,r)(n.join(""))),n=[],r.pop()}else n.push(_)}),i.push(n.join("")),r.length>0){let a=`Chalk template literal is missing ${r.length} closing bracket${r.length===1?"":"s"} (\`}\`)`;throw new Error(a)}return i.join("")}});var Yj=d((Kke,Kj)=>{"use strict";o();s();var ac=Dj(),{stdout:GS,stderr:JS}=Wj(),{stringReplaceAll:n8,stringEncaseCRLFWithFirstIndex:s8}=Bj(),{isArray:dN}=Array,Vj=["ansi","ansi","ansi256","ansi16m"],Jo=Object.create(null),o8=(t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let r=GS?GS.level:0;t.level=e.level===void 0?r:e.level},HS=class{constructor(e){return Gj(e)}},Gj=t=>{let e={};return o8(e,t),e.template=(...r)=>Hj(e.template,...r),Object.setPrototypeOf(e,pN.prototype),Object.setPrototypeOf(e.template,e),e.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},e.template.Instance=HS,e.template};function pN(t){return Gj(t)}for(let[t,e]of Object.entries(ac))Jo[t]={get(){let r=hN(this,KS(e.open,e.close,this._styler),this._isEmpty);return Object.defineProperty(this,t,{value:r}),r}};Jo.visible={get(){let t=hN(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:t}),t}};var Jj=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(let t of Jj)Jo[t]={get(){let{level:e}=this;return function(...r){let i=KS(ac.color[Vj[e]][t](...r),ac.color.close,this._styler);return hN(this,i,this._isEmpty)}}};for(let t of Jj){let e="bg"+t[0].toUpperCase()+t.slice(1);Jo[e]={get(){let{level:r}=this;return function(...i){let n=KS(ac.bgColor[Vj[r]][t](...i),ac.bgColor.close,this._styler);return hN(this,n,this._isEmpty)}}}}var a8=Object.defineProperties(()=>{},{...Jo,level:{enumerable:!0,get(){return this._generator.level},set(t){this._generator.level=t}}}),KS=(t,e,r)=>{let i,n;return r===void 0?(i=t,n=e):(i=r.openAll+t,n=e+r.closeAll),{open:t,close:e,openAll:i,closeAll:n,parent:r}},hN=(t,e,r)=>{let i=(...n)=>dN(n[0])&&dN(n[0].raw)?$j(i,Hj(i,...n)):$j(i,n.length===1?""+n[0]:n.join(" "));return Object.setPrototypeOf(i,a8),i._generator=t,i._styler=e,i._isEmpty=r,i},$j=(t,e)=>{if(t.level<=0||!e)return t._isEmpty?"":e;let r=t._styler;if(r===void 0)return e;let{openAll:i,closeAll:n}=r;if(e.indexOf("\x1B")!==-1)for(;r!==void 0;)e=n8(e,r.close,r.open),r=r.parent;let a=e.indexOf(`
`);return a!==-1&&(e=s8(e,n,i,a)),i+e+n},VS,Hj=(t,...e)=>{let[r]=e;if(!dN(r)||!dN(r.raw))return e.join(" ");let i=e.slice(1),n=[r.raw[0]];for(let a=1;a<r.length;a++)n.push(String(i[a-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[a]));return VS===void 0&&(VS=Qj()),VS(t,n.join(""))};Object.defineProperties(pN.prototype,Jo);var fN=pN();fN.supportsColor=GS;fN.stderr=pN({level:JS?JS.level:0});fN.stderr.supportsColor=JS;Kj.exports=fN});var XS=d(pn=>{"use strict";o();s();var uc=pn&&pn.__classPrivateFieldGet||function(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)},u8=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},ds,Ho;Object.defineProperty(pn,"__esModule",{value:!0});pn.Logger=void 0;var cc=u8(Yj()),c8=Ym(),ls=sc(),YS=class{constructor(e=ls.LogLevel.INFO){ds.add(this),this.logLevel=e}debug(...e){this.logLevel>=ls.LogLevel.DEBUG&&console.debug(...e.map(r=>this.serializeDebug(r)))}error(...e){this.logLevel>=ls.LogLevel.ERROR&&console.error(...e.map(r=>this.serializeError(r)))}info(...e){this.logLevel>=ls.LogLevel.INFO&&console.info(...e.map(r=>this.serializeInfo(r)))}log(...e){this.logLevel>=ls.LogLevel.INFO&&console.log(...e)}serializeDebug(...e){return cc.default.gray(`  ${uc(this,ds,"m",Ho).call(this,e)}`)}serializeError(...e){return cc.default.red(`\u2717 ${uc(this,ds,"m",Ho).call(this,e)}`)}serializeInfo(...e){return cc.default.blue(`\u2022 ${uc(this,ds,"m",Ho).call(this,e)}`)}serializeSuccess(...e){return cc.default.green(`\u2713 ${uc(this,ds,"m",Ho).call(this,e)}`)}serializeWarn(...e){return cc.default.yellow(`\u26A0 ${uc(this,ds,"m",Ho).call(this,e)}`)}success(...e){this.logLevel>=ls.LogLevel.INFO&&console.log(...e.map(r=>this.serializeSuccess(r)))}warn(...e){this.logLevel>=ls.LogLevel.WARN&&console.warn(...e.map(r=>this.serializeWarn(r)))}};pn.Logger=YS;ds=new WeakSet,Ho=function(e){return e.map(r=>r instanceof Object?(0,c8.inspect)(r,{colors:!0}):r).join(" ")}});var mN=d(Wt=>{"use strict";o();s();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.VALID_DIALECTS=Wt.LOG_LEVEL_NAMES=Wt.DEFAULT_URL=Wt.DEFAULT_RUNTIME_ENUMS_STYLE=Wt.DEFAULT_LOG_LEVEL=Wt.DEFAULT_OUT_FILE=void 0;var l8=An(),d8=Qo(),p8=sc();Wt.DEFAULT_OUT_FILE=(0,l8.join)(process.cwd(),"node_modules","kysely-codegen","dist","db.d.ts");Wt.DEFAULT_LOG_LEVEL=p8.LogLevel.WARN;Wt.DEFAULT_RUNTIME_ENUMS_STYLE=d8.RuntimeEnumsStyle.PASCAL_CASE;Wt.DEFAULT_URL="env(DATABASE_URL)";Wt.LOG_LEVEL_NAMES=["debug","info","warn","error","silent"];Wt.VALID_DIALECTS=["postgres","mysql","sqlite","mssql","libsql","bun-sqlite","kysely-bun-sqlite","worker-bun-sqlite"]});var ZS=d(Ko=>{"use strict";o();s();Object.defineProperty(Ko,"__esModule",{value:!0});Ko.serializeFlags=Ko.FLAGS=void 0;var lc=mN();Ko.FLAGS=[{description:"Use the Kysely CamelCasePlugin.",longName:"camel-case"},{default:"timestamp",description:"Specify which parser to use for PostgreSQL date values.",longName:"date-parser",values:["string","timestamp"]},{description:"Set the SQL dialect.",longName:"dialect",values:lc.VALID_DIALECTS},{description:"Specify the path to an environment file to use.",longName:"env-file"},{description:"Exclude tables matching the specified glob pattern.",examples:["users","*.table","secrets.*","*._*"],longName:"exclude-pattern"},{description:"Print this message.",longName:"help",shortName:"h"},{description:"Only include tables matching the specified glob pattern.",examples:["users","*.table","secrets.*","*._*"],longName:"include-pattern"},{default:"warn",description:"Set the terminal log level.",longName:"log-level",values:lc.LOG_LEVEL_NAMES},{description:"Skip generating types for PostgreSQL domains.",longName:"no-domains"},{default:"string",description:"Specify which parser to use for PostgreSQL numeric values.",longName:"numeric-parser",values:["string","number","number-or-string"]},{default:lc.DEFAULT_OUT_FILE,description:"Set the file build path.",longName:"out-file"},{description:"Specify type overrides for specific table columns, in JSON format.",example:'{"columns":{"table_name.column_name":"{foo:\\"bar\\"}"}}',longName:"overrides"},{description:"Include partitions of PostgreSQL tables in the generated code.",longName:"partitions"},{description:"Print the generated output to the terminal instead of a file.",longName:"print"},{description:"Generate runtime enums instead of string unions for PostgreSQL enums.",longName:"runtime-enums"},{default:lc.DEFAULT_RUNTIME_ENUMS_STYLE,description:"Which naming convention to use for runtime enum keys. Only works with `--runtime-enums`.",longName:"runtime-enums-style",values:["pascal-case","screaming-snake-case"]},{description:"Set the default schema(s) for the database connection.",longName:"schema"},{description:"Singularize generated table names, e.g. `BlogPost` instead of `BlogPosts`.",longName:"singular"},{default:"true",description:"Generate code using the TypeScript 3.8+ `import type` syntax.",longName:"type-only-imports"},{default:lc.DEFAULT_URL,description:"Set the database connection string URL. This may point to an environment variable.",longName:"url"},{description:"Verify that the generated types are up-to-date.",longName:"verify"}];var h8=t=>{let e=[],r=t.sort((n,a)=>n.longName.localeCompare(a.longName)),i=0;for(let n of r){let a=`  --${n.longName}`;n.shortName&&(a+=`, -${n.shortName}`),a.length>i&&(i=a.length);let u=n.description,l=[...n.values?[`values: [${n.values.join(", ")}]`]:[],...n.default?[`default: ${n.default}`]:[],...n.example?[`example: ${n.example}`]:[],...n.examples?[`examples: ${n.examples.join(", ")}`]:[]];l.length>0&&(u+=` (${l.join(", ")})`),e.push({fullDescription:u,line:a})}return e.map(({fullDescription:n,line:a})=>{let u=" ".repeat(i-a.length+2);return`${a}${u}${n}`}).join(`
`)};Ko.serializeFlags=h8});var oD=d(hn=>{"use strict";o();s();var Ge=hn&&hn.__classPrivateFieldGet||function(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)},f8=hn&&hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},ze,Ei,eD,tD,rD,iD,ps,nD,sD;Object.defineProperty(hn,"__esModule",{value:!0});hn.Cli=void 0;var m8=f8(FI()),y8=j_(),N8=cS(),_8=FS(),Xj=Qo(),fs=sc(),Zj=XS(),yN=Zu(),dc=ec(),hs=mN(),ev=ZS(),tv=class{constructor(){ze.add(this),this.logLevel=hs.DEFAULT_LOG_LEVEL}async generate(e){let r=!!e.camelCase,i=e.excludePattern,n=e.includePattern,a=e.outFile,u=e.overrides,l=!!e.partitions,h=!!e.print,y=e.runtimeEnums,_=e.runtimeEnumsStyle,b=e.schemas,w=!!e.singular,E=e.typeOnlyImports,v=e.verify,A=new Zj.Logger(e.logLevel),V=new y8.ConnectionStringParser,{connectionString:z,inferredDialectName:he}=V.parse({connectionString:e.url??hs.DEFAULT_URL,dialectName:e.dialectName,envFile:e.envFile,logger:A});e.dialectName?A.info(`Using dialect '${e.dialectName}'.`):A.info(`No dialect specified. Assuming '${he}'.`);let U=new N8.DialectManager({dateParser:e.dateParser??yN.DEFAULT_DATE_PARSER,domains:!!e.domains,numericParser:e.numericParser??dc.DEFAULT_NUMERIC_PARSER,partitions:!!e.partitions}).getDialect(e.dialectName??he),X=await U.introspector.connect({connectionString:z,dialect:U});await(0,_8.generate)({camelCase:r,db:X,dialect:U,excludePattern:i,includePattern:n,logger:A,outFile:a,overrides:u,partitions:l,print:h,runtimeEnums:y,runtimeEnumsStyle:_,schemas:b,singular:w,typeOnlyImports:E,verify:v}),await X.destroy()}parseOptions(e,r){let i=(0,m8.default)(e),n=this.logLevel=Ge(this,ze,"m",tD).call(this,i["log-level"]),a=i._,u=Ge(this,ze,"m",Ei).call(this,i["camel-case"]),l=Ge(this,ze,"m",eD).call(this,i["date-parser"]),h=Ge(this,ze,"m",ps).call(this,i.dialect),y=Ge(this,ze,"m",Ei).call(this,i.domains),_=Ge(this,ze,"m",ps).call(this,i["env-file"]),b=Ge(this,ze,"m",ps).call(this,i["exclude-pattern"]),w=!!i.h||!!i.help||a.includes("-h")||a.includes("--help"),E=Ge(this,ze,"m",ps).call(this,i["include-pattern"]),v=Ge(this,ze,"m",rD).call(this,i["numeric-parser"]),A=Ge(this,ze,"m",ps).call(this,i["out-file"])??(i.print?void 0:hs.DEFAULT_OUT_FILE),V=i.overrides?JSON.parse(i.overrides):void 0,z=Ge(this,ze,"m",Ei).call(this,i.partitions),he=Ge(this,ze,"m",Ei).call(this,i.print),Z=Ge(this,ze,"m",Ei).call(this,i["runtime-enums"]),U=Ge(this,ze,"m",iD).call(this,i["runtime-enums-style"]),X=Ge(this,ze,"m",nD).call(this,i.schema),Ve=Ge(this,ze,"m",Ei).call(this,i.singular),J=Ge(this,ze,"m",Ei).call(this,i["type-only-imports"]??!0),F=Ge(this,ze,"m",ps).call(this,i.url)??hs.DEFAULT_URL,Y=Ge(this,ze,"m",Ei).call(this,i.verify);for(let oe in i)if(oe!=="_"&&!ev.FLAGS.some(x=>[x.shortName,x.longName,...x.longName.startsWith("no-")?[x.longName.slice(3)]:[]].includes(oe)))throw new RangeError(`Invalid flag: "${oe}"`);if(w&&!r?.silent&&Ge(this,ze,"m",sD).call(this),h&&!hs.VALID_DIALECTS.includes(h)){let oe=hs.VALID_DIALECTS.join(", ");throw new RangeError(`Parameter '--dialect' must have one of the following values: ${oe}`)}if(!F)throw new TypeError(`Parameter '--url' must be a valid connection string. Examples:

  --url=postgres://username:password@mydomain.com/database
  --url=env(DATABASE_URL)`);return{camelCase:u,dateParser:l,dialectName:h,domains:y,envFile:_,excludePattern:b,includePattern:E,logLevel:n,numericParser:v,outFile:A,overrides:V,partitions:z,print:he,runtimeEnums:Z,runtimeEnumsStyle:U,schemas:X,singular:Ve,typeOnlyImports:J,url:F,verify:Y}}async run(e){try{let r=this.parseOptions(e);await this.generate(r)}catch(r){if(this.logLevel>fs.LogLevel.SILENT)if(r instanceof Error){if(this.logLevel>=fs.LogLevel.DEBUG)throw console.error(),r;console.error(new Zj.Logger().serializeError(r.message)),process.exit(0)}else throw r}}};hn.Cli=tv;ze=new WeakSet,Ei=function(e){return!!e&&e!=="false"},eD=function(e){switch(e){case"string":return yN.DateParser.STRING;case"timestamp":return yN.DateParser.TIMESTAMP;default:return yN.DEFAULT_DATE_PARSER}},tD=function(e){switch(e){case"silent":return fs.LogLevel.SILENT;case"info":return fs.LogLevel.INFO;case"error":return fs.LogLevel.ERROR;case"debug":return fs.LogLevel.DEBUG;case"warn":return fs.LogLevel.WARN;default:return hs.DEFAULT_LOG_LEVEL}},rD=function(e){switch(e){case"number":return dc.NumericParser.NUMBER;case"number-or-string":return dc.NumericParser.NUMBER_OR_STRING;case"string":return dc.NumericParser.STRING;default:return dc.DEFAULT_NUMERIC_PARSER}},iD=function(e){switch(e){case"pascal-case":return Xj.RuntimeEnumsStyle.PASCAL_CASE;case"screaming-snake-case":return Xj.RuntimeEnumsStyle.SCREAMING_SNAKE_CASE}},ps=function(e){return e===void 0?void 0:String(e)},nD=function(e){return e===void 0?[]:Array.isArray(e)?e.map(String):[String(e)]},sD=function(){console.info(["","kysely-codegen [options]","",(0,ev.serializeFlags)(ev.FLAGS),""].join(`
`)),process.exit(0)}});var aD=d(Si=>{"use strict";o();s();var w8=Si&&Si.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),rv=Si&&Si.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&w8(e,t,r)};Object.defineProperty(Si,"__esModule",{value:!0});rv(oD(),Si);rv(mN(),Si);rv(ZS(),Si)});var cD=d(uD=>{"use strict";o();s();Object.defineProperty(uD,"__esModule",{value:!0})});var dD=d(lD=>{"use strict";o();s();Object.defineProperty(lD,"__esModule",{value:!0})});var hD=d(pD=>{"use strict";o();s();Object.defineProperty(pD,"__esModule",{value:!0})});var fD=d(NN=>{"use strict";o();s();Object.defineProperty(NN,"__esModule",{value:!0});NN.JsonColumnTypeNode=void 0;var g8=Wo(),iv=class extends g8.GenericExpressionNode{constructor(e,...r){super("JSONColumnType",[e,...r])}};NN.JsonColumnTypeNode=iv});var yD=d(mD=>{"use strict";o();s();Object.defineProperty(mD,"__esModule",{value:!0})});var ND=d(_N=>{"use strict";o();s();Object.defineProperty(_N,"__esModule",{value:!0});_N.GeneratorDialect=void 0;var b8=an(),nv=class extends b8.IntrospectorDialect{};_N.GeneratorDialect=nv});var _D=d(k=>{"use strict";o();s();var O8=k&&k.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Q=k&&k.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&O8(e,t,r)};Object.defineProperty(k,"__esModule",{value:!0});Q(Po(),k);Q(dS(),k);Q(Gu(),k);Q(Ju(),k);Q(dD(),k);Q(hS(),k);Q(hD(),k);Q(P0(),k);Q(Wo(),k);Q(gi(),k);Q(mS(),k);Q(NS(),k);Q(D0(),k);Q(wS(),k);Q(fD(),k);Q(Hy(),k);Q(W0(),k);Q(Wy(),k);Q(Be(),k);Q(Hu(),k);Q(Ku(),k);Q(OS(),k);Q(qS(),k);Q(yD(),k);Q(B0(),k);Q(Lo(),k);Q(j_(),k);Q(ND(),k);Q(cS(),k);Q(i0(),k);Q(c0(),k);Q(d0(),k);Q(z0(),k);Q($0(),k);Q(tS(),k);Q(iS(),k);Q(jo(),k);Q(sS(),k);Q(aS(),k);Q(jS(),k);Q(FS(),k);Q(Qo(),k);Q(LS(),k);Q(sc(),k);Q(XS(),k);Q(Xu(),k);Q(Xy(),k);Q(xS(),k);Q(Zy(),k);Q(CS(),k);Q(nc(),k)});var gD=d(wD=>{"use strict";o();s();Object.defineProperty(wD,"__esModule",{value:!0})});var OD=d(bD=>{"use strict";o();s();Object.defineProperty(bD,"__esModule",{value:!0})});var ED=d(be=>{"use strict";o();s();var E8=be&&be.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),Qe=be&&be.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&E8(e,t,r)};Object.defineProperty(be,"__esModule",{value:!0});Qe(an(),be);Qe(a0(),be);Qe(s0(),be);Qe(N0(),be);Qe(h0(),be);Qe(gD(),be);Qe(v0(),be);Qe(E0(),be);Qe(b0(),be);Qe(Zu(),be);Qe(ec(),be);Qe(OD(),be);Qe(X0(),be);Qe(H0(),be);Qe(Vu(),be);Qe(YE(),be);Qe(un(),be);Qe(is(),be);Qe(VE(),be);Qe(ns(),be);Qe(JE(),be);Qe(zE(),be)});var SD=d(Xr=>{"use strict";o();s();var S8=Xr&&Xr.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),wN=Xr&&Xr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&S8(e,t,r)};Object.defineProperty(Xr,"__esModule",{value:!0});wN(aD(),Xr);wN(cD(),Xr);wN(_D(),Xr);wN(ED(),Xr)});o();s();o();s();o();s();o();s();o();s();function Bt(t){return typeof t>"u"||t===void 0}function Me(t){return typeof t=="string"}function qi(t){return typeof t=="number"}function Nn(t){return typeof t=="boolean"}function _s(t){return t===null}function Fv(t){return t instanceof Date}function ws(t){return typeof t=="bigint"}function Ce(t){return typeof t=="function"}function bt(t){return typeof t=="object"&&t!==null}function c(t){return Object.freeze(t)}function ra(t){return ht(t)?t:[t]}function ht(t){return Array.isArray(t)}function Ir(t){return t}var ae=c({is(t){return t.kind==="AlterTableNode"},create(t){return c({kind:"AlterTableNode",table:t})},cloneWithTableProps(t,e){return c({...t,...e})},cloneWithColumnAlteration(t,e){return c({...t,columnAlterations:t.columnAlterations?[...t.columnAlterations,e]:[e]})}});o();s();o();s();var H=c({is(t){return t.kind==="IdentifierNode"},create(t){return c({kind:"IdentifierNode",name:t})}});var cr=c({is(t){return t.kind==="CreateIndexNode"},create(t){return c({kind:"CreateIndexNode",name:H.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}});o();s();var bc=c({is(t){return t.kind==="CreateSchemaNode"},create(t,e){return c({kind:"CreateSchemaNode",schema:H.create(t),...e})},cloneWith(t,e){return c({...t,...e})}});o();s();var zv=["preserve rows","delete rows","drop"],ft=c({is(t){return t.kind==="CreateTableNode"},create(t){return c({kind:"CreateTableNode",table:t,columns:c([])})},cloneWithColumn(t,e){return c({...t,columns:c([...t.columns,e])})},cloneWithConstraint(t,e){return c({...t,constraints:t.constraints?c([...t.constraints,e]):c([e])})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWith(t,e){return c({...t,...e})}});o();s();o();s();var At=c({is(t){return t.kind==="SchemableIdentifierNode"},create(t){return c({kind:"SchemableIdentifierNode",identifier:H.create(t)})},createWithSchema(t,e){return c({kind:"SchemableIdentifierNode",schema:H.create(t),identifier:H.create(e)})}});var xi=c({is(t){return t.kind==="DropIndexNode"},create(t,e){return c({kind:"DropIndexNode",name:At.create(t),...e})},cloneWith(t,e){return c({...t,...e})}});o();s();var ia=c({is(t){return t.kind==="DropSchemaNode"},create(t,e){return c({kind:"DropSchemaNode",schema:H.create(t),...e})},cloneWith(t,e){return c({...t,...e})}});o();s();var na=c({is(t){return t.kind==="DropTableNode"},create(t,e){return c({kind:"DropTableNode",table:t,...e})},cloneWith(t,e){return c({...t,...e})}});o();s();o();s();var mt=c({is(t){return t.kind==="AliasNode"},create(t,e){return c({kind:"AliasNode",node:t,alias:e})}});o();s();var Xt=c({is(t){return t.kind==="TableNode"},create(t){return c({kind:"TableNode",table:At.create(t)})},createWithSchema(t,e){return c({kind:"TableNode",table:At.createWithSchema(t,e)})}});o();s();o();s();o();s();function xe(t){return bt(t)&&Ce(t.toOperationNode)}function Qv(t){return bt(t)&&"expressionType"in t&&xe(t)}function $v(t){return bt(t)&&"expression"in t&&Me(t.alias)&&xe(t)}o();s();o();s();o();s();var qr=c({is(t){return t.kind==="SelectModifierNode"},create(t,e){return c({kind:"SelectModifierNode",modifier:t,of:e})},createWithExpression(t){return c({kind:"SelectModifierNode",rawModifier:t})}});o();s();o();s();o();s();o();s();var Tt=c({is(t){return t.kind==="AndNode"},create(t,e){return c({kind:"AndNode",left:t,right:e})}});o();s();var lr=c({is(t){return t.kind==="OrNode"},create(t,e){return c({kind:"OrNode",left:t,right:e})}});var Oc=c({is(t){return t.kind==="OnNode"},create(t){return c({kind:"OnNode",on:t})},cloneWithOperation(t,e,r){return c({...t,on:e==="And"?Tt.create(t.on,r):lr.create(t.on,r)})}});var Ai=c({is(t){return t.kind==="JoinNode"},create(t,e){return c({kind:"JoinNode",joinType:t,table:e,on:void 0})},createWithOn(t,e,r){return c({kind:"JoinNode",joinType:t,table:e,on:Oc.create(r)})},cloneWithOn(t,e){return c({...t,on:t.on?Oc.cloneWithOperation(t.on,"And",e):Oc.create(e)})}});o();s();o();s();var Ti=c({is(t){return t.kind==="BinaryOperationNode"},create(t,e,r){return c({kind:"BinaryOperationNode",leftOperand:t,operator:e,rightOperand:r})}});o();s();var NM=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],_M=["+","-","*","/","%","^","&","|","#","<<",">>"],Vv=["->","->>"],wM=[...NM,..._M,"&&","||"],gM=["exists","not exists"],bM=["not","-",...gM],Gv=[...wM,...Vv,...bM,"between","between symmetric"],kt=c({is(t){return t.kind==="OperatorNode"},create(t){return c({kind:"OperatorNode",operator:t})}});function DN(t){return Me(t)&&Vv.includes(t)}o();s();o();s();var ie=c({is(t){return t.kind==="ColumnNode"},create(t){return c({kind:"ColumnNode",column:H.create(t)})}});o();s();o();s();var gs=c({is(t){return t.kind==="SelectAllNode"},create(){return c({kind:"SelectAllNode"})}});var bs=c({is(t){return t.kind==="ReferenceNode"},create(t,e){return c({kind:"ReferenceNode",table:e,column:t})},createSelectAll(t){return c({kind:"ReferenceNode",table:t,column:gs.create()})}});o();s();o();s();var Ec=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(e){this.#e=e}toOperationNode(){return MN(this.#e)}};function Sc(t){return bt(t)&&xe(t)&&Me(t.dynamicReference)}o();s();var vc=c({is(t){return t.kind==="OrderByItemNode"},create(t,e){return c({kind:"OrderByItemNode",orderBy:t,direction:e})}});o();s();var Re=c({is(t){return t.kind==="RawNode"},create(t,e){return c({kind:"RawNode",sqlFragments:c(t),parameters:c(e)})},createWithSql(t){return Re.create([t],[])},createWithChild(t){return Re.create(["",""],[t])},createWithChildren(t){return Re.create(new Array(t.length+1).fill(""),t)}});function LN(t){return t==="asc"||t==="desc"}function xr(t){if(t.length===2)return[WN(t[0],t[1])];if(t.length===1){let[e]=t;return Array.isArray(e)?e.map(r=>WN(r)):[WN(e)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${t.length}`)}function WN(t,e){let r=OM(t);if(vc.is(r)){if(e)throw new Error("Cannot specify direction twice!");return r}return vc.create(r,Jv(e))}function OM(t){if(ni(t))return Ct(t);if(Sc(t))return t.toOperationNode();let[e,r]=t.split(" ");if(r){if(!LN(r))throw new Error(`Invalid order by direction: ${r}`);return vc.create(Ut(e),Jv(r))}return Ut(t)}function Jv(t){if(t)return t==="asc"||t==="desc"?Re.createWithSql(t):t.toOperationNode()}o();s();var Os=c({is(t){return t.kind==="JSONReferenceNode"},create(t,e){return c({kind:"JSONReferenceNode",reference:t,traversal:e})},cloneWithTraversal(t,e){return c({...t,traversal:e})}});o();s();var Ic=c({is(t){return t.kind==="JSONOperatorChainNode"},create(t){return c({kind:"JSONOperatorChainNode",operator:t,values:c([])})},cloneWithValue(t,e){return c({...t,values:c([...t.values,e])})}});o();s();var Ci=c({is(t){return t.kind==="JSONPathNode"},create(t){return c({kind:"JSONPathNode",inOperator:t,pathLegs:c([])})},cloneWithLeg(t,e){return c({...t,pathLegs:c([...t.pathLegs,e])})}});function MN(t){return Me(t)?Ut(t):t.toOperationNode()}function si(t){return ht(t)?t.map(e=>st(e)):[st(t)]}function st(t){return ni(t)?Ct(t):MN(t)}function Hv(t,e){let r=Ut(t);if(DN(e))return Os.create(r,Ic.create(kt.create(e)));let i=e.slice(0,-1);if(DN(i))return Os.create(r,Ci.create(kt.create(i)));throw new Error(`Invalid JSON operator: ${e}`)}function Ut(t){let e=".";if(!t.includes(e))return bs.create(ie.create(t));let r=t.split(e).map(kN);if(r.length===3)return EM(r);if(r.length===2)return SM(r);throw new Error(`invalid column reference ${t}`)}function Kv(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(kN);return mt.create(Ut(r),H.create(i))}else return Ut(t)}function BN(t){return ie.create(t)}function Es(t){let e=" ";if(t.includes(e)){let[r,i]=t.split(e).map(kN);if(!LN(i))throw new Error(`invalid order direction "${i}" next to "${r}"`);return xr([r,i])[0]}else return BN(t)}function EM(t){let[e,r,i]=t;return bs.create(ie.create(i),Xt.createWithSchema(e,r))}function SM(t){let[e,r]=t;return bs.create(ie.create(r),Xt.create(e))}function kN(t){return t.trim()}o();s();o();s();var qc=c({is(t){return t.kind==="PrimitiveValueListNode"},create(t){return c({kind:"PrimitiveValueListNode",values:c([...t])})}});o();s();var Ss=c({is(t){return t.kind==="ValueListNode"},create(t){return c({kind:"ValueListNode",values:c(t)})}});o();s();var ot=c({is(t){return t.kind==="ValueNode"},create(t){return c({kind:"ValueNode",value:t})},createImmediate(t){return c({kind:"ValueNode",value:t,immediate:!0})}});function Yv(t){return ht(t)?vM(t):Ne(t)}function Ne(t){return ni(t)?Ct(t):ot.create(t)}function xc(t){return qi(t)||Nn(t)||_s(t)}function sa(t){if(!xc(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return ot.createImmediate(t)}function vM(t){return t.some(ni)?Ss.create(t.map(e=>Ne(e))):qc.create(t)}o();s();var Ar=c({is(t){return t.kind==="ParensNode"},create(t){return c({kind:"ParensNode",node:t})}});function ge(t){if(t.length===3)return Ac(t[0],t[1],t[2]);if(t.length===1)return Ne(t[0]);throw new Error(`invalid arguments: ${JSON.stringify(t)}`)}function Ac(t,e,r){return IM(e)&&Zv(r)?Ti.create(st(t),UN(e),ot.createImmediate(r)):Ti.create(st(t),UN(e),Yv(r))}function Ze(t,e,r){return Ti.create(st(t),UN(e),st(r))}function FN(t,e){return vs(Object.entries(t).filter(([,r])=>!Bt(r)).map(([r,i])=>Ac(r,Zv(i)?"is":"=",i)),e)}function vs(t,e,r=!0){let i=e==="and"?Tt.create:lr.create;if(t.length===0)return Ti.create(ot.createImmediate(1),kt.create("="),ot.createImmediate(e==="and"?1:0));let n=Xv(t[0]);for(let a=1;a<t.length;++a)n=i(n,Xv(t[a]));return t.length>1&&r?Ar.create(n):n}function IM(t){return t==="is"||t==="is not"}function Zv(t){return _s(t)||Nn(t)}function UN(t){if(Me(t)&&Gv.includes(t))return kt.create(t);if(xe(t))return t.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(t)}`)}function Xv(t){return xe(t)?t.toOperationNode():t}o();s();o();s();o();s();var Zt=c({is(t){return t.kind==="OrderByNode"},create(t){return c({kind:"OrderByNode",items:c([...t])})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}});o();s();var zN=c({is(t){return t.kind==="PartitionByNode"},create(t){return c({kind:"PartitionByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}});var oa=c({is(t){return t.kind==="OverNode"},create(){return c({kind:"OverNode"})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Zt.cloneWithItems(t.orderBy,e):Zt.create(e)})},cloneWithPartitionByItems(t,e){return c({...t,partitionBy:t.partitionBy?zN.cloneWithItems(t.partitionBy,e):zN.create(e)})}});o();s();o();s();var _n=c({is(t){return t.kind==="FromNode"},create(t){return c({kind:"FromNode",froms:c(t)})},cloneWithFroms(t,e){return c({...t,froms:c([...t.froms,...e])})}});o();s();var QN=c({is(t){return t.kind==="GroupByNode"},create(t){return c({kind:"GroupByNode",items:c(t)})},cloneWithItems(t,e){return c({...t,items:c([...t.items,...e])})}});o();s();var $N=c({is(t){return t.kind==="HavingNode"},create(t){return c({kind:"HavingNode",having:t})},cloneWithOperation(t,e,r){return c({...t,having:e==="And"?Tt.create(t.having,r):lr.create(t.having,r)})}});var le=c({is(t){return t.kind==="SelectQueryNode"},create(t){return c({kind:"SelectQueryNode",...t&&{with:t}})},createFrom(t,e){return c({kind:"SelectQueryNode",from:_n.create(t),...e&&{with:e}})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})},cloneWithDistinctOn(t,e){return c({...t,distinctOn:t.distinctOn?c([...t.distinctOn,...e]):c(e)})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):c([e])})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Zt.cloneWithItems(t.orderBy,e):Zt.create(e)})},cloneWithGroupByItems(t,e){return c({...t,groupBy:t.groupBy?QN.cloneWithItems(t.groupBy,e):QN.create(e)})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithOffset(t,e){return c({...t,offset:e})},cloneWithFetch(t,e){return c({...t,fetch:e})},cloneWithHaving(t,e){return c({...t,having:t.having?$N.cloneWithOperation(t.having,"And",e):$N.create(e)})},cloneWithSetOperations(t,e){return c({...t,setOperations:t.setOperations?c([...t.setOperations,...e]):c([...e])})},cloneWithoutSelections(t){return c({...t,selections:[]})},cloneWithoutLimit(t){return c({...t,limit:void 0})},cloneWithoutOffset(t){return c({...t,offset:void 0})},cloneWithoutOrderBy(t){return c({...t,orderBy:void 0})},cloneWithoutGroupBy(t){return c({...t,groupBy:void 0})}});o();s();o();s();function D(t,e){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(e)}}})}var aa=class t{#e;constructor(e){this.#e=c(e)}on(...e){return new t({...this.#e,joinNode:Ai.cloneWithOn(this.#e.joinNode,ge(e))})}onRef(e,r,i){return new t({...this.#e,joinNode:Ai.cloneWithOn(this.#e.joinNode,Ze(e,r,i))})}onTrue(){return new t({...this.#e,joinNode:Ai.cloneWithOn(this.#e.joinNode,Re.createWithSql("true"))})}$call(e){return e(this)}toOperationNode(){return this.#e.joinNode}};D(aa,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.");o();s();o();s();o();s();var eI=c({is(t){return t.kind==="PartitionByItemNode"},create(t){return c({kind:"PartitionByItemNode",partitionBy:t})}});function tI(t){return si(t).map(eI.create)}var ua=class t{#e;constructor(e){this.#e=c(e)}orderBy(e,r){return new t({overNode:oa.cloneWithOrderByItems(this.#e.overNode,xr([e,r]))})}partitionBy(e){return new t({overNode:oa.cloneWithPartitionByItems(this.#e.overNode,tI(e))})}$call(e){return e(this)}toOperationNode(){return this.#e.overNode}};D(ua,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.");o();s();o();s();o();s();o();s();var Is=c({is(t){return t.kind==="SelectionNode"},create(t){return c({kind:"SelectionNode",selection:t})},createSelectAll(){return c({kind:"SelectionNode",selection:gs.create()})},createSelectAllFromTable(t){return c({kind:"SelectionNode",selection:bs.createSelectAll(t)})}});function at(t){return Ce(t)?at(t(dr())):ht(t)?t.map(e=>rI(e)):[rI(t)]}function rI(t){return Me(t)?Is.create(Kv(t)):Sc(t)?Is.create(t.toOperationNode()):Is.create(Tc(t))}function yt(t){return t?Array.isArray(t)?t.map(iI):[iI(t)]:[Is.createSelectAll()]}function iI(t){if(Me(t))return Is.createSelectAllFromTable(de(t));throw new Error(`invalid value selectAll expression: ${JSON.stringify(t)}`)}o();s();o();s();var nI=c({is(t){return t.kind==="ValuesNode"},create(t){return c({kind:"ValuesNode",values:c(t)})}});o();s();var sI=c({is(t){return t.kind==="DefaultInsertValueNode"},create(){return c({kind:"DefaultInsertValueNode"})}});function Cc(t){let e=Ce(t)?t(dr()):t,r=ht(e)?e:c([e]);return qM(r)}function qM(t){let e=xM(t);return[c([...e.keys()].map(ie.create)),nI.create(t.map(r=>AM(r,e)))]}function xM(t){let e=new Map;for(let r of t){let i=Object.keys(r);for(let n of i)!e.has(n)&&r[n]!==void 0&&e.set(n,e.size)}return e}function AM(t,e){let r=Object.keys(t),i=Array.from({length:e.size}),n=!1;for(let u of r){let l=e.get(u);if(Bt(l))continue;let h=t[u];(Bt(h)||ni(h))&&(n=!0),i[l]=h}if(r.length<e.size||n){let u=sI.create();return Ss.create(i.map(l=>Bt(l)?u:Ne(l)))}return qc.create(i)}o();s();var et=c({is(t){return t.kind==="InsertQueryNode"},create(t,e,r){return c({kind:"InsertQueryNode",into:t,...e&&{with:e},replace:r})},createWithoutInto(){return c({kind:"InsertQueryNode"})},cloneWith(t,e){return c({...t,...e})}});o();s();o();s();var Tr=c({is(t){return t.kind==="UpdateQueryNode"},create(t,e){return c({kind:"UpdateQueryNode",table:t,...e&&{with:e}})},createWithoutTable(){return c({kind:"UpdateQueryNode"})},cloneWithFromItems(t,e){return c({...t,from:t.from?_n.cloneWithFroms(t.from,e):_n.create(e)})},cloneWithUpdates(t,e){return c({...t,updates:t.updates?c([...t.updates,...e]):e})},cloneWithLimit(t,e){return c({...t,limit:e})}});o();s();o();s();var VN=c({is(t){return t.kind==="UsingNode"},create(t){return c({kind:"UsingNode",tables:c(t)})},cloneWithTables(t,e){return c({...t,tables:c([...t.tables,...e])})}});var Cr=c({is(t){return t.kind==="DeleteQueryNode"},create(t,e){return c({kind:"DeleteQueryNode",from:_n.create(t),...e&&{with:e}})},cloneWithOrderByItems(t,e){return c({...t,orderBy:t.orderBy?Zt.cloneWithItems(t.orderBy,e):Zt.create(e)})},cloneWithoutOrderBy(t){return c({...t,orderBy:void 0})},cloneWithLimit(t,e){return c({...t,limit:e})},cloneWithoutLimit(t){return c({...t,limit:void 0})},cloneWithUsing(t,e){return c({...t,using:t.using!==void 0?VN.cloneWithTables(t.using,e):VN.create(e)})}});o();s();var ut=c({is(t){return t.kind==="WhereNode"},create(t){return c({kind:"WhereNode",where:t})},cloneWithOperation(t,e,r){return c({...t,where:e==="And"?Tt.create(t.where,r):lr.create(t.where,r)})}});o();s();var GN=c({is(t){return t.kind==="ReturningNode"},create(t){return c({kind:"ReturningNode",selections:c(t)})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})}});o();s();var oI=c({is(t){return t.kind==="ExplainNode"},create(t,e){return c({kind:"ExplainNode",format:t,options:e})}});o();s();o();s();var oi=c({is(t){return t.kind==="WhenNode"},create(t){return c({kind:"WhenNode",condition:t})},cloneWithResult(t,e){return c({...t,result:e})}});var tt=c({is(t){return t.kind==="MergeQueryNode"},create(t,e){return c({kind:"MergeQueryNode",into:t,...e&&{with:e}})},cloneWithUsing(t,e){return c({...t,using:e})},cloneWithWhen(t,e){return c({...t,whens:t.whens?c([...t.whens,e]):c([e])})},cloneWithThen(t,e){return c({...t,whens:t.whens?c([...t.whens.slice(0,-1),oi.cloneWithResult(t.whens[t.whens.length-1],e)]):void 0})}});o();s();var JN=c({is(t){return t.kind==="OutputNode"},create(t){return c({kind:"OutputNode",selections:c(t)})},cloneWithSelections(t,e){return c({...t,selections:t.selections?c([...t.selections,...e]):c(e)})}});var j=c({is(t){return le.is(t)||et.is(t)||Tr.is(t)||Cr.is(t)||tt.is(t)},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):c([e])})},cloneWithWhere(t,e){return c({...t,where:t.where?ut.cloneWithOperation(t.where,"And",e):ut.create(e)})},cloneWithJoin(t,e){return c({...t,joins:t.joins?c([...t.joins,e]):c([e])})},cloneWithReturning(t,e){return c({...t,returning:t.returning?GN.cloneWithSelections(t.returning,e):GN.create(e)})},cloneWithoutReturning(t){return c({...t,returning:void 0})},cloneWithoutWhere(t){return c({...t,where:void 0})},cloneWithExplain(t,e,r){return c({...t,explain:oI.create(e,r?.toOperationNode())})},cloneWithTop(t,e){return c({...t,top:e})},cloneWithOutput(t,e){return c({...t,output:t.output?JN.cloneWithSelections(t.output,e):JN.create(e)})}});o();s();o();s();var HN=c({is(t){return t.kind==="ColumnUpdateNode"},create(t,e){return c({kind:"ColumnUpdateNode",column:t,value:e})}});function aI(...t){return t.length===2?[HN.create(st(t[0]),Ne(t[1]))]:ca(t[0])}function ca(t){let e=Ce(t)?t(dr()):t;return Object.entries(e).filter(([r,i])=>i!==void 0).map(([r,i])=>HN.create(ie.create(r),Ne(i)))}o();s();var uI=c({is(t){return t.kind==="OnDuplicateKeyNode"},create(t){return c({kind:"OnDuplicateKeyNode",updates:t})}});o();s();var Rc=class{insertId;numInsertedOrUpdatedRows;constructor(e,r){this.insertId=e,this.numInsertedOrUpdatedRows=r}};o();s();var er=class extends Error{node;constructor(e){super("no result"),this.node=e}};function Rr(t){return Object.prototype.hasOwnProperty.call(t,"prototype")}o();s();o();s();var Ot=c({is(t){return t.kind==="OnConflictNode"},create(){return c({kind:"OnConflictNode"})},cloneWith(t,e){return c({...t,...e})},cloneWithIndexWhere(t,e){return c({...t,indexWhere:t.indexWhere?ut.cloneWithOperation(t.indexWhere,"And",e):ut.create(e)})},cloneWithIndexOrWhere(t,e){return c({...t,indexWhere:t.indexWhere?ut.cloneWithOperation(t.indexWhere,"Or",e):ut.create(e)})},cloneWithUpdateWhere(t,e){return c({...t,updateWhere:t.updateWhere?ut.cloneWithOperation(t.updateWhere,"And",e):ut.create(e)})},cloneWithUpdateOrWhere(t,e){return c({...t,updateWhere:t.updateWhere?ut.cloneWithOperation(t.updateWhere,"Or",e):ut.create(e)})},cloneWithoutIndexWhere(t){return c({...t,indexWhere:void 0})},cloneWithoutUpdateWhere(t){return c({...t,updateWhere:void 0})}});var la=class t{#e;constructor(e){this.#e=c(e)}column(e){let r=ie.create(e);return new t({...this.#e,onConflictNode:Ot.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?c([...this.#e.onConflictNode.columns,r]):c([r])})})}columns(e){let r=e.map(ie.create);return new t({...this.#e,onConflictNode:Ot.cloneWith(this.#e.onConflictNode,{columns:this.#e.onConflictNode.columns?c([...this.#e.onConflictNode.columns,...r]):c(r)})})}constraint(e){return new t({...this.#e,onConflictNode:Ot.cloneWith(this.#e.onConflictNode,{constraint:H.create(e)})})}expression(e){return new t({...this.#e,onConflictNode:Ot.cloneWith(this.#e.onConflictNode,{indexExpression:e.toOperationNode()})})}where(...e){return new t({...this.#e,onConflictNode:Ot.cloneWithIndexWhere(this.#e.onConflictNode,ge(e))})}whereRef(e,r,i){return new t({...this.#e,onConflictNode:Ot.cloneWithIndexWhere(this.#e.onConflictNode,Ze(e,r,i))})}clearWhere(){return new t({...this.#e,onConflictNode:Ot.cloneWithoutIndexWhere(this.#e.onConflictNode)})}doNothing(){return new Pc({...this.#e,onConflictNode:Ot.cloneWith(this.#e.onConflictNode,{doNothing:!0})})}doUpdateSet(e){return new jc({...this.#e,onConflictNode:Ot.cloneWith(this.#e.onConflictNode,{updates:ca(e)})})}$call(e){return e(this)}};D(la,"don't await OnConflictBuilder instances.");var Pc=class{#e;constructor(e){this.#e=c(e)}toOperationNode(){return this.#e.onConflictNode}};D(Pc,"don't await OnConflictDoNothingBuilder instances.");var jc=class t{#e;constructor(e){this.#e=c(e)}where(...e){return new t({...this.#e,onConflictNode:Ot.cloneWithUpdateWhere(this.#e.onConflictNode,ge(e))})}whereRef(e,r,i){return new t({...this.#e,onConflictNode:Ot.cloneWithUpdateWhere(this.#e.onConflictNode,Ze(e,r,i))})}clearWhere(){return new t({...this.#e,onConflictNode:Ot.cloneWithoutUpdateWhere(this.#e.onConflictNode)})}$call(e){return e(this)}toOperationNode(){return this.#e.onConflictNode}};D(jc,"don't await OnConflictUpdateBuilder instances.");o();s();o();s();var cI=c({is(t){return t.kind==="TopNode"},create(t,e){return c({kind:"TopNode",expression:t,modifiers:e})}});function pr(t,e){if(!qi(t)&&!ws(t))throw new Error(`Invalid top expression: ${t}`);if(!Bt(e)&&!TM(e))throw new Error(`Invalid top modifiers: ${e}`);return cI.create(t,e)}function TM(t){return t==="percent"||t==="with ties"||t==="percent with ties"}var qs=class t{#e;constructor(e){this.#e=c(e)}values(e){let[r,i]=Cc(e);return new t({...this.#e,queryNode:et.cloneWith(this.#e.queryNode,{columns:r,values:i})})}columns(e){return new t({...this.#e,queryNode:et.cloneWith(this.#e.queryNode,{columns:c(e.map(ie.create))})})}expression(e){return new t({...this.#e,queryNode:et.cloneWith(this.#e.queryNode,{values:Ct(e)})})}defaultValues(){return new t({...this.#e,queryNode:et.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(e){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}ignore(){return new t({...this.#e,queryNode:et.cloneWith(this.#e.queryNode,{ignore:!0})})}top(e,r){return new t({...this.#e,queryNode:j.cloneWithTop(this.#e.queryNode,pr(e,r))})}onConflict(e){return new t({...this.#e,queryNode:et.cloneWith(this.#e.queryNode,{onConflict:e(new la({onConflictNode:Ot.create()})).toOperationNode()})})}onDuplicateKeyUpdate(e){return new t({...this.#e,queryNode:et.cloneWith(this.#e.queryNode,{onDuplicateKey:uI.create(ca(e))})})}returning(e){return new t({...this.#e,queryNode:j.cloneWithReturning(this.#e.queryNode,at(e))})}returningAll(){return new t({...this.#e,queryNode:j.cloneWithReturning(this.#e.queryNode,yt())})}output(e){return new t({...this.#e,queryNode:j.cloneWithOutput(this.#e.queryNode,at(e))})}outputAll(e){return new t({...this.#e,queryNode:j.cloneWithOutput(this.#e.queryNode,yt(e))})}clearReturning(){return new t({...this.#e,queryNode:j.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new Rc(r.insertId,r.numAffectedRows??r.numUpdatedOrDeletedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=er){let r=await this.executeTakeFirst();if(r===void 0)throw Rr(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:j.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};D(qs,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");o();s();o();s();var Dc=class{numDeletedRows;constructor(e){this.numDeletedRows=e}};o();s();var xs=c({is(t){return t.kind==="LimitNode"},create(t){return c({kind:"LimitNode",limit:t})}});var da=class t{#e;constructor(e){this.#e=c(e)}where(...e){return new t({...this.#e,queryNode:j.cloneWithWhere(this.#e.queryNode,ge(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:j.cloneWithWhere(this.#e.queryNode,Ze(e,r,i))})}clearWhere(){return new t({...this.#e,queryNode:j.cloneWithoutWhere(this.#e.queryNode)})}top(e,r){return new t({...this.#e,queryNode:j.cloneWithTop(this.#e.queryNode,pr(e,r))})}using(e){return new t({...this.#e,queryNode:Cr.cloneWithUsing(this.#e.queryNode,Pr(e))})}innerJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("FullJoin",e))})}returning(e){return new t({...this.#e,queryNode:j.cloneWithReturning(this.#e.queryNode,at(e))})}returningAll(e){return new t({...this.#e,queryNode:j.cloneWithReturning(this.#e.queryNode,yt(e))})}output(e){return new t({...this.#e,queryNode:j.cloneWithOutput(this.#e.queryNode,at(e))})}outputAll(e){return new t({...this.#e,queryNode:j.cloneWithOutput(this.#e.queryNode,yt(e))})}clearReturning(){return new t({...this.#e,queryNode:j.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new t({...this.#e,queryNode:Cr.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new t({...this.#e,queryNode:Cr.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(e,r){return new t({...this.#e,queryNode:Cr.cloneWithOrderByItems(this.#e.queryNode,xr([e,r]))})}limit(e){return new t({...this.#e,queryNode:Cr.cloneWithLimit(this.#e.queryNode,xs.create(Ne(e)))})}modifyEnd(e){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new Dc(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=er){let r=await this.executeTakeFirst();if(r===void 0)throw Rr(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:j.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};D(da,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");o();s();o();s();var Mc=class{numUpdatedRows;numChangedRows;constructor(e,r){this.numUpdatedRows=e,this.numChangedRows=r}};var wn=class t{#e;constructor(e){this.#e=c(e)}where(...e){return new t({...this.#e,queryNode:j.cloneWithWhere(this.#e.queryNode,ge(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:j.cloneWithWhere(this.#e.queryNode,Ze(e,r,i))})}clearWhere(){return new t({...this.#e,queryNode:j.cloneWithoutWhere(this.#e.queryNode)})}top(e,r){return new t({...this.#e,queryNode:j.cloneWithTop(this.#e.queryNode,pr(e,r))})}from(e){return new t({...this.#e,queryNode:Tr.cloneWithFromItems(this.#e.queryNode,Pr(e))})}innerJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("FullJoin",e))})}limit(e){return new t({...this.#e,queryNode:Tr.cloneWithLimit(this.#e.queryNode,xs.create(Ne(e)))})}set(...e){return new t({...this.#e,queryNode:Tr.cloneWithUpdates(this.#e.queryNode,aI(...e))})}returning(e){return new t({...this.#e,queryNode:j.cloneWithReturning(this.#e.queryNode,at(e))})}returningAll(e){return new t({...this.#e,queryNode:j.cloneWithReturning(this.#e.queryNode,yt(e))})}output(e){return new t({...this.#e,queryNode:j.cloneWithOutput(this.#e.queryNode,at(e))})}outputAll(e){return new t({...this.#e,queryNode:j.cloneWithOutput(this.#e.queryNode,yt(e))})}modifyEnd(e){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}clearReturning(){return new t({...this.#e,queryNode:j.cloneWithoutReturning(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e,this.#e.queryId),{adapter:i}=this.#e.executor,n=e.query;return n.returning&&i.supportsReturning||n.output&&i.supportsOutput?r.rows:[new Mc(r.numAffectedRows??r.numUpdatedOrDeletedRows??BigInt(0),r.numChangedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=er){let r=await this.executeTakeFirst();if(r===void 0)throw Rr(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:j.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};D(wn,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");o();s();o();s();var KN=c({is(t){return t.kind==="CommonTableExpressionNameNode"},create(t,e){return c({kind:"CommonTableExpressionNameNode",table:Xt.create(t),columns:e?c(e.map(ie.create)):void 0})}});o();s();o();s();var As=c({is(t){return t.kind==="CommonTableExpressionNode"},create(t,e){return c({kind:"CommonTableExpressionNode",name:t,expression:e})},cloneWith(t,e){return c({...t,...e})}});var pa=class t{#e;constructor(e){this.#e=c(e)}materialized(){return new t({...this.#e,node:As.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new t({...this.#e,node:As.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}};D(pa,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.");function YN(t,e){let r=e(dI()).toOperationNode();return Ce(t)?t(CM(r)).toOperationNode():As.create(lI(t),r)}function CM(t){return e=>new pa({node:As.create(lI(e),t)})}function lI(t){if(t.includes("(")){let e=t.split(/[\(\)]/),r=e[0],i=e[1].split(",").map(n=>n.trim());return KN.create(r,i)}else return KN.create(t)}o();s();var ha=c({is(t){return t.kind==="WithNode"},create(t,e){return c({kind:"WithNode",expressions:c([t]),...e})},cloneWithExpression(t,e){return c({...t,expressions:c([...t.expressions,e])})}});o();s();o();s();var pI=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function hI(t){let e="";for(let r=0;r<t;++r)e+=RM();return e}function RM(){return pI[~~(Math.random()*pI.length)]}function ue(){return new XN}var XN=class{#e;get queryId(){return this.#e===void 0&&(this.#e=hI(8)),this.#e}};o();s();o();s();o();s();var Ts=class{nodeStack=[];#e=c({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(e){if(!e)return e;this.nodeStack.push(e);let r=this.transformNodeImpl(e);return this.nodeStack.pop(),c(r)}transformNodeImpl(e){return this.#e[e.kind](e)}transformNodeList(e){return e&&c(e.map(r=>this.transformNode(r)))}transformSelectQuery(e){return{kind:"SelectQueryNode",from:this.transformNode(e.from),selections:this.transformNodeList(e.selections),distinctOn:this.transformNodeList(e.distinctOn),joins:this.transformNodeList(e.joins),groupBy:this.transformNode(e.groupBy),orderBy:this.transformNode(e.orderBy),where:this.transformNode(e.where),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),limit:this.transformNode(e.limit),offset:this.transformNode(e.offset),with:this.transformNode(e.with),having:this.transformNode(e.having),explain:this.transformNode(e.explain),setOperations:this.transformNodeList(e.setOperations),fetch:this.transformNode(e.fetch),top:this.transformNode(e.top)}}transformSelection(e){return{kind:"SelectionNode",selection:this.transformNode(e.selection)}}transformColumn(e){return{kind:"ColumnNode",column:this.transformNode(e.column)}}transformAlias(e){return{kind:"AliasNode",node:this.transformNode(e.node),alias:this.transformNode(e.alias)}}transformTable(e){return{kind:"TableNode",table:this.transformNode(e.table)}}transformFrom(e){return{kind:"FromNode",froms:this.transformNodeList(e.froms)}}transformReference(e){return{kind:"ReferenceNode",column:this.transformNode(e.column),table:this.transformNode(e.table)}}transformAnd(e){return{kind:"AndNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformOr(e){return{kind:"OrNode",left:this.transformNode(e.left),right:this.transformNode(e.right)}}transformValueList(e){return{kind:"ValueListNode",values:this.transformNodeList(e.values)}}transformParens(e){return{kind:"ParensNode",node:this.transformNode(e.node)}}transformJoin(e){return{kind:"JoinNode",joinType:e.joinType,table:this.transformNode(e.table),on:this.transformNode(e.on)}}transformRaw(e){return{kind:"RawNode",sqlFragments:c([...e.sqlFragments]),parameters:this.transformNodeList(e.parameters)}}transformWhere(e){return{kind:"WhereNode",where:this.transformNode(e.where)}}transformInsertQuery(e){return{kind:"InsertQueryNode",into:this.transformNode(e.into),columns:this.transformNodeList(e.columns),values:this.transformNode(e.values),returning:this.transformNode(e.returning),onConflict:this.transformNode(e.onConflict),onDuplicateKey:this.transformNode(e.onDuplicateKey),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),ignore:e.ignore,replace:e.replace,explain:this.transformNode(e.explain),defaultValues:e.defaultValues,top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformValues(e){return{kind:"ValuesNode",values:this.transformNodeList(e.values)}}transformDeleteQuery(e){return{kind:"DeleteQueryNode",from:this.transformNode(e.from),using:this.transformNode(e.using),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),orderBy:this.transformNode(e.orderBy),limit:this.transformNode(e.limit),explain:this.transformNode(e.explain),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformReturning(e){return{kind:"ReturningNode",selections:this.transformNodeList(e.selections)}}transformCreateTable(e){return{kind:"CreateTableNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),constraints:this.transformNodeList(e.constraints),temporary:e.temporary,ifNotExists:e.ifNotExists,onCommit:e.onCommit,frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),selectQuery:this.transformNode(e.selectQuery)}}transformColumnDefinition(e){return{kind:"ColumnDefinitionNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),references:this.transformNode(e.references),primaryKey:e.primaryKey,autoIncrement:e.autoIncrement,unique:e.unique,notNull:e.notNull,unsigned:e.unsigned,defaultTo:this.transformNode(e.defaultTo),check:this.transformNode(e.check),generated:this.transformNode(e.generated),frontModifiers:this.transformNodeList(e.frontModifiers),endModifiers:this.transformNodeList(e.endModifiers),nullsNotDistinct:e.nullsNotDistinct,identity:e.identity,ifNotExists:e.ifNotExists}}transformAddColumn(e){return{kind:"AddColumnNode",column:this.transformNode(e.column)}}transformDropTable(e){return{kind:"DropTableNode",table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformOrderBy(e){return{kind:"OrderByNode",items:this.transformNodeList(e.items)}}transformOrderByItem(e){return{kind:"OrderByItemNode",orderBy:this.transformNode(e.orderBy),direction:this.transformNode(e.direction)}}transformGroupBy(e){return{kind:"GroupByNode",items:this.transformNodeList(e.items)}}transformGroupByItem(e){return{kind:"GroupByItemNode",groupBy:this.transformNode(e.groupBy)}}transformUpdateQuery(e){return{kind:"UpdateQueryNode",table:this.transformNode(e.table),from:this.transformNode(e.from),joins:this.transformNodeList(e.joins),where:this.transformNode(e.where),updates:this.transformNodeList(e.updates),returning:this.transformNode(e.returning),endModifiers:this.transformNodeList(e.endModifiers),with:this.transformNode(e.with),explain:this.transformNode(e.explain),limit:this.transformNode(e.limit),top:this.transformNode(e.top),output:this.transformNode(e.output)}}transformColumnUpdate(e){return{kind:"ColumnUpdateNode",column:this.transformNode(e.column),value:this.transformNode(e.value)}}transformLimit(e){return{kind:"LimitNode",limit:this.transformNode(e.limit)}}transformOffset(e){return{kind:"OffsetNode",offset:this.transformNode(e.offset)}}transformOnConflict(e){return{kind:"OnConflictNode",columns:this.transformNodeList(e.columns),constraint:this.transformNode(e.constraint),indexExpression:this.transformNode(e.indexExpression),indexWhere:this.transformNode(e.indexWhere),updates:this.transformNodeList(e.updates),updateWhere:this.transformNode(e.updateWhere),doNothing:e.doNothing}}transformOnDuplicateKey(e){return{kind:"OnDuplicateKeyNode",updates:this.transformNodeList(e.updates)}}transformCreateIndex(e){return{kind:"CreateIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists,where:this.transformNode(e.where),nullsNotDistinct:e.nullsNotDistinct}}transformList(e){return{kind:"ListNode",items:this.transformNodeList(e.items)}}transformDropIndex(e){return{kind:"DropIndexNode",name:this.transformNode(e.name),table:this.transformNode(e.table),ifExists:e.ifExists,cascade:e.cascade}}transformPrimaryKeyConstraint(e){return{kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name)}}transformUniqueConstraint(e){return{kind:"UniqueConstraintNode",columns:this.transformNodeList(e.columns),name:this.transformNode(e.name),nullsNotDistinct:e.nullsNotDistinct}}transformForeignKeyConstraint(e){return{kind:"ForeignKeyConstraintNode",columns:this.transformNodeList(e.columns),references:this.transformNode(e.references),name:this.transformNode(e.name),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformSetOperation(e){return{kind:"SetOperationNode",operator:e.operator,expression:this.transformNode(e.expression),all:e.all}}transformReferences(e){return{kind:"ReferencesNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns),onDelete:e.onDelete,onUpdate:e.onUpdate}}transformCheckConstraint(e){return{kind:"CheckConstraintNode",expression:this.transformNode(e.expression),name:this.transformNode(e.name)}}transformWith(e){return{kind:"WithNode",expressions:this.transformNodeList(e.expressions),recursive:e.recursive}}transformCommonTableExpression(e){return{kind:"CommonTableExpressionNode",name:this.transformNode(e.name),materialized:e.materialized,expression:this.transformNode(e.expression)}}transformCommonTableExpressionName(e){return{kind:"CommonTableExpressionNameNode",table:this.transformNode(e.table),columns:this.transformNodeList(e.columns)}}transformHaving(e){return{kind:"HavingNode",having:this.transformNode(e.having)}}transformCreateSchema(e){return{kind:"CreateSchemaNode",schema:this.transformNode(e.schema),ifNotExists:e.ifNotExists}}transformDropSchema(e){return{kind:"DropSchemaNode",schema:this.transformNode(e.schema),ifExists:e.ifExists,cascade:e.cascade}}transformAlterTable(e){return{kind:"AlterTableNode",table:this.transformNode(e.table),renameTo:this.transformNode(e.renameTo),setSchema:this.transformNode(e.setSchema),columnAlterations:this.transformNodeList(e.columnAlterations),addConstraint:this.transformNode(e.addConstraint),dropConstraint:this.transformNode(e.dropConstraint),addIndex:this.transformNode(e.addIndex),dropIndex:this.transformNode(e.dropIndex)}}transformDropColumn(e){return{kind:"DropColumnNode",column:this.transformNode(e.column)}}transformRenameColumn(e){return{kind:"RenameColumnNode",column:this.transformNode(e.column),renameTo:this.transformNode(e.renameTo)}}transformAlterColumn(e){return{kind:"AlterColumnNode",column:this.transformNode(e.column),dataType:this.transformNode(e.dataType),dataTypeExpression:this.transformNode(e.dataTypeExpression),setDefault:this.transformNode(e.setDefault),dropDefault:e.dropDefault,setNotNull:e.setNotNull,dropNotNull:e.dropNotNull}}transformModifyColumn(e){return{kind:"ModifyColumnNode",column:this.transformNode(e.column)}}transformAddConstraint(e){return{kind:"AddConstraintNode",constraint:this.transformNode(e.constraint)}}transformDropConstraint(e){return{kind:"DropConstraintNode",constraintName:this.transformNode(e.constraintName),ifExists:e.ifExists,modifier:e.modifier}}transformCreateView(e){return{kind:"CreateViewNode",name:this.transformNode(e.name),temporary:e.temporary,orReplace:e.orReplace,ifNotExists:e.ifNotExists,materialized:e.materialized,columns:this.transformNodeList(e.columns),as:this.transformNode(e.as)}}transformDropView(e){return{kind:"DropViewNode",name:this.transformNode(e.name),ifExists:e.ifExists,materialized:e.materialized,cascade:e.cascade}}transformGenerated(e){return{kind:"GeneratedNode",byDefault:e.byDefault,always:e.always,identity:e.identity,stored:e.stored,expression:this.transformNode(e.expression)}}transformDefaultValue(e){return{kind:"DefaultValueNode",defaultValue:this.transformNode(e.defaultValue)}}transformOn(e){return{kind:"OnNode",on:this.transformNode(e.on)}}transformSelectModifier(e){return{kind:"SelectModifierNode",modifier:e.modifier,rawModifier:this.transformNode(e.rawModifier),of:this.transformNodeList(e.of)}}transformCreateType(e){return{kind:"CreateTypeNode",name:this.transformNode(e.name),enum:this.transformNode(e.enum)}}transformDropType(e){return{kind:"DropTypeNode",name:this.transformNode(e.name),ifExists:e.ifExists}}transformExplain(e){return{kind:"ExplainNode",format:e.format,options:this.transformNode(e.options)}}transformSchemableIdentifier(e){return{kind:"SchemableIdentifierNode",schema:this.transformNode(e.schema),identifier:this.transformNode(e.identifier)}}transformAggregateFunction(e){return{kind:"AggregateFunctionNode",aggregated:this.transformNodeList(e.aggregated),distinct:e.distinct,orderBy:this.transformNode(e.orderBy),filter:this.transformNode(e.filter),func:e.func,over:this.transformNode(e.over)}}transformOver(e){return{kind:"OverNode",orderBy:this.transformNode(e.orderBy),partitionBy:this.transformNode(e.partitionBy)}}transformPartitionBy(e){return{kind:"PartitionByNode",items:this.transformNodeList(e.items)}}transformPartitionByItem(e){return{kind:"PartitionByItemNode",partitionBy:this.transformNode(e.partitionBy)}}transformBinaryOperation(e){return{kind:"BinaryOperationNode",leftOperand:this.transformNode(e.leftOperand),operator:this.transformNode(e.operator),rightOperand:this.transformNode(e.rightOperand)}}transformUnaryOperation(e){return{kind:"UnaryOperationNode",operator:this.transformNode(e.operator),operand:this.transformNode(e.operand)}}transformUsing(e){return{kind:"UsingNode",tables:this.transformNodeList(e.tables)}}transformFunction(e){return{kind:"FunctionNode",func:e.func,arguments:this.transformNodeList(e.arguments)}}transformCase(e){return{kind:"CaseNode",value:this.transformNode(e.value),when:this.transformNodeList(e.when),else:this.transformNode(e.else),isStatement:e.isStatement}}transformWhen(e){return{kind:"WhenNode",condition:this.transformNode(e.condition),result:this.transformNode(e.result)}}transformJSONReference(e){return{kind:"JSONReferenceNode",reference:this.transformNode(e.reference),traversal:this.transformNode(e.traversal)}}transformJSONPath(e){return{kind:"JSONPathNode",inOperator:this.transformNode(e.inOperator),pathLegs:this.transformNodeList(e.pathLegs)}}transformJSONPathLeg(e){return{kind:"JSONPathLegNode",type:e.type,value:e.value}}transformJSONOperatorChain(e){return{kind:"JSONOperatorChainNode",operator:this.transformNode(e.operator),values:this.transformNodeList(e.values)}}transformTuple(e){return{kind:"TupleNode",values:this.transformNodeList(e.values)}}transformMergeQuery(e){return{kind:"MergeQueryNode",into:this.transformNode(e.into),using:this.transformNode(e.using),whens:this.transformNodeList(e.whens),with:this.transformNode(e.with),top:this.transformNode(e.top),endModifiers:this.transformNodeList(e.endModifiers),output:this.transformNode(e.output)}}transformMatched(e){return{kind:"MatchedNode",not:e.not,bySource:e.bySource}}transformAddIndex(e){return{kind:"AddIndexNode",name:this.transformNode(e.name),columns:this.transformNodeList(e.columns),unique:e.unique,using:this.transformNode(e.using),ifNotExists:e.ifNotExists}}transformCast(e){return{kind:"CastNode",expression:this.transformNode(e.expression),dataType:this.transformNode(e.dataType)}}transformFetch(e){return{kind:"FetchNode",rowCount:this.transformNode(e.rowCount),modifier:e.modifier}}transformTop(e){return{kind:"TopNode",expression:e.expression,modifiers:e.modifiers}}transformOutput(e){return{kind:"OutputNode",selections:this.transformNodeList(e.selections)}}transformDataType(e){return e}transformSelectAll(e){return e}transformIdentifier(e){return e}transformValue(e){return e}transformPrimitiveValueList(e){return e}transformOperator(e){return e}transformDefaultInsertValue(e){return e}};var PM=c({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),Wc=class extends Ts{#e;#t=new Set;#r=new Set;constructor(e){super(),this.#e=e}transformNodeImpl(e){if(!this.#i(e))return super.transformNodeImpl(e);let r=this.#a(e);for(let a of r)this.#r.add(a);let i=this.#n(e);for(let a of i)this.#t.add(a);let n=super.transformNodeImpl(e);for(let a of i)this.#t.delete(a);for(let a of r)this.#r.delete(a);return n}transformSchemableIdentifier(e){let r=super.transformSchemableIdentifier(e);return r.schema||!this.#t.has(e.identifier.name)?r:{...r,schema:H.create(this.#e)}}transformReferences(e){let r=super.transformReferences(e);return r.table.table.schema?r:{...r,table:Xt.createWithSchema(this.#e,r.table.table.identifier.name)}}#i(e){return e.kind in PM}#n(e){let r=new Set;if("name"in e&&e.name&&At.is(e.name)&&this.#o(e.name,r),"from"in e&&e.from)for(let i of e.from.froms)this.#s(i,r);if("into"in e&&e.into&&this.#s(e.into,r),"table"in e&&e.table&&this.#s(e.table,r),"joins"in e&&e.joins)for(let i of e.joins)this.#s(i.table,r);return"using"in e&&e.using&&this.#s(e.using,r),r}#a(e){let r=new Set;return"with"in e&&e.with&&this.#u(e.with,r),r}#s(e,r){let i=Xt.is(e)?e:mt.is(e)&&Xt.is(e.node)?e.node:null;i&&this.#o(i.table,r)}#o(e,r){let i=e.identifier.name;!this.#t.has(i)&&!this.#r.has(i)&&r.add(i)}#u(e,r){for(let i of e.expressions){let n=i.name.table.table.identifier.name;this.#r.has(n)||r.add(n)}}};var hr=class{#e;constructor(e){this.#e=new Wc(e)}transformQuery(e){return this.#e.transformNode(e.node)}async transformResult(e){return e.result}};o();s();o();s();o();s();var fI=c({is(t){return t.kind==="MatchedNode"},create(t,e=!1){return c({kind:"MatchedNode",not:t,bySource:e})}});function ZN(t,e,r){return oi.create(vs([fI.create(!t.isMatched,t.bySource),...e&&e.length>0?[e.length===3&&r?Ze(e[0],e[1],e[2]):ge(e)]:[]],"and",!1))}function Cs(t){return Me(t)?Re.create([t],[]):xe(t)?t.toOperationNode():t}o();s();o();s();o();s();var fa=class{#e;#t;#r;constructor(){this.#e=new Promise((e,r)=>{this.#r=r,this.#t=e})}get promise(){return this.#e}resolve=e=>{this.#t&&this.#t(e)};reject=e=>{this.#r&&this.#r(e)}};o();s();var mI=new Set;function yI(t){mI.has(t)||(mI.add(t),console.log(t))}var jM=c([]),Rs=class{#e;constructor(e=jM){this.#e=e}get plugins(){return this.#e}transformQuery(e,r){for(let i of this.#e){let n=i.transformQuery({node:e,queryId:r});if(n.kind===e.kind)e=n;else throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${e.kind}`,`but it returned a ${n.kind}`].join(" "))}return e}async executeQuery(e,r){return await this.provideConnection(async i=>{let n=await i.executeQuery(e),a=await this.#t(n,r);return DM(n,a),a})}async*stream(e,r,i){let n=new fa,a=new fa;this.provideConnection(async l=>(n.resolve(l),await a.promise)).catch(l=>n.reject(l));let u=await n.promise;try{for await(let l of u.streamQuery(e,r))yield await this.#t(l,i)}finally{a.resolve()}}async#t(e,r){for(let i of this.#e)e=await i.transformResult({result:e,queryId:r});return e}};function DM(t,e){let{numAffectedRows:r}=t;r===void 0&&t.numUpdatedOrDeletedRows===void 0||r!==void 0&&e.numAffectedRows!==void 0||yI("kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.")}var e_=class t extends Rs{get adapter(){throw new Error("this query cannot be compiled to SQL")}compileQuery(){throw new Error("this query cannot be compiled to SQL")}provideConnection(){throw new Error("this query cannot be executed")}withConnectionProvider(){throw new Error("this query cannot have a connection provider")}withPlugin(e){return new t([...this.plugins,e])}withPlugins(e){return new t([...this.plugins,...e])}withPluginAtFront(e){return new t([e,...this.plugins])}withoutPlugins(){return new t([])}},Ri=new e_;o();s();var Lc=class{numChangedRows;constructor(e){this.numChangedRows=e}};var ma=class t{#e;constructor(e){this.#e=c(e)}modifyEnd(e){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,r){return new t({...this.#e,queryNode:j.cloneWithTop(this.#e.queryNode,pr(e,r))})}using(...e){return new ai({...this.#e,queryNode:tt.cloneWithUsing(this.#e.queryNode,He("Using",e))})}output(e){return new t({...this.#e,queryNode:j.cloneWithOutput(this.#e.queryNode,at(e))})}outputAll(e){return new t({...this.#e,queryNode:j.cloneWithOutput(this.#e.queryNode,yt(e))})}};D(ma,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var ai=class t{#e;constructor(e){this.#e=c(e)}modifyEnd(e){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,e.toOperationNode())})}top(e,r){return new t({...this.#e,queryNode:j.cloneWithTop(this.#e.queryNode,pr(e,r))})}whenMatched(){return this.#t([])}whenMatchedAnd(...e){return this.#t(e)}whenMatchedAndRef(e,r,i){return this.#t([e,r,i],!0)}#t(e,r){return new ya({...this.#e,queryNode:tt.cloneWithWhen(this.#e.queryNode,ZN({isMatched:!0},e,r))})}whenNotMatched(){return this.#r([])}whenNotMatchedAnd(...e){return this.#r(e)}whenNotMatchedAndRef(e,r,i){return this.#r([e,r,i],!0)}whenNotMatchedBySource(){return this.#r([],!1,!0)}whenNotMatchedBySourceAnd(...e){return this.#r(e,!1,!0)}whenNotMatchedBySourceAndRef(e,r,i){return this.#r([e,r,i],!0,!0)}output(e){return new t({...this.#e,queryNode:j.cloneWithOutput(this.#e.queryNode,at(e))})}outputAll(e){return new t({...this.#e,queryNode:j.cloneWithOutput(this.#e.queryNode,yt(e))})}#r(e,r=!1,i=!1){let n={...this.#e,queryNode:tt.cloneWithWhen(this.#e.queryNode,ZN({isMatched:!1,bySource:i},e,r))},a=i?ya:Bc;return new a(n)}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile(),r=await this.#e.executor.executeQuery(e,this.#e.queryId);return e.query.output&&this.#e.executor.adapter.supportsOutput?r.rows:[new Lc(r.numAffectedRows)]}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=er){let r=await this.executeTakeFirst();if(r===void 0)throw Rr(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}};D(ai,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");var ya=class{#e;constructor(e){this.#e=c(e)}thenDelete(){return new ai({...this.#e,queryNode:tt.cloneWithThen(this.#e.queryNode,Cs("delete"))})}thenDoNothing(){return new ai({...this.#e,queryNode:tt.cloneWithThen(this.#e.queryNode,Cs("do nothing"))})}thenUpdate(e){return new ai({...this.#e,queryNode:tt.cloneWithThen(this.#e.queryNode,Cs(e(new wn({queryId:this.#e.queryId,executor:Ri,queryNode:Tr.createWithoutTable()}))))})}thenUpdateSet(...e){return this.thenUpdate(r=>r.set(...e))}};D(ya,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var Bc=class{#e;constructor(e){this.#e=c(e)}thenDoNothing(){return new ai({...this.#e,queryNode:tt.cloneWithThen(this.#e.queryNode,Cs("do nothing"))})}thenInsertValues(e){let[r,i]=Cc(e);return new ai({...this.#e,queryNode:tt.cloneWithThen(this.#e.queryNode,Cs(et.cloneWith(et.createWithoutInto(),{columns:r,values:i})))})}};D(Bc,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var Ps=class t{#e;constructor(e){this.#e=c(e)}selectFrom(e){return Na({queryId:ue(),executor:this.#e.executor,queryNode:le.createFrom(Pr(e),this.#e.withNode)})}selectNoFrom(e){return Na({queryId:ue(),executor:this.#e.executor,queryNode:le.cloneWithSelections(le.create(this.#e.withNode),at(e))})}insertInto(e){return new qs({queryId:ue(),executor:this.#e.executor,queryNode:et.create(de(e),this.#e.withNode)})}replaceInto(e){return new qs({queryId:ue(),executor:this.#e.executor,queryNode:et.create(de(e),this.#e.withNode,!0)})}deleteFrom(e){return new da({queryId:ue(),executor:this.#e.executor,queryNode:Cr.create(Pr(e),this.#e.withNode)})}updateTable(e){return new wn({queryId:ue(),executor:this.#e.executor,queryNode:Tr.create(Pi(e),this.#e.withNode)})}mergeInto(e){return new ma({queryId:ue(),executor:this.#e.executor,queryNode:tt.create(t_(e),this.#e.withNode)})}with(e,r){let i=YN(e,r);return new t({...this.#e,withNode:this.#e.withNode?ha.cloneWithExpression(this.#e.withNode,i):ha.create(i)})}withRecursive(e,r){let i=YN(e,r);return new t({...this.#e,withNode:this.#e.withNode?ha.cloneWithExpression(this.#e.withNode,i):ha.create(i,{recursive:!0})})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new hr(e))})}};function dI(){return new Ps({executor:Ri})}function NI(t,e){return new aa({joinNode:Ai.create(t,Pi(e))})}function _I(){return new ua({overNode:oa.create()})}function He(t,e){if(e.length===3)return WM(t,e[0],e[1],e[2]);if(e.length===2)return MM(t,e[0],e[1]);throw new Error("not implemented")}function MM(t,e,r){return r(NI(t,e)).toOperationNode()}function WM(t,e,r,i){return Ai.createWithOn(t,Pi(e),Ze(r,"=",i))}o();s();var wI=c({is(t){return t.kind==="OffsetNode"},create(t){return c({kind:"OffsetNode",offset:t})}});o();s();o();s();var gI=c({is(t){return t.kind==="GroupByItemNode"},create(t){return c({kind:"GroupByItemNode",groupBy:t})}});function bI(t){return t=Ce(t)?t(dr()):t,si(t).map(gI.create)}o();s();o();s();var kc=c({is(t){return t.kind==="SetOperationNode"},create(t,e,r){return c({kind:"SetOperationNode",operator:t,expression:e,all:r})}});function gn(t,e,r){return Ce(e)&&(e=e(Uc())),ht(e)||(e=[e]),e.map(i=>kc.create(t,Ct(i),r))}o();s();var fe=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new _a(this,e)}or(...e){return new r_(lr.create(this.#e,ge(e)))}and(...e){return new i_(Tt.create(this.#e,ge(e)))}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e}},_a=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return mt.create(this.#e.toOperationNode(),xe(this.#t)?this.#t.toOperationNode():H.create(this.#t))}},r_=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new _a(this,e)}or(...e){return new t(lr.create(this.#e,ge(e)))}$castTo(){return new t(this.#e)}toOperationNode(){return Ar.create(this.#e)}},i_=class t{#e;constructor(e){this.#e=e}get expressionType(){}as(e){return new _a(this,e)}and(...e){return new t(Tt.create(this.#e,ge(e)))}$castTo(){return new t(this.#e)}toOperationNode(){return Ar.create(this.#e)}};o();s();o();s();var OI={is(t){return t.kind==="FetchNode"},create(t,e){return{kind:"FetchNode",rowCount:ot.create(t),modifier:e}}};function EI(t,e){if(!qi(t)&&!ws(t))throw new Error(`Invalid fetch row count: ${t}`);if(!LM(e))throw new Error(`Invalid fetch modifier: ${e}`);return OI.create(t,e)}function LM(t){return t==="only"||t==="with ties"}var Fc=class t{#e;constructor(e){this.#e=c(e)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...e){return new t({...this.#e,queryNode:j.cloneWithWhere(this.#e.queryNode,ge(e))})}whereRef(e,r,i){return new t({...this.#e,queryNode:j.cloneWithWhere(this.#e.queryNode,Ze(e,r,i))})}having(...e){return new t({...this.#e,queryNode:le.cloneWithHaving(this.#e.queryNode,ge(e))})}havingRef(e,r,i){return new t({...this.#e,queryNode:le.cloneWithHaving(this.#e.queryNode,Ze(e,r,i))})}select(e){return new t({...this.#e,queryNode:le.cloneWithSelections(this.#e.queryNode,at(e))})}distinctOn(e){return new t({...this.#e,queryNode:le.cloneWithDistinctOn(this.#e.queryNode,si(e))})}modifyFront(e){return new t({...this.#e,queryNode:le.cloneWithFrontModifier(this.#e.queryNode,qr.createWithExpression(e.toOperationNode()))})}modifyEnd(e){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,qr.createWithExpression(e.toOperationNode()))})}distinct(){return new t({...this.#e,queryNode:le.cloneWithFrontModifier(this.#e.queryNode,qr.create("Distinct"))})}forUpdate(e){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,qr.create("ForUpdate",e?ra(e).map(de):void 0))})}forShare(e){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,qr.create("ForShare",e?ra(e).map(de):void 0))})}forKeyShare(e){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,qr.create("ForKeyShare",e?ra(e).map(de):void 0))})}forNoKeyUpdate(e){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,qr.create("ForNoKeyUpdate",e?ra(e).map(de):void 0))})}skipLocked(){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,qr.create("SkipLocked"))})}noWait(){return new t({...this.#e,queryNode:j.cloneWithEndModifier(this.#e.queryNode,qr.create("NoWait"))})}selectAll(e){return new t({...this.#e,queryNode:le.cloneWithSelections(this.#e.queryNode,yt(e))})}innerJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("InnerJoin",e))})}leftJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("LeftJoin",e))})}rightJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("RightJoin",e))})}fullJoin(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("FullJoin",e))})}innerJoinLateral(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("LateralInnerJoin",e))})}leftJoinLateral(...e){return new t({...this.#e,queryNode:j.cloneWithJoin(this.#e.queryNode,He("LateralLeftJoin",e))})}orderBy(...e){return new t({...this.#e,queryNode:le.cloneWithOrderByItems(this.#e.queryNode,xr(e))})}groupBy(e){return new t({...this.#e,queryNode:le.cloneWithGroupByItems(this.#e.queryNode,bI(e))})}limit(e){return new t({...this.#e,queryNode:le.cloneWithLimit(this.#e.queryNode,xs.create(Ne(e)))})}offset(e){return new t({...this.#e,queryNode:le.cloneWithOffset(this.#e.queryNode,wI.create(Ne(e)))})}fetch(e,r="only"){return new t({...this.#e,queryNode:le.cloneWithFetch(this.#e.queryNode,EI(e,r))})}top(e,r){return new t({...this.#e,queryNode:j.cloneWithTop(this.#e.queryNode,pr(e,r))})}union(e){return new t({...this.#e,queryNode:le.cloneWithSetOperations(this.#e.queryNode,gn("union",e,!1))})}unionAll(e){return new t({...this.#e,queryNode:le.cloneWithSetOperations(this.#e.queryNode,gn("union",e,!0))})}intersect(e){return new t({...this.#e,queryNode:le.cloneWithSetOperations(this.#e.queryNode,gn("intersect",e,!1))})}intersectAll(e){return new t({...this.#e,queryNode:le.cloneWithSetOperations(this.#e.queryNode,gn("intersect",e,!0))})}except(e){return new t({...this.#e,queryNode:le.cloneWithSetOperations(this.#e.queryNode,gn("except",e,!1))})}exceptAll(e){return new t({...this.#e,queryNode:le.cloneWithSetOperations(this.#e.queryNode,gn("except",e,!0))})}as(e){return new zc(this,e)}clearSelect(){return new t({...this.#e,queryNode:le.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new t({...this.#e,queryNode:j.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new t({...this.#e,queryNode:le.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new t({...this.#e,queryNode:le.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new t({...this.#e,queryNode:le.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new t({...this.#e,queryNode:le.cloneWithoutGroupBy(this.#e.queryNode)})}$call(e){return e(this)}$if(e,r){return e?r(this):new t({...this.#e})}$castTo(){return new t(this.#e)}$narrowType(){return new t(this.#e)}$assertType(){return new t(this.#e)}$asTuple(){return new fe(this.toOperationNode())}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){let e=this.compile();return(await this.#e.executor.executeQuery(e,this.#e.queryId)).rows}async executeTakeFirst(){let[e]=await this.execute();return e}async executeTakeFirstOrThrow(e=er){let r=await this.executeTakeFirst();if(r===void 0)throw Rr(e)?new e(this.toOperationNode()):e(this.toOperationNode());return r}async*stream(e=100){let r=this.compile(),i=this.#e.executor.stream(r,e,this.#e.queryId);for await(let n of i)yield*n.rows}async explain(e,r){return await new t({...this.#e,queryNode:j.cloneWithExplain(this.#e.queryNode,e,r)}).execute()}};D(Fc,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");function Na(t){return new Fc(t)}var zc=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return mt.create(this.#e.toOperationNode(),H.create(this.#t))}};D(zc,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.");o();s();o();s();var jr=c({is(t){return t.kind==="AggregateFunctionNode"},create(t,e=[]){return c({kind:"AggregateFunctionNode",func:t,aggregated:e})},cloneWithDistinct(t){return c({...t,distinct:!0})},cloneWithOrderBy(t,e){return c({...t,orderBy:t.orderBy?Zt.cloneWithItems(t.orderBy,e):Zt.create(e)})},cloneWithFilter(t,e){return c({...t,filter:t.filter?ut.cloneWithOperation(t.filter,"And",e):ut.create(e)})},cloneWithOrFilter(t,e){return c({...t,filter:t.filter?ut.cloneWithOperation(t.filter,"Or",e):ut.create(e)})},cloneWithOver(t,e){return c({...t,over:e})}});o();s();var n_=c({is(t){return t.kind==="FunctionNode"},create(t,e){return c({kind:"FunctionNode",func:t,arguments:e})}});o();s();var bn=class t{#e;constructor(e){this.#e=c(e)}get expressionType(){}as(e){return new s_(this,e)}distinct(){return new t({...this.#e,aggregateFunctionNode:jr.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(e,r){return new t({...this.#e,aggregateFunctionNode:jr.cloneWithOrderBy(this.#e.aggregateFunctionNode,xr([e,r]))})}filterWhere(...e){return new t({...this.#e,aggregateFunctionNode:jr.cloneWithFilter(this.#e.aggregateFunctionNode,ge(e))})}filterWhereRef(e,r,i){return new t({...this.#e,aggregateFunctionNode:jr.cloneWithFilter(this.#e.aggregateFunctionNode,Ze(e,r,i))})}over(e){let r=_I();return new t({...this.#e,aggregateFunctionNode:jr.cloneWithOver(this.#e.aggregateFunctionNode,(e?e(r):r).toOperationNode())})}$call(e){return e(this)}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}};D(bn,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");var s_=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return mt.create(this.#e.toOperationNode(),H.create(this.#t))}};function Qc(){let t=(r,i)=>new fe(n_.create(r,si(i??[]))),e=(r,i)=>new bn({aggregateFunctionNode:jr.create(r,i?si(i):void 0)});return Object.assign(t,{agg:e,avg(r){return e("avg",[r])},coalesce(...r){return t("coalesce",r)},count(r){return e("count",[r])},countAll(r){return new bn({aggregateFunctionNode:jr.create("count",yt(r))})},max(r){return e("max",[r])},min(r){return e("min",[r])},sum(r){return e("sum",[r])},any(r){return t("any",[r])},jsonAgg(r){return new bn({aggregateFunctionNode:jr.create("json_agg",[Me(r)?de(r):r.toOperationNode()])})},toJson(r){return new fe(n_.create("to_json",[Me(r)?de(r):r.toOperationNode()]))}})}o();s();o();s();var SI=c({is(t){return t.kind==="UnaryOperationNode"},create(t,e){return c({kind:"UnaryOperationNode",operator:t,operand:e})}});function vI(t,e){return SI.create(kt.create(t),st(e))}o();s();o();s();var Ft=c({is(t){return t.kind==="CaseNode"},create(t){return c({kind:"CaseNode",value:t})},cloneWithWhen(t,e){return c({...t,when:c(t.when?[...t.when,e]:[e])})},cloneWithThen(t,e){return c({...t,when:t.when?c([...t.when.slice(0,-1),oi.cloneWithResult(t.when[t.when.length-1],e)]):void 0})},cloneWith(t,e){return c({...t,...e})}});var js=class{#e;constructor(e){this.#e=c(e)}when(...e){return new $c({...this.#e,node:Ft.cloneWithWhen(this.#e.node,oi.create(ge(e)))})}},$c=class{#e;constructor(e){this.#e=c(e)}then(e){return new o_({...this.#e,node:Ft.cloneWithThen(this.#e.node,xc(e)?sa(e):Ne(e))})}},o_=class{#e;constructor(e){this.#e=c(e)}when(...e){return new $c({...this.#e,node:Ft.cloneWithWhen(this.#e.node,oi.create(ge(e)))})}else(e){return new a_({...this.#e,node:Ft.cloneWith(this.#e.node,{else:xc(e)?sa(e):Ne(e)})})}end(){return new fe(Ft.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new fe(Ft.cloneWith(this.#e.node,{isStatement:!0}))}},a_=class{#e;constructor(e){this.#e=c(e)}end(){return new fe(Ft.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new fe(Ft.cloneWith(this.#e.node,{isStatement:!0}))}};o();s();o();s();var u_=c({is(t){return t.kind==="JSONPathLegNode"},create(t,e){return c({kind:"JSONPathLegNode",type:t,value:e})}});var Ds=class{#e;constructor(e){this.#e=e}at(e){return this.#t("ArrayLocation",e)}key(e){return this.#t("Member",e)}#t(e,r){return Os.is(this.#e)?new Vc(Os.cloneWithTraversal(this.#e,Ci.is(this.#e.traversal)?Ci.cloneWithLeg(this.#e.traversal,u_.create(e,r)):Ic.cloneWithValue(this.#e.traversal,ot.createImmediate(r)))):new Vc(Ci.cloneWithLeg(this.#e,u_.create(e,r)))}},Vc=class t extends Ds{#e;constructor(e){super(e),this.#e=e}get expressionType(){}as(e){return new c_(this,e)}$castTo(){return new t(this.#e)}$notNull(){return new t(this.#e)}toOperationNode(){return this.#e}},c_=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}toOperationNode(){return mt.create(this.#e.toOperationNode(),xe(this.#t)?this.#t.toOperationNode():H.create(this.#t))}};o();s();var l_=c({is(t){return t.kind==="TupleNode"},create(t){return c({kind:"TupleNode",values:c(t)})}});o();s();o();s();var BM=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],kM=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],II=c({is(t){return t.kind==="DataTypeNode"},create(t){return c({kind:"DataTypeNode",dataType:t})}});function qI(t){return!!(BM.includes(t)||kM.some(e=>e.test(t)))}function fr(t){if(xe(t))return t.toOperationNode();if(qI(t))return II.create(t);throw new Error(`invalid column data type ${JSON.stringify(t)}`)}o();s();var xI=c({is(t){return t.kind==="CastNode"},create(t,e){return c({kind:"CastNode",expression:t,dataType:e})}});function Uc(t=Ri){function e(n,a,u){return new fe(Ac(n,a,u))}function r(n,a){return new fe(vI(n,a))}let i=Object.assign(e,{fn:void 0,eb:void 0,selectFrom(n){return Na({queryId:ue(),executor:t,queryNode:le.createFrom(Pr(n))})},case(n){return new js({node:Ft.create(Bt(n)?void 0:st(n))})},ref(n,a){return Bt(a)?new fe(Ut(n)):new Ds(Hv(n,a))},jsonPath(){return new Ds(Ci.create())},table(n){return new fe(de(n))},val(n){return new fe(Ne(n))},refTuple(...n){return new fe(l_.create(n.map(st)))},tuple(...n){return new fe(l_.create(n.map(Ne)))},lit(n){return new fe(sa(n))},unary:r,not(n){return r("not",n)},exists(n){return r("exists",n)},neg(n){return r("-",n)},between(n,a,u){return new fe(Ti.create(st(n),kt.create("between"),Tt.create(Ne(a),Ne(u))))},betweenSymmetric(n,a,u){return new fe(Ti.create(st(n),kt.create("between symmetric"),Tt.create(Ne(a),Ne(u))))},and(n){return ht(n)?new fe(vs(n,"and")):new fe(FN(n,"and"))},or(n){return ht(n)?new fe(vs(n,"or")):new fe(FN(n,"or"))},parens(...n){let a=ge(n);return Ar.is(a)?new fe(a):new fe(Ar.create(a))},cast(n,a){return new fe(xI.create(st(n),fr(a)))},withSchema(n){return Uc(t.withPluginAtFront(new hr(n)))}});return i.fn=Qc(),i.eb=i,i}function dr(t){return Uc()}function Ct(t){if(xe(t))return t.toOperationNode();if(Ce(t))return t(dr()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(t)}`)}function Tc(t){if(xe(t))return t.toOperationNode();if(Ce(t))return t(dr()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(t)}`)}function ni(t){return Qv(t)||$v(t)||Ce(t)}function Pr(t){return ht(t)?t.map(e=>Pi(e)):[Pi(t)]}function Pi(t){return Me(t)?t_(t):Tc(t)}function t_(t){let e=" as ";if(t.includes(e)){let[r,i]=t.split(e).map(AI);return mt.create(de(r),H.create(i))}else return de(t)}function de(t){let e=".";if(t.includes(e)){let[r,i]=t.split(e).map(AI);return Xt.createWithSchema(r,i)}else return Xt.create(t)}function AI(t){return t.trim()}o();s();o();s();var d_=c({is(t){return t.kind==="AddColumnNode"},create(t){return c({kind:"AddColumnNode",column:t})}});o();s();var Oe=c({is(t){return t.kind==="ColumnDefinitionNode"},create(t,e){return c({kind:"ColumnDefinitionNode",column:ie.create(t),dataType:e})},cloneWithFrontModifier(t,e){return c({...t,frontModifiers:t.frontModifiers?c([...t.frontModifiers,e]):[e]})},cloneWithEndModifier(t,e){return c({...t,endModifiers:t.endModifiers?c([...t.endModifiers,e]):[e]})},cloneWith(t,e){return c({...t,...e})}});o();s();var p_=c({is(t){return t.kind==="DropColumnNode"},create(t){return c({kind:"DropColumnNode",column:ie.create(t)})}});o();s();var h_=c({is(t){return t.kind==="RenameColumnNode"},create(t,e){return c({kind:"RenameColumnNode",column:ie.create(t),renameTo:ie.create(e)})}});o();s();o();s();var Ms=c({is(t){return t.kind==="CheckConstraintNode"},create(t,e){return c({kind:"CheckConstraintNode",expression:t,name:e?H.create(e):void 0})}});o();s();var TI=["no action","restrict","cascade","set null","set default"],Ws=c({is(t){return t.kind==="ReferencesNode"},create(t,e){return c({kind:"ReferencesNode",table:t,columns:c([...e])})},cloneWithOnDelete(t,e){return c({...t,onDelete:e})},cloneWithOnUpdate(t,e){return c({...t,onUpdate:e})}});o();s();function Gc(t){return xe(t)?t.toOperationNode():ot.createImmediate(t)}o();s();var wa=c({is(t){return t.kind==="GeneratedNode"},create(t){return c({kind:"GeneratedNode",...t})},createWithExpression(t){return c({kind:"GeneratedNode",always:!0,expression:t})},cloneWith(t,e){return c({...t,...e})}});o();s();var CI=c({is(t){return t.kind==="DefaultValueNode"},create(t){return c({kind:"DefaultValueNode",defaultValue:t})}});o();s();function Ls(t){if(TI.includes(t))return t;throw new Error(`invalid OnModifyForeignAction ${t}`)}var Dr=class t{#e;constructor(e){this.#e=e}autoIncrement(){return new t(Oe.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new t(Oe.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new t(Oe.cloneWith(this.#e,{primaryKey:!0}))}references(e){let r=Ut(e);if(!r.table||gs.is(r.column))throw new Error(`invalid call references('${e}'). The reference must have format table.column or schema.table.column`);return new t(Oe.cloneWith(this.#e,{references:Ws.create(r.table,[r.column])}))}onDelete(e){if(!this.#e.references)throw new Error("on delete constraint can only be added for foreign keys");return new t(Oe.cloneWith(this.#e,{references:Ws.cloneWithOnDelete(this.#e.references,Ls(e))}))}onUpdate(e){if(!this.#e.references)throw new Error("on update constraint can only be added for foreign keys");return new t(Oe.cloneWith(this.#e,{references:Ws.cloneWithOnUpdate(this.#e.references,Ls(e))}))}unique(){return new t(Oe.cloneWith(this.#e,{unique:!0}))}notNull(){return new t(Oe.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new t(Oe.cloneWith(this.#e,{unsigned:!0}))}defaultTo(e){return new t(Oe.cloneWith(this.#e,{defaultTo:CI.create(Gc(e))}))}check(e){return new t(Oe.cloneWith(this.#e,{check:Ms.create(e.toOperationNode())}))}generatedAlwaysAs(e){return new t(Oe.cloneWith(this.#e,{generated:wa.createWithExpression(e.toOperationNode())}))}generatedAlwaysAsIdentity(){return new t(Oe.cloneWith(this.#e,{generated:wa.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new t(Oe.cloneWith(this.#e,{generated:wa.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error("stored() can only be called after generatedAlwaysAs");return new t(Oe.cloneWith(this.#e,{generated:wa.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(e){return new t(Oe.cloneWithFrontModifier(this.#e,e.toOperationNode()))}nullsNotDistinct(){return new t(Oe.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new t(Oe.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(e){return new t(Oe.cloneWithEndModifier(this.#e,e.toOperationNode()))}$call(e){return e(this)}toOperationNode(){return this.#e}};D(Dr,"don't await ColumnDefinitionBuilder instances directly.");o();s();var f_=c({is(t){return t.kind==="ModifyColumnNode"},create(t){return c({kind:"ModifyColumnNode",column:t})}});o();s();o();s();var On=c({is(t){return t.kind==="ForeignKeyConstraintNode"},create(t,e,r,i){return c({kind:"ForeignKeyConstraintNode",columns:t,references:Ws.create(e,r),name:i?H.create(i):void 0})},cloneWith(t,e){return c({...t,...e})}});var En=class t{#e;constructor(e){this.#e=e}onDelete(e){return new t(On.cloneWith(this.#e,{onDelete:Ls(e)}))}onUpdate(e){return new t(On.cloneWith(this.#e,{onUpdate:Ls(e)}))}$call(e){return e(this)}toOperationNode(){return this.#e}};D(En,"don't await ForeignKeyConstraintBuilder instances directly.");o();s();var Bs=c({is(t){return t.kind==="AddConstraintNode"},create(t){return c({kind:"AddConstraintNode",constraint:t})}});o();s();var ks=c({is(t){return t.kind==="UniqueConstraintNode"},create(t,e,r){return c({kind:"UniqueConstraintNode",columns:c(t.map(ie.create)),name:e?H.create(e):void 0,nullsNotDistinct:r})},cloneWith(t,e){return c({...t,...e})}});o();s();var Us=c({is(t){return t.kind==="DropConstraintNode"},create(t){return c({kind:"DropConstraintNode",constraintName:H.create(t)})},cloneWith(t,e){return c({...t,...e})}});o();s();o();s();var Fs=c({is(t){return t.kind==="AlterColumnNode"},create(t,e,r){return c({kind:"AlterColumnNode",column:ie.create(t),[e]:r})}});var zs=class{#e;constructor(e){this.#e=e}setDataType(e){return new ji(Fs.create(this.#e,"dataType",fr(e)))}setDefault(e){return new ji(Fs.create(this.#e,"setDefault",Gc(e)))}dropDefault(){return new ji(Fs.create(this.#e,"dropDefault",!0))}setNotNull(){return new ji(Fs.create(this.#e,"setNotNull",!0))}dropNotNull(){return new ji(Fs.create(this.#e,"dropNotNull",!0))}$call(e){return e(this)}};D(zs,"don't await AlterColumnBuilder instances");var ji=class{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}};D(ji,"don't await AlteredColumnBuilder instances");o();s();var Mr=class{#e;constructor(e){this.#e=c(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(Mr,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`");o();s();var ga=class t{#e;constructor(e){this.#e=c(e)}onDelete(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(e)})}onUpdate(e){return new t({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(e)})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(ae.cloneWithTableProps(this.#e.node,{addConstraint:Bs.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(ga,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`");o();s();var ba=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{dropConstraint:Us.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new t({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{dropConstraint:Us.cloneWith(this.#e.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new t({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{dropConstraint:Us.cloneWith(this.#e.node.dropConstraint,{modifier:"restrict"})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(ba,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`");o();s();var Jc=c({is(t){return t.kind==="PrimaryKeyConstraintNode"},create(t,e){return c({kind:"PrimaryKeyConstraintNode",columns:c(t.map(ie.create)),name:e?H.create(e):void 0})}});o();s();var Di=c({is(t){return t.kind==="AddIndexNode"},create(t){return c({kind:"AddIndexNode",name:H.create(t)})},cloneWith(t,e){return c({...t,...e})},cloneWithColumns(t,e){return c({...t,columns:[...t.columns||[],...e]})}});o();s();var Oa=class t{#e;constructor(e){this.#e=c(e)}unique(){return new t({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{addIndex:Di.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(e){return new t({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{addIndex:Di.cloneWithColumns(this.#e.node.addIndex,[Es(e)])})})}columns(e){return new t({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{addIndex:Di.cloneWithColumns(this.#e.node.addIndex,e.map(Es))})})}expression(e){return new t({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{addIndex:Di.cloneWithColumns(this.#e.node.addIndex,[e.toOperationNode()])})})}using(e){return new t({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{addIndex:Di.cloneWith(this.#e.node.addIndex,{using:Re.createWithSql(e)})})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(Oa,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`");o();s();var Sn=class t{#e;constructor(e){this.#e=e}toOperationNode(){return this.#e}nullsNotDistinct(){return new t(ks.cloneWith(this.#e,{nullsNotDistinct:!0}))}};D(Sn,"don't await UniqueConstraintNodeBuilder instances directly.");var Ea=class{#e;constructor(e){this.#e=c(e)}renameTo(e){return new Mr({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{renameTo:de(e)})})}setSchema(e){return new Mr({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{setSchema:H.create(e)})})}alterColumn(e,r){let i=r(new zs(e));return new Mi({...this.#e,node:ae.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new Mi({...this.#e,node:ae.cloneWithColumnAlteration(this.#e.node,p_.create(e))})}renameColumn(e,r){return new Mi({...this.#e,node:ae.cloneWithColumnAlteration(this.#e.node,h_.create(e,r))})}addColumn(e,r,i=Ir){let n=i(new Dr(Oe.create(e,fr(r))));return new Mi({...this.#e,node:ae.cloneWithColumnAlteration(this.#e.node,d_.create(n.toOperationNode()))})}modifyColumn(e,r,i=Ir){let n=i(new Dr(Oe.create(e,fr(r))));return new Mi({...this.#e,node:ae.cloneWithColumnAlteration(this.#e.node,f_.create(n.toOperationNode()))})}addUniqueConstraint(e,r,i=Ir){let n=i(new Sn(ks.create(r,e)));return new Mr({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{addConstraint:Bs.create(n.toOperationNode())})})}addCheckConstraint(e,r){return new Mr({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{addConstraint:Bs.create(Ms.create(r.toOperationNode(),e))})})}addForeignKeyConstraint(e,r,i,n){return new ga({...this.#e,constraintBuilder:new En(On.create(r.map(ie.create),de(i),n.map(ie.create),e))})}addPrimaryKeyConstraint(e,r){return new Mr({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{addConstraint:Bs.create(Jc.create(r,e))})})}dropConstraint(e){return new ba({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{dropConstraint:Us.create(e)})})}addIndex(e){return new Oa({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{addIndex:Di.create(e)})})}dropIndex(e){return new Mr({...this.#e,node:ae.cloneWithTableProps(this.#e.node,{dropIndex:xi.create(e)})})}$call(e){return e(this)}};D(Ea,"don't await AlterTableBuilder instances");var Mi=class t{#e;constructor(e){this.#e=c(e)}alterColumn(e,r){let i=r(new zs(e));return new t({...this.#e,node:ae.cloneWithColumnAlteration(this.#e.node,i.toOperationNode())})}dropColumn(e){return new t({...this.#e,node:ae.cloneWithColumnAlteration(this.#e.node,p_.create(e))})}renameColumn(e,r){return new t({...this.#e,node:ae.cloneWithColumnAlteration(this.#e.node,h_.create(e,r))})}addColumn(e,r,i=Ir){let n=i(new Dr(Oe.create(e,fr(r))));return new t({...this.#e,node:ae.cloneWithColumnAlteration(this.#e.node,d_.create(n.toOperationNode()))})}modifyColumn(e,r,i=Ir){let n=i(new Dr(Oe.create(e,fr(r))));return new t({...this.#e,node:ae.cloneWithColumnAlteration(this.#e.node,f_.create(n.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(Mi,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`");o();s();o();s();var Qs=class extends Ts{transformValue(e){return{...super.transformValue(e),immediate:!0}}};var Sa=class t{#e;constructor(e){this.#e=c(e)}ifNotExists(){return new t({...this.#e,node:cr.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new t({...this.#e,node:cr.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new t({...this.#e,node:cr.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(e){return new t({...this.#e,node:cr.cloneWith(this.#e.node,{table:de(e)})})}column(e){return new t({...this.#e,node:cr.cloneWithColumns(this.#e.node,[Es(e)])})}columns(e){return new t({...this.#e,node:cr.cloneWithColumns(this.#e.node,e.map(Es))})}expression(e){return new t({...this.#e,node:cr.cloneWithColumns(this.#e.node,[e.toOperationNode()])})}using(e){return new t({...this.#e,node:cr.cloneWith(this.#e.node,{using:Re.createWithSql(e)})})}where(...e){let r=new Qs;return new t({...this.#e,node:j.cloneWithWhere(this.#e.node,r.transformNode(ge(e)))})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(Sa,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`");o();s();var va=class t{#e;constructor(e){this.#e=c(e)}ifNotExists(){return new t({...this.#e,node:bc.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(va,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`");o();s();o();s();function RI(t){if(zv.includes(t))return t;throw new Error(`invalid OnCommitAction ${t}`)}var Ia=class t{#e;constructor(e){this.#e=c(e)}temporary(){return new t({...this.#e,node:ft.cloneWith(this.#e.node,{temporary:!0})})}onCommit(e){return new t({...this.#e,node:ft.cloneWith(this.#e.node,{onCommit:RI(e)})})}ifNotExists(){return new t({...this.#e,node:ft.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(e,r,i=Ir){let n=i(new Dr(Oe.create(e,fr(r))));return new t({...this.#e,node:ft.cloneWithColumn(this.#e.node,n.toOperationNode())})}addPrimaryKeyConstraint(e,r){return new t({...this.#e,node:ft.cloneWithConstraint(this.#e.node,Jc.create(r,e))})}addUniqueConstraint(e,r,i=Ir){let n=i(new Sn(ks.create(r,e)));return new t({...this.#e,node:ft.cloneWithConstraint(this.#e.node,n.toOperationNode())})}addCheckConstraint(e,r){return new t({...this.#e,node:ft.cloneWithConstraint(this.#e.node,Ms.create(r.toOperationNode(),e))})}addForeignKeyConstraint(e,r,i,n,a=Ir){let u=a(new En(On.create(r.map(ie.create),de(i),n.map(ie.create),e)));return new t({...this.#e,node:ft.cloneWithConstraint(this.#e.node,u.toOperationNode())})}modifyFront(e){return new t({...this.#e,node:ft.cloneWithFrontModifier(this.#e.node,e.toOperationNode())})}modifyEnd(e){return new t({...this.#e,node:ft.cloneWithEndModifier(this.#e.node,e.toOperationNode())})}as(e){return new t({...this.#e,node:ft.cloneWith(this.#e.node,{selectQuery:Ct(e)})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(Ia,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`");o();s();var qa=class t{#e;constructor(e){this.#e=c(e)}on(e){return new t({...this.#e,node:xi.cloneWith(this.#e.node,{table:de(e)})})}ifExists(){return new t({...this.#e,node:xi.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:xi.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(qa,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`");o();s();var xa=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:ia.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:ia.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(xa,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`");o();s();var Aa=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:na.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:na.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(Aa,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`");o();s();o();s();var mr=c({is(t){return t.kind==="CreateViewNode"},create(t){return c({kind:"CreateViewNode",name:At.create(t)})},cloneWith(t,e){return c({...t,...e})}});o();s();var Hc=class{#e=new Qs;transformQuery(e){return this.#e.transformNode(e.node)}transformResult(e){return Promise.resolve(e.result)}};var Ta=class t{#e;constructor(e){this.#e=c(e)}temporary(){return new t({...this.#e,node:mr.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new t({...this.#e,node:mr.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new t({...this.#e,node:mr.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new t({...this.#e,node:mr.cloneWith(this.#e.node,{orReplace:!0})})}columns(e){return new t({...this.#e,node:mr.cloneWith(this.#e.node,{columns:e.map(BN)})})}as(e){let r=e.withPlugin(new Hc).toOperationNode();return new t({...this.#e,node:mr.cloneWith(this.#e.node,{as:r})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(Ta,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`");o();s();o();s();var $s=c({is(t){return t.kind==="DropViewNode"},create(t){return c({kind:"DropViewNode",name:At.create(t)})},cloneWith(t,e){return c({...t,...e})}});var Ca=class t{#e;constructor(e){this.#e=c(e)}materialized(){return new t({...this.#e,node:$s.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new t({...this.#e,node:$s.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new t({...this.#e,node:$s.cloneWith(this.#e.node,{cascade:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(Ca,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`");o();s();o();s();var Kc=c({is(t){return t.kind==="CreateTypeNode"},create(t){return c({kind:"CreateTypeNode",name:t})},cloneWithEnum(t,e){return c({...t,enum:Ss.create(e.map(r=>ot.createImmediate(r)))})}});var Ra=class t{#e;constructor(e){this.#e=c(e)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(e){return new t({...this.#e,node:Kc.cloneWithEnum(this.#e.node,e)})}$call(e){return e(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(Ra,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`");o();s();o();s();var Yc=c({is(t){return t.kind==="DropTypeNode"},create(t){return c({kind:"DropTypeNode",name:t})},cloneWith(t,e){return c({...t,...e})}});var Pa=class t{#e;constructor(e){this.#e=c(e)}ifExists(){return new t({...this.#e,node:Yc.cloneWith(this.#e.node,{ifExists:!0})})}$call(e){return e(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}};D(Pa,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`");o();s();function m_(t){let e=".";if(t.includes(e)){let r=t.split(e).map(UM);if(r.length===2)return At.createWithSchema(r[0],r[1]);throw new Error(`invalid schemable identifier ${t}`)}else return At.create(t)}function UM(t){return t.trim()}var Xc=class t{#e;constructor(e){this.#e=e}createTable(e){return new Ia({queryId:ue(),executor:this.#e,node:ft.create(de(e))})}dropTable(e){return new Aa({queryId:ue(),executor:this.#e,node:na.create(de(e))})}createIndex(e){return new Sa({queryId:ue(),executor:this.#e,node:cr.create(e)})}dropIndex(e){return new qa({queryId:ue(),executor:this.#e,node:xi.create(e)})}createSchema(e){return new va({queryId:ue(),executor:this.#e,node:bc.create(e)})}dropSchema(e){return new xa({queryId:ue(),executor:this.#e,node:ia.create(e)})}alterTable(e){return new Ea({queryId:ue(),executor:this.#e,node:ae.create(de(e))})}createView(e){return new Ta({queryId:ue(),executor:this.#e,node:mr.create(e)})}dropView(e){return new Ca({queryId:ue(),executor:this.#e,node:$s.create(e)})}createType(e){return new Ra({queryId:ue(),executor:this.#e,node:Kc.create(m_(e))})}dropType(e){return new Pa({queryId:ue(),executor:this.#e,node:Yc.create(m_(e))})}withPlugin(e){return new t(this.#e.withPlugin(e))}withoutPlugins(){return new t(this.#e.withoutPlugins())}withSchema(e){return new t(this.#e.withPluginAtFront(new hr(e)))}};o();s();var Zc=class{ref(e){return new Ec(e)}};o();s();var el=class{#e;constructor(e){this.#e=e}async provideConnection(e){let r=await this.#e.acquireConnection();try{return await e(r)}finally{await this.#e.releaseConnection(r)}}};o();s();var tl=class t extends Rs{#e;#t;#r;constructor(e,r,i,n=[]){super(n),this.#e=e,this.#t=r,this.#r=i}get adapter(){return this.#t}compileQuery(e){return this.#e.compileQuery(e)}provideConnection(e){return this.#r.provideConnection(e)}withPlugins(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,...e])}withPlugin(e){return new t(this.#e,this.#t,this.#r,[...this.plugins,e])}withPluginAtFront(e){return new t(this.#e,this.#t,this.#r,[e,...this.plugins])}withConnectionProvider(e){return new t(this.#e,this.#t,e,[...this.plugins])}withoutPlugins(){return new t(this.#e,this.#t,this.#r,[])}};o();s();o();s();function y_(){return typeof performance<"u"&&Ce(performance.now)?performance.now():Date.now()}var rl=class{#e;#t;#r;#i;#n;#a=new WeakSet;constructor(e,r){this.#i=!1,this.#e=e,this.#t=r}async init(){if(this.#n)throw new Error("driver has already been destroyed");this.#r||(this.#r=this.#e.init().then(()=>{this.#i=!0}).catch(e=>(this.#r=void 0,Promise.reject(e)))),await this.#r}async acquireConnection(){if(this.#n)throw new Error("driver has already been destroyed");this.#i||await this.init();let e=await this.#e.acquireConnection();return this.#a.has(e)||(this.#s()&&this.#o(e),this.#a.add(e)),e}async releaseConnection(e){await this.#e.releaseConnection(e)}beginTransaction(e,r){return this.#e.beginTransaction(e,r)}commitTransaction(e){return this.#e.commitTransaction(e)}rollbackTransaction(e){return this.#e.rollbackTransaction(e)}async destroy(){this.#r&&(await this.#r,this.#n||(this.#n=this.#e.destroy().catch(e=>(this.#n=void 0,Promise.reject(e)))),await this.#n)}#s(){return this.#t.isLevelEnabled("query")||this.#t.isLevelEnabled("error")}#o(e){let r=e.executeQuery;e.executeQuery=async i=>{let n,a=y_();try{return await r.call(e,i)}catch(u){throw n=u,await this.#u(u,i,a),u}finally{n||await this.#c(i,a)}}}async#u(e,r,i){await this.#t.error(()=>({level:"error",error:e,query:r,queryDurationMillis:this.#l(i)}))}async#c(e,r){await this.#t.query(()=>({level:"query",query:e,queryDurationMillis:this.#l(r)}))}#l(e){return y_()-e}};o();s();var FM=()=>{},ja=class{#e;#t;constructor(e){this.#e=e}async provideConnection(e){for(;this.#t;)await this.#t.catch(FM);return this.#t=this.#r(e).finally(()=>{this.#t=void 0}),this.#t}async#r(e){return await e(this.#e)}};o();s();var PI=["read uncommitted","read committed","repeatable read","serializable","snapshot"];o();s();var Tye=c(["query","error"]),il=class{#e;#t;constructor(e){Ce(e)?(this.#t=e,this.#e=c({query:!0,error:!0})):(this.#t=zM,this.#e=c({query:e.includes("query"),error:e.includes("error")}))}isLevelEnabled(e){return this.#e[e]}async query(e){this.#e.query&&await this.#t(e())}async error(e){this.#e.error&&await this.#t(e())}};function zM(t){t.level==="query"?(console.log(`kysely:query: ${t.query.sql}`),console.log(`kysely:query: duration: ${t.queryDurationMillis.toFixed(1)}ms`)):t.level==="error"&&(t.error instanceof Error?console.error(`kysely:error: ${t.error.stack??t.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:t.error,query:t.query.sql,queryDurationMillis:t.queryDurationMillis})}`))}o();s();function jI(t){return bt(t)&&Ce(t.compile)}var Vs=class t extends Ps{#e;constructor(e){let r,i;if(QM(e))r={executor:e.executor},i={...e};else{let n=e.dialect,a=n.createDriver(),u=n.createQueryCompiler(),l=n.createAdapter(),h=new il(e.log??[]),y=new rl(a,h),_=new el(y),b=new tl(u,l,_,e.plugins??[]);r={executor:b},i={config:e,executor:b,dialect:n,driver:y}}super(r),this.#e=c(i)}get schema(){return new Xc(this.#e.executor)}get dynamic(){return new Zc}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(e){return new js({node:Ft.create(Bt(e)?void 0:Ct(e))})}get fn(){return Qc()}transaction(){return new sl({...this.#e})}connection(){return new nl({...this.#e})}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new hr(e))})}withTables(){return new t({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(e,r=ue()){let i=jI(e)?e.compile():e;return this.getExecutor().executeQuery(i,r)}},N_=class t extends Vs{#e;constructor(e){super(e),this.#e=e}get isTransaction(){return!0}transaction(){throw new Error("calling the transaction method for a Transaction is not supported")}connection(){throw new Error("calling the connection method for a Transaction is not supported")}async destroy(){throw new Error("calling the destroy method for a Transaction is not supported")}withPlugin(e){return new t({...this.#e,executor:this.#e.executor.withPlugin(e)})}withoutPlugins(){return new t({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(e){return new t({...this.#e,executor:this.#e.executor.withPluginAtFront(new hr(e))})}withTables(){return new t({...this.#e})}};function QM(t){return bt(t)&&bt(t.config)&&bt(t.driver)&&bt(t.executor)&&bt(t.dialect)}var nl=class{#e;constructor(e){this.#e=c(e)}async execute(e){return this.#e.executor.provideConnection(async r=>{let i=this.#e.executor.withConnectionProvider(new ja(r)),n=new Vs({...this.#e,executor:i});return await e(n)})}};D(nl,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");var sl=class t{#e;constructor(e){this.#e=c(e)}setIsolationLevel(e){return new t({...this.#e,isolationLevel:e})}async execute(e){let{isolationLevel:r,...i}=this.#e,n={isolationLevel:r};return $M(n),this.#e.executor.provideConnection(async a=>{let u=this.#e.executor.withConnectionProvider(new ja(a)),l=new N_({...i,executor:u});try{await this.#e.driver.beginTransaction(a,n);let h=await e(l);return await this.#e.driver.commitTransaction(a),h}catch(h){throw await this.#e.driver.rollbackTransaction(a),h}})}};D(sl,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method");function $M(t){if(t.isolationLevel&&!PI.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}o();s();var ol=class t{#e;constructor(e){this.#e=c(e)}get expressionType(){}get isRawBuilder(){return!0}as(e){return new al(this,e)}$castTo(){return new t({...this.#e})}$notNull(){return new t(this.#e)}withPlugin(e){return new t({...this.#e,plugins:this.#e.plugins!==void 0?c([...this.#e.plugins,e]):c([e])})}toOperationNode(){return this.#r(this.#t())}compile(e){return this.#i(this.#t(e))}async execute(e){let r=this.#t(e);return r.executeQuery(this.#i(r),this.#e.queryId)}#t(e){let r=e!==void 0?e.getExecutor():Ri;return this.#e.plugins!==void 0?r.withPlugins(this.#e.plugins):r}#r(e){return e.transformQuery(this.#e.rawNode,this.#e.queryId)}#i(e){return e.compileQuery(this.#r(e),this.#e.queryId)}};function ui(t){return new ol(t)}D(ol,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");var al=class{#e;#t;constructor(e,r){this.#e=e,this.#t=r}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return mt.create(this.#e.toOperationNode(),xe(this.#t)?this.#t.toOperationNode():H.create(this.#t))}};D(al,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.");o();s();var Wi=Object.assign((t,...e)=>ui({queryId:ue(),rawNode:Re.create(t,e?.map(DI)??[])}),{ref(t){return ui({queryId:ue(),rawNode:Re.createWithChild(Ut(t))})},val(t){return ui({queryId:ue(),rawNode:Re.createWithChild(Ne(t))})},value(t){return this.val(t)},table(t){return ui({queryId:ue(),rawNode:Re.createWithChild(de(t))})},id(...t){let e=new Array(t.length+1).fill(".");return e[0]="",e[e.length-1]="",ui({queryId:ue(),rawNode:Re.create(e,t.map(H.create))})},lit(t){return ui({queryId:ue(),rawNode:Re.createWithChild(ot.createImmediate(t))})},literal(t){return this.lit(t)},raw(t){return ui({queryId:ue(),rawNode:Re.createWithSql(t)})},join(t,e=Wi`, `){let r=new Array(2*t.length-1),i=e.toOperationNode();for(let n=0;n<t.length;++n)r[2*n]=DI(t[n]),n!==t.length-1&&(r[2*n+1]=i);return ui({queryId:ue(),rawNode:Re.createWithChildren(r)})}});function DI(t){return xe(t)?t.toOperationNode():Ne(t)}o();s();o();s();var ul=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#e=c({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=e=>{this.nodeStack.push(e),this.#e[e.kind](e),this.nodeStack.pop()}};var cl=class extends ul{#e="";#t=[];get numParameters(){return this.#t.length}compileQuery(e){return this.#e="",this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(e),c({query:e,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#e}visitSelectQuery(e){let r=this.parentNode!==void 0&&!Ar.is(this.parentNode)&&!et.is(this.parentNode)&&!ft.is(this.parentNode)&&!mr.is(this.parentNode)&&!kc.is(this.parentNode);this.parentNode===void 0&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("select"),e.distinctOn&&(this.append(" "),this.compileDistinctOn(e.distinctOn)),e.frontModifiers?.length&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.top&&(this.append(" "),this.visitNode(e.top)),e.selections&&(this.append(" "),this.compileList(e.selections)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.groupBy&&(this.append(" "),this.visitNode(e.groupBy)),e.having&&(this.append(" "),this.visitNode(e.having)),e.setOperations&&(this.append(" "),this.compileList(e.setOperations," ")),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.offset&&(this.append(" "),this.visitNode(e.offset)),e.fetch&&(this.append(" "),this.visitNode(e.fetch)),e.endModifiers?.length&&(this.append(" "),this.compileList(this.sortSelectModifiers([...e.endModifiers])," ")),r&&this.append(")")}visitFrom(e){this.append("from "),this.compileList(e.froms)}visitSelection(e){this.visitNode(e.selection)}visitColumn(e){this.visitNode(e.column)}compileDistinctOn(e){this.append("distinct on ("),this.compileList(e),this.append(")")}compileList(e,r=", "){let i=e.length-1;for(let n=0;n<=i;n++)this.visitNode(e[n]),n<i&&this.append(r)}visitWhere(e){this.append("where "),this.visitNode(e.where)}visitHaving(e){this.append("having "),this.visitNode(e.having)}visitInsertQuery(e){let r=this.nodeStack.find(j.is),i=r!==e;!i&&e.explain&&(this.visitNode(e.explain),this.append(" ")),i&&!tt.is(r)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append(e.replace?"replace":"insert"),e.ignore&&this.append(" ignore"),e.top&&(this.append(" "),this.visitNode(e.top)),e.into&&(this.append(" into "),this.visitNode(e.into)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.output&&(this.append(" "),this.visitNode(e.output)),e.values&&(this.append(" "),this.visitNode(e.values)),e.defaultValues&&(this.append(" "),this.append("default values")),e.onConflict&&(this.append(" "),this.visitNode(e.onConflict)),e.onDuplicateKey&&(this.append(" "),this.visitNode(e.onDuplicateKey)),e.returning&&(this.append(" "),this.visitNode(e.returning)),i&&!tt.is(r)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitValues(e){this.append("values "),this.compileList(e.values)}visitDeleteQuery(e){let r=this.nodeStack.find(j.is)!==e;!r&&e.explain&&(this.visitNode(e.explain),this.append(" ")),r&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("delete "),e.top&&(this.visitNode(e.top),this.append(" ")),this.visitNode(e.from),e.output&&(this.append(" "),this.visitNode(e.output)),e.using&&(this.append(" "),this.visitNode(e.using)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),r&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitReturning(e){this.append("returning "),this.compileList(e.selections)}visitAlias(e){this.visitNode(e.node),this.append(" as "),this.visitNode(e.alias)}visitReference(e){e.table&&(this.visitNode(e.table),this.append(".")),this.visitNode(e.column)}visitSelectAll(e){this.append("*")}visitIdentifier(e){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(e),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(e){if(!Me(e.name))throw new Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier(e.name))}visitAnd(e){this.visitNode(e.left),this.append(" and "),this.visitNode(e.right)}visitOr(e){this.visitNode(e.left),this.append(" or "),this.visitNode(e.right)}visitValue(e){e.immediate?this.appendImmediateValue(e.value):this.appendValue(e.value)}visitValueList(e){this.append("("),this.compileList(e.values),this.append(")")}visitTuple(e){this.append("("),this.compileList(e.values),this.append(")")}visitPrimitiveValueList(e){this.append("(");let{values:r}=e;for(let i=0;i<r.length;++i)this.appendValue(r[i]),i!==r.length-1&&this.append(", ");this.append(")")}visitParens(e){this.append("("),this.visitNode(e.node),this.append(")")}visitJoin(e){this.append(GM[e.joinType]),this.append(" "),this.visitNode(e.table),e.on&&(this.append(" "),this.visitNode(e.on))}visitOn(e){this.append("on "),this.visitNode(e.on)}visitRaw(e){let{sqlFragments:r,parameters:i}=e;for(let n=0;n<r.length;++n)this.append(r[n]),i.length>n&&this.visitNode(i[n])}visitOperator(e){this.append(e.operator)}visitTable(e){this.visitNode(e.table)}visitSchemableIdentifier(e){e.schema&&(this.visitNode(e.schema),this.append(".")),this.visitNode(e.identifier)}visitCreateTable(e){this.append("create "),e.frontModifiers&&e.frontModifiers.length>0&&(this.compileList(e.frontModifiers," "),this.append(" ")),e.temporary&&this.append("temporary "),this.append("table "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.table),e.selectQuery?(this.append(" as "),this.visitNode(e.selectQuery)):(this.append(" ("),this.compileList([...e.columns,...e.constraints??[]]),this.append(")"),e.onCommit&&(this.append(" on commit "),this.append(e.onCommit)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," ")))}visitColumnDefinition(e){e.ifNotExists&&this.append("if not exists "),this.visitNode(e.column),this.append(" "),this.visitNode(e.dataType),e.unsigned&&this.append(" unsigned"),e.frontModifiers&&e.frontModifiers.length>0&&(this.append(" "),this.compileList(e.frontModifiers," ")),e.generated&&(this.append(" "),this.visitNode(e.generated)),e.identity&&this.append(" identity"),e.defaultTo&&(this.append(" "),this.visitNode(e.defaultTo)),e.notNull&&this.append(" not null"),e.unique&&this.append(" unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.primaryKey&&this.append(" primary key"),e.autoIncrement&&(this.append(" "),this.append(this.getAutoIncrement())),e.references&&(this.append(" "),this.visitNode(e.references)),e.check&&(this.append(" "),this.visitNode(e.check)),e.endModifiers&&e.endModifiers.length>0&&(this.append(" "),this.compileList(e.endModifiers," "))}getAutoIncrement(){return"auto_increment"}visitReferences(e){this.append("references "),this.visitNode(e.table),this.append(" ("),this.compileList(e.columns),this.append(")"),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitDropTable(e){this.append("drop table "),e.ifExists&&this.append("if exists "),this.visitNode(e.table),e.cascade&&this.append(" cascade")}visitDataType(e){this.append(e.dataType)}visitOrderBy(e){this.append("order by "),this.compileList(e.items)}visitOrderByItem(e){this.visitNode(e.orderBy),e.direction&&(this.append(" "),this.visitNode(e.direction))}visitGroupBy(e){this.append("group by "),this.compileList(e.items)}visitGroupByItem(e){this.visitNode(e.groupBy)}visitUpdateQuery(e){let r=this.nodeStack.find(j.is),i=r!==e;!i&&e.explain&&(this.visitNode(e.explain),this.append(" ")),i&&!tt.is(r)&&this.append("("),e.with&&(this.visitNode(e.with),this.append(" ")),this.append("update "),e.top&&(this.visitNode(e.top),this.append(" ")),e.table&&(this.visitNode(e.table),this.append(" ")),this.append("set "),e.updates&&this.compileList(e.updates),e.output&&(this.append(" "),this.visitNode(e.output)),e.from&&(this.append(" "),this.visitNode(e.from)),e.joins&&(this.append(" "),this.compileList(e.joins," ")),e.where&&(this.append(" "),this.visitNode(e.where)),e.limit&&(this.append(" "),this.visitNode(e.limit)),e.returning&&(this.append(" "),this.visitNode(e.returning)),i&&!tt.is(r)&&this.append(")"),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitColumnUpdate(e){this.visitNode(e.column),this.append(" = "),this.visitNode(e.value)}visitLimit(e){this.append("limit "),this.visitNode(e.limit)}visitOffset(e){this.append("offset "),this.visitNode(e.offset)}visitOnConflict(e){this.append("on conflict"),e.columns?(this.append(" ("),this.compileList(e.columns),this.append(")")):e.constraint?(this.append(" on constraint "),this.visitNode(e.constraint)):e.indexExpression&&(this.append(" ("),this.visitNode(e.indexExpression),this.append(")")),e.indexWhere&&(this.append(" "),this.visitNode(e.indexWhere)),e.doNothing===!0?this.append(" do nothing"):e.updates&&(this.append(" do update set "),this.compileList(e.updates),e.updateWhere&&(this.append(" "),this.visitNode(e.updateWhere)))}visitOnDuplicateKey(e){this.append("on duplicate key update "),this.compileList(e.updates)}visitCreateIndex(e){this.append("create "),e.unique&&this.append("unique "),this.append("index "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.using&&(this.append(" using "),this.visitNode(e.using)),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.nullsNotDistinct&&this.append(" nulls not distinct"),e.where&&(this.append(" "),this.visitNode(e.where))}visitDropIndex(e){this.append("drop index "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.table&&(this.append(" on "),this.visitNode(e.table)),e.cascade&&this.append(" cascade")}visitCreateSchema(e){this.append("create schema "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.schema)}visitDropSchema(e){this.append("drop schema "),e.ifExists&&this.append("if exists "),this.visitNode(e.schema),e.cascade&&this.append(" cascade")}visitPrimaryKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("primary key ("),this.compileList(e.columns),this.append(")")}visitUniqueConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("unique"),e.nullsNotDistinct&&this.append(" nulls not distinct"),this.append(" ("),this.compileList(e.columns),this.append(")")}visitCheckConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("check ("),this.visitNode(e.expression),this.append(")")}visitForeignKeyConstraint(e){e.name&&(this.append("constraint "),this.visitNode(e.name),this.append(" ")),this.append("foreign key ("),this.compileList(e.columns),this.append(") "),this.visitNode(e.references),e.onDelete&&(this.append(" on delete "),this.append(e.onDelete)),e.onUpdate&&(this.append(" on update "),this.append(e.onUpdate))}visitList(e){this.compileList(e.items)}visitWith(e){this.append("with "),e.recursive&&this.append("recursive "),this.compileList(e.expressions)}visitCommonTableExpression(e){this.visitNode(e.name),this.append(" as "),Nn(e.materialized)&&(e.materialized||this.append("not "),this.append("materialized ")),this.visitNode(e.expression)}visitCommonTableExpressionName(e){this.visitNode(e.table),e.columns&&(this.append("("),this.compileList(e.columns),this.append(")"))}visitAlterTable(e){this.append("alter table "),this.visitNode(e.table),this.append(" "),e.renameTo&&(this.append("rename to "),this.visitNode(e.renameTo)),e.setSchema&&(this.append("set schema "),this.visitNode(e.setSchema)),e.addConstraint&&this.visitNode(e.addConstraint),e.dropConstraint&&this.visitNode(e.dropConstraint),e.columnAlterations&&this.compileColumnAlterations(e.columnAlterations),e.addIndex&&this.visitNode(e.addIndex),e.dropIndex&&this.visitNode(e.dropIndex)}visitAddColumn(e){this.append("add column "),this.visitNode(e.column)}visitRenameColumn(e){this.append("rename column "),this.visitNode(e.column),this.append(" to "),this.visitNode(e.renameTo)}visitDropColumn(e){this.append("drop column "),this.visitNode(e.column)}visitAlterColumn(e){this.append("alter column "),this.visitNode(e.column),this.append(" "),e.dataType&&(this.announcesNewColumnDataType()&&this.append("type "),this.visitNode(e.dataType),e.dataTypeExpression&&(this.append("using "),this.visitNode(e.dataTypeExpression))),e.setDefault&&(this.append("set default "),this.visitNode(e.setDefault)),e.dropDefault&&this.append("drop default"),e.setNotNull&&this.append("set not null"),e.dropNotNull&&this.append("drop not null")}visitModifyColumn(e){this.append("modify column "),this.visitNode(e.column)}visitAddConstraint(e){this.append("add "),this.visitNode(e.constraint)}visitDropConstraint(e){this.append("drop constraint "),e.ifExists&&this.append("if exists "),this.visitNode(e.constraintName),e.modifier==="cascade"?this.append(" cascade"):e.modifier==="restrict"&&this.append(" restrict")}visitSetOperation(e){this.append(e.operator),this.append(" "),e.all&&this.append("all "),this.visitNode(e.expression)}visitCreateView(e){this.append("create "),e.orReplace&&this.append("or replace "),e.materialized&&this.append("materialized "),e.temporary&&this.append("temporary "),this.append("view "),e.ifNotExists&&this.append("if not exists "),this.visitNode(e.name),this.append(" "),e.columns&&(this.append("("),this.compileList(e.columns),this.append(") ")),e.as&&(this.append("as "),this.visitNode(e.as))}visitDropView(e){this.append("drop "),e.materialized&&this.append("materialized "),this.append("view "),e.ifExists&&this.append("if exists "),this.visitNode(e.name),e.cascade&&this.append(" cascade")}visitGenerated(e){this.append("generated "),e.always&&this.append("always "),e.byDefault&&this.append("by default "),this.append("as "),e.identity&&this.append("identity"),e.expression&&(this.append("("),this.visitNode(e.expression),this.append(")")),e.stored&&this.append(" stored")}visitDefaultValue(e){this.append("default "),this.visitNode(e.defaultValue)}visitSelectModifier(e){e.rawModifier?this.visitNode(e.rawModifier):this.append(VM[e.modifier]),e.of&&(this.append(" of "),this.compileList(e.of,", "))}visitCreateType(e){this.append("create type "),this.visitNode(e.name),e.enum&&(this.append(" as enum "),this.visitNode(e.enum))}visitDropType(e){this.append("drop type "),e.ifExists&&this.append("if exists "),this.visitNode(e.name)}visitExplain(e){this.append("explain"),(e.options||e.format)&&(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),e.options&&(this.visitNode(e.options),e.format&&this.append(this.getExplainOptionsDelimiter())),e.format&&(this.append("format"),this.append(this.getExplainOptionAssignment()),this.append(e.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(e){this.append("default")}visitAggregateFunction(e){this.append(e.func),this.append("("),e.distinct&&this.append("distinct "),this.compileList(e.aggregated),e.orderBy&&(this.append(" "),this.visitNode(e.orderBy)),this.append(")"),e.filter&&(this.append(" filter("),this.visitNode(e.filter),this.append(")")),e.over&&(this.append(" "),this.visitNode(e.over))}visitOver(e){this.append("over("),e.partitionBy&&(this.visitNode(e.partitionBy),e.orderBy&&this.append(" ")),e.orderBy&&this.visitNode(e.orderBy),this.append(")")}visitPartitionBy(e){this.append("partition by "),this.compileList(e.items)}visitPartitionByItem(e){this.visitNode(e.partitionBy)}visitBinaryOperation(e){this.visitNode(e.leftOperand),this.append(" "),this.visitNode(e.operator),this.append(" "),this.visitNode(e.rightOperand)}visitUnaryOperation(e){this.visitNode(e.operator),this.isMinusOperator(e.operator)||this.append(" "),this.visitNode(e.operand)}isMinusOperator(e){return kt.is(e)&&e.operator==="-"}visitUsing(e){this.append("using "),this.compileList(e.tables)}visitFunction(e){this.append(e.func),this.append("("),this.compileList(e.arguments),this.append(")")}visitCase(e){this.append("case"),e.value&&(this.append(" "),this.visitNode(e.value)),e.when&&(this.append(" "),this.compileList(e.when," ")),e.else&&(this.append(" else "),this.visitNode(e.else)),this.append(" end"),e.isStatement&&this.append(" case")}visitWhen(e){this.append("when "),this.visitNode(e.condition),e.result&&(this.append(" then "),this.visitNode(e.result))}visitJSONReference(e){this.visitNode(e.reference),this.visitNode(e.traversal)}visitJSONPath(e){e.inOperator&&this.visitNode(e.inOperator),this.append("'$");for(let r of e.pathLegs)this.visitNode(r);this.append("'")}visitJSONPathLeg(e){let r=e.type==="ArrayLocation";this.append(r?"[":"."),this.append(String(e.value)),r&&this.append("]")}visitJSONOperatorChain(e){for(let r=0,i=e.values.length;r<i;r++)r===i-1?this.visitNode(e.operator):this.append("->"),this.visitNode(e.values[r])}visitMergeQuery(e){e.with&&(this.visitNode(e.with),this.append(" ")),this.append("merge "),e.top&&(this.visitNode(e.top),this.append(" ")),this.append("into "),this.visitNode(e.into),e.using&&(this.append(" "),this.visitNode(e.using)),e.whens&&(this.append(" "),this.compileList(e.whens," ")),e.output&&(this.append(" "),this.visitNode(e.output)),e.endModifiers?.length&&(this.append(" "),this.compileList(e.endModifiers," "))}visitMatched(e){e.not&&this.append("not "),this.append("matched"),e.bySource&&this.append(" by source")}visitAddIndex(e){this.append("add "),e.unique&&this.append("unique "),this.append("index "),this.visitNode(e.name),e.columns&&(this.append(" ("),this.compileList(e.columns),this.append(")")),e.using&&(this.append(" using "),this.visitNode(e.using))}visitCast(e){this.append("cast("),this.visitNode(e.expression),this.append(" as "),this.visitNode(e.dataType),this.append(")")}visitFetch(e){this.append("fetch next "),this.visitNode(e.rowCount),this.append(` rows ${e.modifier}`)}visitOutput(e){this.append("output "),this.compileList(e.selections)}visitTop(e){this.append(`top(${e.expression})`),e.modifiers&&this.append(` ${e.modifiers}`)}append(e){this.#e+=e}appendValue(e){this.addParameter(e),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier(e){let r=this.getLeftIdentifierWrapper(),i=this.getRightIdentifierWrapper(),n="";for(let a of e)n+=a,a===r?n+=r:a===i&&(n+=i);return n}addParameter(e){this.#t.push(e)}appendImmediateValue(e){if(Me(e))this.append(`'${e}'`);else if(qi(e)||Nn(e))this.append(e.toString());else if(_s(e))this.append("null");else if(Fv(e))this.appendImmediateValue(e.toISOString());else if(ws(e))this.appendImmediateValue(e.toString());else throw new Error(`invalid immediate value ${e}`)}sortSelectModifiers(e){return e.sort((r,i)=>r.modifier&&i.modifier?MI[r.modifier]-MI[i.modifier]:1),c(e)}compileColumnAlterations(e){this.compileList(e)}announcesNewColumnDataType(){return!0}},VM=c({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),MI=c({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),GM=c({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",Using:"using"});o();s();var ll=c({raw(t,e=[]){return c({sql:t,query:Re.createWithSql(t),parameters:c(e)})}});o();s();var dl=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}};o();s();var WI="kysely_migration",LI="kysely_migration_lock";var ZNe=c({__noMigrations__:!0});o();s();var JM=/"/g,pl=class extends cl{sanitizeIdentifier(e){return e.replace(JM,'""')}};o();s();var hl=class{#e;constructor(e){this.#e=e}async getSchemas(){return(await this.#e.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map(r=>({name:r.nspname}))}async getTables(e={withInternalKyselyTables:!1}){let r=this.#e.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",Wi`col_description(a.attrelid, a.attnum)`.as("column_description"),this.#e.selectFrom("pg_class").select(Wi`true`.as("auto_incrementing")).whereRef("relnamespace","=","c.relnamespace").where("relkind","=","S").where("relname","=",Wi`c.relname || '_' || a.attname || '_seq'`).as("auto_incrementing")]).where(n=>n.or([n("c.relkind","=","r"),n("c.relkind","=","v"),n("c.relkind","=","p")])).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();e.withInternalKyselyTables||(r=r.where("c.relname","!=",WI).where("c.relname","!=",LI));let i=await r.execute();return this.#t(i)}async getMetadata(e){return{tables:await this.getTables(e)}}#t(e){return e.reduce((r,i)=>{let n=r.find(a=>a.name===i.table&&a.schema===i.schema);return n||(n=c({name:i.table,isView:i.table_type==="v",schema:i.schema,columns:[]}),r.push(n)),n.columns.push(c({name:i.column,dataType:i.type,dataTypeSchema:i.type_schema,isNullable:!i.not_null,isAutoIncrementing:!!i.auto_incrementing,hasDefaultValue:i.has_default,comment:i.column_description??void 0})),r},[])}};o();s();var HM=BigInt("3853314791062309107"),fl=class extends dl{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(e,r){await Wi`select pg_advisory_xact_lock(${Wi.lit(HM)})`.execute(e)}async releaseMigrationLock(e,r){}};var Yo=PD(SD());o();s();var gN=class{constructor(e){this.client=e}createDriver(){return new sv(this.client)}createQueryCompiler(){return new pl}createAdapter(){return new fl}createIntrospector(e){return new hl(e)}},sv=class{constructor(e){this.client=e}async init(){await this.client.connect()}async acquireConnection(){return new ov(this.client)}async beginTransaction(e,r){let i=r.isolationLevel?`begin isolation level ${r.isolationLevel}`:"begin";await e.executeQuery(ll.raw(i))}async commitTransaction(e){await e.executeQuery(ll.raw("commit"))}async rollbackTransaction(e){await e.executeQuery(ll.raw("rollback"))}async releaseConnection(e){}async destroy(){await this.client.end()}},ov=class{constructor(e){this.client=e}async executeQuery(e){let r=await this.client.queryObject(e.sql,[...e.parameters]),i=r.rows??[];if(["INSERT","UPDATE","DELETE"].includes(r.command)){let n=BigInt(r.rowCount);return{numAffectedRows:n,numUpdatedOrDeletedRows:n,rows:i}}return{rows:r.rows??[]}}async*streamQuery(e,r){throw new Error("Not supported")}};var uFe=async t=>{let e=new tailordb.Client({namespace:t.namespace}),r=new Vs({dialect:new gN(e)}),i=new Yo.PostgresDialect({domains:!1}),n=await i.introspector.introspect({db:r}),a=(0,Yo.transform)({dialect:i,metadata:n});return{data:new Yo.Serializer().serializeFile(a)}};export{uFe as default};
/*! Bundled license information:

unenv/runtime/node/buffer/_ieee754.mjs:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

unenv/runtime/node/buffer/_buffer.mjs:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)
*/
